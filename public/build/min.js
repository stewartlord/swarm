/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;
if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")
},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});
!function(e,x,h){function r(a,b){var c=Math.max(0,a[0]-b[0],b[0]-a[1]),d=Math.max(0,a[2]-b[1],b[1]-a[3]);return c+d}function s(a,b,c,d){for(var f=a.length,d=d?"offset":"position",c=c||0;f--;){var k=a[f].el?a[f].el:e(a[f]),i=k[d]();i.left+=parseInt(k.css("margin-left"),10);i.top+=parseInt(k.css("margin-top"),10);b[f]=[i.left-c,i.left+k.outerWidth()+c,i.top-c,i.top+k.outerHeight()+c]}}function l(a,b){var c=b.offset();return{left:a.left-c.left,top:a.top-c.top}}function t(a,b,c){for(var b=[b.left,b.top],
c=c&&[c.left,c.top],d,f=a.length,e=[];f--;)d=a[f],e[f]=[f,r(d,b),c&&r(d,c)];return e=e.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0]})}function m(a){this.options=e.extend({},j,a);this.containers=[];this.scrollProxy=e.proxy(this.scroll,this);this.dragProxy=e.proxy(this.drag,this);this.dropProxy=e.proxy(this.drop,this);this.options.parentContainer||(this.placeholder=e(this.options.placeholder),a.isValidTarget||(this.options.isValidTarget=h))}function n(a,b){this.el=a;this.options=e.extend({},
v,b);this.group=m.get(this.options);this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group;this.parentContainer=this.options.parentContainer;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;this.el.on(o.start,this.handle,e.proxy(this.dragInit,this));this.options.drop&&this.group.containers.push(this)}var o,v={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},j={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,handle:"",itemPath:"",
itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(a,b){a.css(b)},onDragStart:function(a){a.css({height:a.height(),width:a.width()});a.addClass("dragged");e("body").addClass("dragging")},onDrop:function(a){a.removeClass("dragged").removeAttr("style");e("body").removeClass("dragging")},onMousedown:function(a,b){b.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(a,b,c){a=e.extend({},a.data());if(c)return b;b[0]&&
(a.children=b,delete a.subContainer);delete a.sortable;return a},tolerance:0},p={},u=0,w={left:0,top:0,bottom:0,right:0};o={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};m.get=function(a){p[a.group]||(a.group||(a.group=u++),p[a.group]=new m(a));return p[a.group]};m.prototype={dragInit:function(a,b){this.$document=e(b.el[0].ownerDocument);b.enabled()?(this.toggleListeners("on"),
this.item=e(a.target).closest(this.options.itemSelector),this.itemContainer=b,this.setPointer(a),this.options.onMousedown(this.item,a,j.onMousedown)):this.toggleListeners("on",["drop"]);this.dragInitDone=!0},drag:function(a){if(!this.dragging){if(!this.distanceMet(a))return;this.options.onDragStart(this.item,this.itemContainer,j.onDragStart);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(a);this.options.onDrag(this.item,l(this.pointer,this.item.offsetParent()),j.onDrag);var b=
a.pageX,a=a.pageY,c=this.sameResultBox,d=this.options.tolerance;if(!c||c.top-d>a||c.bottom+d<a||c.left-d>b||c.right+d<b)this.searchValidTarget()||this.placeholder.detach()},drop:function(){this.toggleListeners("off");this.dragInitDone=!1;if(this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,j.onCancel);this.options.onDrop(this.item,this.getContainer(this.item),j.onDrop);this.clearDimensions();this.clearOffsetParent();
this.lastAppendedItem=this.sameResultBox=h;this.dragging=!1}},searchValidTarget:function(a,b){a||(a=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=t(this.getContainerDimensions(),a,b),d=c.length;d--;){var f=c[d][0];if(!c[d][1]||this.options.pullPlaceholder)if(f=this.containers[f],!f.disabled){if(!this.$getOffsetParent())var e=f.getItemOffsetParent(),a=l(a,e),b=l(b,e);if(f.searchValidTarget(a,b))return!0}}this.sameResultBox&&(this.sameResultBox=h)},movePlaceholder:function(a,
b,c,d){var f=this.lastAppendedItem;if(d||!(f&&f[0]===b[0]))b[c](this.placeholder),this.lastAppendedItem=b,this.sameResultBox=d,this.options.afterMove(this.placeholder,a)},getContainerDimensions:function(){this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent());return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data("sortable")},$getOffsetParent:function(){if(this.offsetParent===
h){var a=this.containers.length-1,b=this.containers[a].getItemOffsetParent();if(!this.options.parentContainer)for(;a--;)if(b[0]!=this.containers[a].getItemOffsetParent()[0]){b=!1;break}this.offsetParent=b}return this.offsetParent},setPointer:function(a){a={left:a.pageX,top:a.pageY};if(this.$getOffsetParent()){var b=l(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=b}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){return Math.max(Math.abs(this.pointer.left-
a.pageX),Math.abs(this.pointer.top-a.pageY))>=this.options.distance},scroll:function(){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a,b){var c=this,b=b||["drag","drop","scroll"];e.each(b,function(b,f){c.$document[a](o[f],c[f+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=h},clearDimensions:function(){this.containerDimensions=h;for(var a=this.containers.length;a--;)this.containers[a].clearDimensions()}};n.prototype={dragInit:function(a){var b=this.rootGroup;
!b.dragInitDone&&1===a.which&&this.options.drag&&!e(a.target).is(this.options.exclude)&&b.dragInit(a,this)},searchValidTarget:function(a,b){var c=t(this.getItemDimensions(),a,b),d=c.length,f=this.rootGroup,e=!f.options.isValidTarget||f.options.isValidTarget(f.item,this);if(!d&&e)return f.movePlaceholder(this,this.el,"append"),!0;for(;d--;)if(f=c[d][0],!c[d][1]&&this.hasChildGroup(f)){if(this.getContainerGroup(f).searchValidTarget(a,b))return!0}else if(e)return this.movePlaceholder(f,a),!0},movePlaceholder:function(a,
b){var c=e(this.items[a]),d=this.itemDimensions[a],f="after",h=c.outerWidth(),i=c.outerHeight(),g=c.offset(),g={left:g.left,right:g.left+h,top:g.top,bottom:g.top+i};this.options.vertical?b.top<=(d[2]+d[3])/2?(f="before",g.bottom-=i/2):g.top+=i/2:b.left<=(d[0]+d[1])/2?(f="before",g.right-=h/2):g.left+=h/2;this.hasChildGroup(a)&&(g=w);this.rootGroup.movePlaceholder(this,c,f,g)},getItemDimensions:function(){this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),
s(this.items,this.itemDimensions=[],this.options.tolerance));return this.itemDimensions},getItemOffsetParent:function(){var a=this.el;return"relative"===a.css("position")||"absolute"===a.css("position")||"fixed"===a.css("position")?a:a.offsetParent()},hasChildGroup:function(a){return this.options.nested&&this.getContainerGroup(a)},getContainerGroup:function(a){var b=e.data(this.items[a],"subContainer");if(b===h){var c=this.$getChildren(this.items[a],"container"),b=!1;c[0]&&(b=e.extend({},this.options,
{parentContainer:this,group:u++}),b=c.sortable(b).data("sortable").group);e.data(this.items[a],"subContainer",b)}return b},enabled:function(){return!this.disabled&&(!this.parentContainer||this.parentContainer.enabled())},$getChildren:function(a,b){var c=this.rootGroup.options,d=c[b+"Path"],c=c[b+"Selector"],a=e(a);d&&(a=a.find(d));return a.children(c)},_serialize:function(a,b){var c=this,d=this.$getChildren(a,b?"item":"container").not(this.options.exclude).map(function(){return c._serialize(e(this),
!b)}).get();return this.rootGroup.options.serialize(a,d,b)},clearDimensions:function(){this.itemDimensions=h;if(this.items&&this.items[0])for(var a=this.items.length;a--;){var b=e.data(this.items[a],"subContainer");b&&b.clearDimensions()}}};var q={enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},serialize:function(){return this._serialize(this.el,!0)}};e.extend(n.prototype,q);e.fn.sortable=function(a){var b=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=
e(this),d=c.data("sortable");if(d&&q[a])return q[a].apply(d,b)||this;!d&&(a===h||"object"===typeof a)&&c.data("sortable",new n(c,a));return this})}}(jQuery,window);
/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-dropdown.js, bootstrap-scrollspy.js, bootstrap-tab.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-affix.js, bootstrap-alert.js, bootstrap-button.js, bootstrap-collapse.js, bootstrap-carousel.js, bootstrap-typeahead.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!b)return;e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){function d(){a(b).each(function(){e(a(this)).removeClass("open")})}function e(b){var c=b.attr("data-target"),d;c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c);if(!d||!d.length)d=b.parent();return d}var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||f.toggleClass("open"),c.focus(),!1},keydown:function(c){var d,f,g,h,i,j;if(!/(38|40|27)/.test(c.keyCode))return;d=a(this),c.preventDefault(),c.stopPropagation();if(d.is(".disabled, :disabled"))return;h=e(d),i=h.hasClass("open");if(!i||i&&c.keyCode==27)return c.which==27&&h.find(b).focus(),d.click();f=a("[role=menu] li:not(.divider):visible a",h);if(!f.length)return;j=f.index(f.filter(":focus")),c.keyCode==38&&j>0&&j--,c.keyCode==40&&j<f.length-1&&j++,~j||(j=0),f.eq(j).focus()}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on(".dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var c=a(this),d=c.data("target")||c.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" ");for(i=g.length;i--;)h=g[i],h=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):h!="manual"&&(e=h=="hover"?"mouseenter":"focus",f=h=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(h);if(h.isDefaultPrevented())return;b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight;switch(f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c=this.tip(),d=c[0].offsetWidth,e=c[0].offsetHeight,f,g,h,i;c.offset(a).addClass(b).addClass("in"),f=c[0].offsetWidth,g=c[0].offsetHeight,b=="top"&&g!=e&&(a.top=a.top+e-g,i=!0),b=="bottom"||b=="top"?(h=0,a.left<0&&(h=a.left*-2,a.left=0,c.offset(a),f=c[0].offsetWidth,g=c[0].offsetHeight),this.replaceArrow(h-d+f,f,"left")):this.replaceArrow(g-e,g,"top"),i&&c.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function e(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var b=this,c=this.tip(),d=a.Event("hide");this.$element.trigger(d);if(d.isDefaultPrevented())return;return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?e():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},typeof b.getBoundingClientRect=="function"?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=(typeof c.content=="function"?c.content.call(b[0]):c.content)||b.attr("data-content"),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning||this.$element.hasClass("in"))return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning||!this.$element.hasClass("in"))return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),typeof c=="object"&&c);e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(b>this.$items.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j;this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),j=a.Event("slide",{relatedTarget:e[0],direction:g});if(e.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")}));if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g;e.carousel(f),(g=c.attr("data-slide-to"))&&e.data("carousel").pause().to(g).cycle(),b.preventDefault()})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b=typeof this.$element[a]=="function"),b},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;c.typeahead(c.data())})}(window.jQuery)
;(function(){function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}
diff_match_patch.prototype.diff_main=function(a,b,c,d){"undefined"==typeof d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[[0,a]]:[];"undefined"==typeof c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f);a=a.substring(f);b=b.substring(f);var f=this.diff_commonSuffix(a,b),g=a.substring(a.length-f);a=a.substring(0,a.length-f);b=b.substring(0,b.length-f);a=this.diff_compute_(a,
b,e,d);c&&a.unshift([0,c]);g&&a.push([0,g]);this.diff_cleanupMerge(a);return a};
diff_match_patch.prototype.diff_compute_=function(a,b,c,d){if(!a)return[[1,b]];if(!b)return[[-1,a]];var e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[[1,e.substring(0,g)],[0,f],[1,e.substring(g+f.length)]],a.length>b.length&&(c[0][0]=c[2][0]=-1),c):1==f.length?[[-1,a],[1,b]]:(e=this.diff_halfMatch_(a,b))?(f=e[0],a=e[1],g=e[2],b=e[3],e=e[4],f=this.diff_main(f,g,c,d),c=this.diff_main(a,b,c,d),f.concat([[0,e]],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,
d):this.diff_bisect_(a,b,d)};
diff_match_patch.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1;b=d.chars2;d=d.lineArray;a=this.diff_main(a,b,!1,c);this.diff_charsToLines_(a,d);this.diff_cleanupSemantic(a);a.push([0,""]);for(var e=d=b=0,f="",g="";b<a.length;){switch(a[b][0]){case 1:e++;g+=a[b][1];break;case -1:d++;f+=a[b][1];break;case 0:if(1<=d&&1<=e){a.splice(b-d-e,d+e);b=b-d-e;d=this.diff_main(f,g,!1,c);for(e=d.length-1;0<=e;e--)a.splice(b,0,d[e]);b+=d.length}d=e=0;g=f=""}b++}a.pop();return a};
diff_match_patch.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,j=Array(h),i=Array(h),k=0;k<h;k++)j[k]=-1,i[k]=-1;j[g+1]=0;i[g+1]=0;for(var k=d-e,q=0!=k%2,r=0,t=0,p=0,w=0,v=0;v<f&&!((new Date).getTime()>c);v++){for(var n=-v+r;n<=v-t;n+=2){var l=g+n,m;m=n==-v||n!=v&&j[l-1]<j[l+1]?j[l+1]:j[l-1]+1;for(var s=m-n;m<d&&s<e&&a.charAt(m)==b.charAt(s);)m++,s++;j[l]=m;if(m>d)t+=2;else if(s>e)r+=2;else if(q&&(l=g+k-n,0<=l&&l<h&&-1!=i[l])){var u=d-i[l];if(m>=
u)return this.diff_bisectSplit_(a,b,m,s,c)}}for(n=-v+p;n<=v-w;n+=2){l=g+n;u=n==-v||n!=v&&i[l-1]<i[l+1]?i[l+1]:i[l-1]+1;for(m=u-n;u<d&&m<e&&a.charAt(d-u-1)==b.charAt(e-m-1);)u++,m++;i[l]=u;if(u>d)w+=2;else if(m>e)p+=2;else if(!q&&(l=g+k-n,0<=l&&(l<h&&-1!=j[l])&&(m=j[l],s=g+m-l,u=d-u,m>=u)))return this.diff_bisectSplit_(a,b,m,s,c)}}return[[-1,a],[1,b]]};
diff_match_patch.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);a=a.substring(c);b=b.substring(d);f=this.diff_main(f,g,!1,e);e=this.diff_main(a,b,!1,e);return f.concat(e)};
diff_match_patch.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c);-1==f&&(f=a.length-1);var r=a.substring(c,f+1),c=f+1;(e.hasOwnProperty?e.hasOwnProperty(r):void 0!==e[r])?b+=String.fromCharCode(e[r]):(b+=String.fromCharCode(g),e[r]=g,d[g++]=r)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return{chars1:f,chars2:g,lineArray:d}};
diff_match_patch.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}};diff_match_patch.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
diff_match_patch.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
diff_match_patch.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c>d?a=a.substring(c-d):c<d&&(b=b.substring(0,c));c=Math.min(c,d);if(a==b)return c;for(var d=0,e=1;;){var f=a.substring(c-e),f=b.indexOf(f);if(-1==f)return d;e+=f;if(0==f||a.substring(c-e)==b.substring(0,e))d=e,e++}};
diff_match_patch.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,g="",h,j,n,l;-1!=(e=b.indexOf(d,e+1));){var m=f.diff_commonPrefix(a.substring(c),b.substring(e)),s=f.diff_commonSuffix(a.substring(0,c),b.substring(0,e));g.length<s+m&&(g=b.substring(e-s,e)+b.substring(e,e+m),h=a.substring(0,c-s),j=a.substring(c+m),n=b.substring(0,e-s),l=b.substring(e+m))}return 2*g.length>=a.length?[h,j,n,l,g]:null}if(0>=this.Diff_Timeout)return null;
var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f=this,g=c(d,e,Math.ceil(d.length/4)),d=c(d,e,Math.ceil(d.length/2)),h;if(!g&&!d)return null;h=d?g?g[4].length>d[4].length?g:d:d:g;var j;a.length>b.length?(g=h[0],d=h[1],e=h[2],j=h[3]):(e=h[0],j=h[1],g=h[2],d=h[3]);h=h[4];return[g,d,e,j,h]};
diff_match_patch.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,j=0,i=0;f<a.length;)0==a[f][0]?(c[d++]=f,g=j,h=i,i=j=0,e=a[f][1]):(1==a[f][0]?j+=a[f][1].length:i+=a[f][1].length,e&&(e.length<=Math.max(g,h)&&e.length<=Math.max(j,i))&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,d--,f=0<d?c[d-1]:-1,i=j=h=g=0,e=null,b=!0)),f++;b&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(f=1;f<a.length;){if(-1==a[f-1][0]&&1==a[f][0]){b=a[f-1][1];c=a[f][1];
d=this.diff_commonOverlap_(b,c);e=this.diff_commonOverlap_(c,b);if(d>=e){if(d>=b.length/2||d>=c.length/2)a.splice(f,0,[0,c.substring(0,d)]),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++}else if(e>=b.length/2||e>=c.length/2)a.splice(f,0,[0,b.substring(0,e)]),a[f-1][0]=1,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=-1,a[f+1][1]=b.substring(e),f++;f++}f++}};
diff_match_patch.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){if(!a||!b)return 6;var c=a.charAt(a.length-1),d=b.charAt(0),e=c.match(diff_match_patch.nonAlphaNumericRegex_),f=d.match(diff_match_patch.nonAlphaNumericRegex_),g=e&&c.match(diff_match_patch.whitespaceRegex_),h=f&&d.match(diff_match_patch.whitespaceRegex_),c=g&&c.match(diff_match_patch.linebreakRegex_),d=h&&d.match(diff_match_patch.linebreakRegex_),i=c&&a.match(diff_match_patch.blanklineEndRegex_),j=d&&b.match(diff_match_patch.blanklineStartRegex_);
return i||j?5:c||d?4:e&&!g&&h?3:g||h?2:e||f?1:0}for(var c=1;c<a.length-1;){if(0==a[c-1][0]&&0==a[c+1][0]){var d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=this.diff_commonSuffix(d,e);if(g)var h=e.substring(e.length-g),d=d.substring(0,d.length-g),e=h+e.substring(0,e.length-g),f=h+f;for(var g=d,h=e,j=f,i=b(d,e)+b(e,f);e.charAt(0)===f.charAt(0);){var d=d+e.charAt(0),e=e.substring(1)+f.charAt(0),f=f.substring(1),k=b(d,e)+b(e,f);k>=i&&(i=k,g=d,h=e,j=f)}a[c-1][1]!=g&&(g?a[c-1][1]=g:(a.splice(c-1,1),c--),a[c][1]=
h,j?a[c+1][1]=j:(a.splice(c+1,1),c--))}c++}};diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;diff_match_patch.whitespaceRegex_=/\s/;diff_match_patch.linebreakRegex_=/[\r\n]/;diff_match_patch.blanklineEndRegex_=/\n\r?\n$/;diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/;
diff_match_patch.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,j=!1,i=!1;f<a.length;){if(0==a[f][0])a[f][1].length<this.Diff_EditCost&&(j||i)?(c[d++]=f,g=j,h=i,e=a[f][1]):(d=0,e=null),j=i=!1;else if(-1==a[f][0]?i=!0:j=!0,e&&(g&&h&&j&&i||e.length<this.Diff_EditCost/2&&3==g+h+j+i))a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,e=null,g&&h?(j=i=!0,d=0):(d--,f=0<d?c[d-1]:-1,j=i=!1),b=!0;f++}b&&this.diff_cleanupMerge(a)};
diff_match_patch.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var b=0,c=0,d=0,e="",f="",g;b<a.length;)switch(a[b][0]){case 1:d++;f+=a[b][1];b++;break;case -1:c++;e+=a[b][1];b++;break;case 0:1<c+d?(0!==c&&0!==d&&(g=this.diff_commonPrefix(f,e),0!==g&&(0<b-c-d&&0==a[b-c-d-1][0]?a[b-c-d-1][1]+=f.substring(0,g):(a.splice(0,0,[0,f.substring(0,g)]),b++),f=f.substring(g),e=e.substring(g)),g=this.diff_commonSuffix(f,e),0!==g&&(a[b][1]=f.substring(f.length-g)+a[b][1],f=f.substring(0,f.length-
g),e=e.substring(0,e.length-g))),0===c?a.splice(b-d,c+d,[1,f]):0===d?a.splice(b-c,c+d,[-1,e]):a.splice(b-c-d,c+d,[-1,e],[1,f]),b=b-c-d+(c?1:0)+(d?1:0)+1):0!==b&&0==a[b-1][0]?(a[b-1][1]+=a[b][1],a.splice(b,1)):b++,c=d=0,f=e=""}""===a[a.length-1][1]&&a.pop();c=!1;for(b=1;b<a.length-1;)0==a[b-1][0]&&0==a[b+1][0]&&(a[b][1].substring(a[b][1].length-a[b-1][1].length)==a[b-1][1]?(a[b][1]=a[b-1][1]+a[b][1].substring(0,a[b][1].length-a[b-1][1].length),a[b+1][1]=a[b-1][1]+a[b+1][1],a.splice(b-1,1),c=!0):a[b][1].substring(0,
a[b+1][1].length)==a[b+1][1]&&(a[b-1][1]+=a[b+1][1],a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1],a.splice(b+1,1),c=!0)),b++;c&&this.diff_cleanupMerge(a)};diff_match_patch.prototype.diff_xIndex=function(a,b){var c=0,d=0,e=0,f=0,g;for(g=0;g<a.length;g++){1!==a[g][0]&&(c+=a[g][1].length);-1!==a[g][0]&&(d+=a[g][1].length);if(c>b)break;e=c;f=d}return a.length!=g&&-1===a[g][0]?f:f+(b-e)};
diff_match_patch.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g,g=0;g<a.length;g++){var h=a[g][0],j=a[g][1],j=j.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&para;<br>");switch(h){case 1:b[g]='<ins style="background:#e6ffe6;">'+j+"</ins>";break;case -1:b[g]='<del style="background:#ffe6e6;">'+j+"</del>";break;case 0:b[g]="<span>"+j+"</span>"}}return b.join("")};
diff_match_patch.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};diff_match_patch.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)-1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};diff_match_patch.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];switch(f){case 1:c+=g.length;break;case -1:d+=g.length;break;case 0:b+=Math.max(c,d),d=c=0}}return b+=Math.max(c,d)};
diff_match_patch.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case 1:b[c]="+"+encodeURI(a[c][1]);break;case -1:b[c]="-"+a[c][1].length;break;case 0:b[c]="="+a[c][1].length}return b.join("\t").replace(/%20/g," ")};
diff_match_patch.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\t/g),g=0;g<f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case "+":try{c[d++]=[1,decodeURI(h)]}catch(j){throw Error("Illegal escape in diff_fromDelta: "+h);}break;case "-":case "=":var i=parseInt(h,10);if(isNaN(i)||0>i)throw Error("Invalid number in diff_fromDelta: "+h);h=a.substring(e,e+=i);"="==f[g].charAt(0)?c[d++]=[0,h]:c[d++]=[-1,h];break;default:if(f[g])throw Error("Invalid diff operation in diff_fromDelta: "+
f[g]);}}if(e!=a.length)throw Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c};diff_match_patch.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error("Null input. (match_main)");c=Math.max(0,Math.min(c,a.length));return a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1};
diff_match_patch.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return!f.Match_Distance?g?1:e:e+g/f.Match_Distance}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(d(0,h),g)));for(var j=1<<b.length-1,h=-1,i,k,q=b.length+a.length,r,t=0;t<b.length;t++){i=0;for(k=q;i<k;)d(t,c+
k)<=g?i=k:q=k,k=Math.floor((q-i)/2+i);q=k;i=Math.max(1,c-k+1);var p=Math.min(c+k,a.length)+b.length;k=Array(p+2);for(k[p+1]=(1<<t)-1;p>=i;p--){var w=e[a.charAt(p-1)];k[p]=0===t?(k[p+1]<<1|1)&w:(k[p+1]<<1|1)&w|((r[p+1]|r[p])<<1|1)|r[p+1];if(k[p]&j&&(w=d(t,p-1),w<=g))if(g=w,h=p-1,h>c)i=Math.max(1,2*c-h);else break}if(d(t+1,c)>g)break;r=k}return h};
diff_match_patch.prototype.match_alphabet_=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b};
diff_match_patch.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift([0,c]);(d=b.substring(a.start2+a.length1,a.start2+a.length1+d))&&a.diffs.push([0,d]);a.start1-=c.length;a.start2-=c.length;a.length1+=
c.length+d.length;a.length2+=c.length+d.length}};
diff_match_patch.prototype.patch_make=function(a,b,c){var d;if("string"==typeof a&&"string"==typeof b&&"undefined"==typeof c)d=a,b=this.diff_main(d,b,!0),2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b));else if(a&&"object"==typeof a&&"undefined"==typeof b&&"undefined"==typeof c)b=a,d=this.diff_text1(b);else if("string"==typeof a&&b&&"object"==typeof b&&"undefined"==typeof c)d=a;else if("string"==typeof a&&"string"==typeof b&&c&&"object"==typeof c)d=a,b=c;else throw Error("Unknown call format to patch_make.");
if(0===b.length)return[];c=[];a=new diff_match_patch.patch_obj;for(var e=0,f=0,g=0,h=d,j=0;j<b.length;j++){var i=b[j][0],k=b[j][1];!e&&0!==i&&(a.start1=f,a.start2=g);switch(i){case 1:a.diffs[e++]=b[j];a.length2+=k.length;d=d.substring(0,g)+k+d.substring(g);break;case -1:a.length1+=k.length;a.diffs[e++]=b[j];d=d.substring(0,g)+d.substring(g+k.length);break;case 0:k.length<=2*this.Patch_Margin&&e&&b.length!=j+1?(a.diffs[e++]=b[j],a.length1+=k.length,a.length2+=k.length):k.length>=2*this.Patch_Margin&&
e&&(this.patch_addContext_(a,h),c.push(a),a=new diff_match_patch.patch_obj,e=0,h=d,f=g)}1!==i&&(f+=k.length);-1!==i&&(g+=k.length)}e&&(this.patch_addContext_(a,h),c.push(a));return c};diff_match_patch.prototype.patch_deepCopy=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=new diff_match_patch.patch_obj;e.diffs=[];for(var f=0;f<d.diffs.length;f++)e.diffs[f]=d.diffs[f].slice();e.start1=d.start1;e.start2=d.start2;e.length1=d.length1;e.length2=d.length2;b[c]=e}return b};
diff_match_patch.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c;this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g=a[f].start2+d,h=this.diff_text1(a[f].diffs),j,i=-1;if(h.length>this.Match_MaxBits){if(j=this.match_main(b,h.substring(0,this.Match_MaxBits),g),-1!=j&&(i=this.match_main(b,h.substring(h.length-this.Match_MaxBits),g+h.length-this.Match_MaxBits),-1==i||j>=i))j=-1}else j=this.match_main(b,h,g);
if(-1==j)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=j-g,g=-1==i?b.substring(j,j+h.length):b.substring(j,i+this.Match_MaxBits),h==g)b=b.substring(0,j)+this.diff_text2(a[f].diffs)+b.substring(j+h.length);else if(g=this.diff_main(h,g,!1),h.length>this.Match_MaxBits&&this.diff_levenshtein(g)/h.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(g);for(var h=0,k,i=0;i<a[f].diffs.length;i++){var q=a[f].diffs[i];0!==q[0]&&(k=this.diff_xIndex(g,h));1===q[0]?b=b.substring(0,
j+k)+q[1]+b.substring(j+k):-1===q[0]&&(b=b.substring(0,j+k)+b.substring(j+this.diff_xIndex(g,h+q[1].length)));-1!==q[0]&&(h+=q[1].length)}}}b=b.substring(c.length,b.length-c.length);return[b,e]};
diff_match_patch.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;d<=b;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;var d=a[0],e=d.diffs;if(0==e.length||0!=e[0][0])e.unshift([0,c]),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1];d.start1-=f;d.start2-=f;d.length1+=f;d.length2+=f}d=a[a.length-1];e=d.diffs;0==e.length||0!=e[e.length-1][0]?(e.push([0,
c]),d.length1+=b,d.length2+=b):b>e[e.length-1][1].length&&(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f);return c};
diff_match_patch.prototype.patch_splitMax=function(a){for(var b=this.Match_MaxBits,c=0;c<a.length;c++)if(!(a[c].length1<=b)){var d=a[c];a.splice(c--,1);for(var e=d.start1,f=d.start2,g="";0!==d.diffs.length;){var h=new diff_match_patch.patch_obj,j=!0;h.start1=e-g.length;h.start2=f-g.length;""!==g&&(h.length1=h.length2=g.length,h.diffs.push([0,g]));for(;0!==d.diffs.length&&h.length1<b-this.Patch_Margin;){var g=d.diffs[0][0],i=d.diffs[0][1];1===g?(h.length2+=i.length,f+=i.length,h.diffs.push(d.diffs.shift()),
j=!1):-1===g&&1==h.diffs.length&&0==h.diffs[0][0]&&i.length>2*b?(h.length1+=i.length,e+=i.length,j=!1,h.diffs.push([g,i]),d.diffs.shift()):(i=i.substring(0,b-h.length1-this.Patch_Margin),h.length1+=i.length,e+=i.length,0===g?(h.length2+=i.length,f+=i.length):j=!1,h.diffs.push([g,i]),i==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(i.length))}g=this.diff_text2(h.diffs);g=g.substring(g.length-this.Patch_Margin);i=this.diff_text1(d.diffs).substring(0,this.Patch_Margin);""!==i&&
(h.length1+=i.length,h.length2+=i.length,0!==h.diffs.length&&0===h.diffs[h.diffs.length-1][0]?h.diffs[h.diffs.length-1][1]+=i:h.diffs.push([0,i]));j||a.splice(++c,0,h)}}};diff_match_patch.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")};
diff_match_patch.prototype.patch_fromText=function(a){var b=[];if(!a)return b;a=a.split("\n");for(var c=0,d=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<a.length;){var e=a[c].match(d);if(!e)throw Error("Invalid patch string: "+a[c]);var f=new diff_match_patch.patch_obj;b.push(f);f.start1=parseInt(e[1],10);""===e[2]?(f.start1--,f.length1=1):"0"==e[2]?f.length1=0:(f.start1--,f.length1=parseInt(e[2],10));f.start2=parseInt(e[3],10);""===e[4]?(f.start2--,f.length2=1):"0"==e[4]?f.length2=0:(f.start2--,f.length2=
parseInt(e[4],10));for(c++;c<a.length;){e=a[c].charAt(0);try{var g=decodeURI(a[c].substring(1))}catch(h){throw Error("Illegal escape in patch_fromText: "+g);}if("-"==e)f.diffs.push([-1,g]);else if("+"==e)f.diffs.push([1,g]);else if(" "==e)f.diffs.push([0,g]);else if("@"==e)break;else if(""!==e)throw Error('Invalid patch mode "'+e+'" in: '+g);c++}}return b};diff_match_patch.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};
diff_match_patch.patch_obj.prototype.toString=function(){var a,b;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;a=["@@ -"+a+" +"+b+" @@\n"];var c;for(b=0;b<this.diffs.length;b++){switch(this.diffs[b][0]){case 1:c="+";break;case -1:c="-";break;case 0:c=" "}a[b+1]=c+encodeURI(this.diffs[b][1])+"\n"}return a.join("").replace(/%20/g," ")};
this.diff_match_patch=diff_match_patch;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0;})()
;/*!
 * jQuery Expander Plugin v1.4.5
 *
 * Date: Mon Jan 14 14:44:48 2013 EST
 * Requires: jQuery v1.3+
 *
 * Copyright 2013, Karl Swedberg
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 *
 *
 *
 *
*/
(function(c){c.expander={version:"1.4.5",defaults:{slicePoint:100,preserveWords:true,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:false,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:true,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}};
c.fn.expander=function(l){function I(a,d){var e="span",h=a.summary;if(d){e="div";if(x.test(h)&&!a.expandAfterSummary)h=h.replace(x,a.moreLabel+"$1");else h+=a.moreLabel;h='<div class="'+a.summaryClass+'">'+h+"</div>"}else h+=a.moreLabel;return[h,"<",e+' class="'+a.detailClass+'"',">",a.details,"</"+e+">"].join("")}function J(a){var d='<span class="'+a.moreClass+'">'+a.expandPrefix;d+='<a href="#">'+a.expandText+"</a></span>";return d}function y(a,d){if(a.lastIndexOf("<")>a.lastIndexOf(">"))a=a.slice(0,
a.lastIndexOf("<"));if(d)a=a.replace(K,"");return c.trim(a)}function z(a,d){d.stop(true,true)[a.collapseEffect](a.collapseSpeed,function(){d.prev("span."+a.moreClass).show().length||d.parent().children("div."+a.summaryClass).show().find("span."+a.moreClass).show();a.afterCollapse&&a.afterCollapse.call(d)})}function L(a,d,e){if(a.collapseTimer)A=setTimeout(function(){z(a,d);c.isFunction(a.onCollapse)&&a.onCollapse.call(e,false)},a.collapseTimer)}var u="init";if(typeof l=="string"){u=l;l={}}var v=c.extend({},
c.expander.defaults,l),M=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,K=v.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,B=/<\/?(\w+)[^>]*>/g,C=/<(\w+)[^>]*>/g,D=/<\/(\w+)>/g,x=/(<\/[^>]+>)\s*$/,N=/^(<[^>]+>)+.?/,A;l={init:function(){this.each(function(){var a,d,e,h,m,i,n,o,w,E=[],s=[],q={},r=this,f=c(this),F=c([]),b=c.extend({},v,f.data("expander")||c.meta&&f.data()||{});i=!!f.find("."+b.detailClass).length;n=!!f.find("*").filter(function(){return/^block|table|list/.test(c(this).css("display"))}).length;
var t=(n?"div":"span")+"."+b.detailClass;a=b.moreClass+"";d=b.lessClass+"";var O=b.expandSpeed||0,p=c.trim(f.html());c.trim(f.text());var g=p.slice(0,b.slicePoint);b.moreSelector="span."+a.split(" ").join(".");b.lessSelector="span."+d.split(" ").join(".");if(!c.data(this,"expanderInit")){c.data(this,"expanderInit",true);c.data(this,"expander",b);c.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(j,k){q[k]=c.isFunction(b[k])});g=y(g);for(d=g.replace(B,"").length;d<
b.slicePoint;){a=p.charAt(g.length);if(a=="<")a=p.slice(g.length).match(N)[0];g+=a;d++}g=y(g,b.preserveWords);h=g.match(C)||[];m=g.match(D)||[];e=[];c.each(h,function(j,k){M.test(k)||e.push(k)});h=e;d=m.length;for(a=0;a<d;a++)m[a]=m[a].replace(D,"$1");c.each(h,function(j,k){var G=k.replace(C,"$1"),H=c.inArray(G,m);if(H===-1){E.push(k);s.push("</"+G+">")}else m.splice(H,1)});s.reverse();if(i){i=f.find(t).remove().html();g=f.html();p=g+i;a=""}else{i=p.slice(g.length);a=c.trim(i.replace(B,""));if(a===
""||a.split(/\s+/).length<b.widow)return;a=s.pop()||"";g+=s.join("");i=E.join("")+i}b.moreLabel=f.find(b.moreSelector).length?"":J(b);if(n)i=p;g+=a;b.summary=g;b.details=i;b.lastCloseTag=a;if(q.onSlice)b=(e=b.onSlice.call(r,b))&&e.details?e:b;n=I(b,n);f.html(n);o=f.find(t);w=f.find(b.moreSelector);b.collapseEffect==="slideUp"&&b.expandEffect!=="slideDown"||f.is(":hidden")?o.css({display:"none"}):o[b.collapseEffect](0);F=f.find("div."+b.summaryClass);w.find("a").unbind("click.expander").bind("click.expander",
function(j){j.preventDefault();w.hide();F.hide();q.beforeExpand&&b.beforeExpand.call(r);o.stop(false,true)[b.expandEffect](O,function(){o.css({zoom:""});q.afterExpand&&b.afterExpand.call(r);L(b,o,r)})});b.userCollapse&&!f.find(b.lessSelector).length&&f.find(t).append('<span class="'+b.lessClass+'">'+b.userCollapsePrefix+'<a href="#">'+b.userCollapseText+"</a></span>");f.find(b.lessSelector+" a").unbind("click.expander").bind("click.expander",function(j){j.preventDefault();clearTimeout(A);j=c(this).closest(t);
z(b,j);q.onCollapse&&b.onCollapse.call(r,true)})}})},destroy:function(){this.each(function(){var a,d,e=c(this);if(e.data("expanderInit")){a=c.extend({},e.data("expander")||{},v);d=e.find("."+a.detailClass).contents();e.removeData("expanderInit");e.removeData("expander");e.find(a.moreSelector).remove();e.find("."+a.summaryClass).remove();e.find("."+a.detailClass).after(d).remove();e.find(a.lessSelector).remove()}})}};l[u]&&l[u].call(this);return this};c.fn.expander.defaults=c.expander.defaults})(jQuery);
/*
 MIT License - http://www.opensource.org/licenses/mit-license.php

 For usage and examples, visit:
 http://timeago.yarp.com/

 Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){function k(){var a;a=d(this);if(!a.data("timeago")){a.data("timeago",{datetime:e.datetime(a)});var b=d.trim(a.text());e.settings.localeTitle?a.attr("title",a.data("timeago").datetime.toLocaleString()):0<b.length&&(!e.isTime(a)||!a.attr("title"))&&a.attr("title",b)}a=a.data("timeago");isNaN(a.datetime)||d(this).text(f(a.datetime));return this}function f(a){return e.inWords((new Date).getTime()-a.getTime())}
d.timeago=function(a){return a instanceof Date?f(a):"string"===typeof a?f(d.timeago.parse(a)):"number"===typeof a?f(new Date(a)):f(d.timeago.datetime(a))};var e=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:6E4,allowFuture:!1,localeTitle:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",
year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(a){function b(b,e){return(d.isFunction(b)?b(e,a):b).replace(/%d/i,c.numbers&&c.numbers[e]||e)}var c=this.settings.strings,e=c.prefixAgo,f=c.suffixAgo;this.settings.allowFuture&&0>a&&(e=c.prefixFromNow,f=c.suffixFromNow);var h=Math.abs(a)/1E3,g=h/60,l=g/60,j=l/24,k=j/365,h=45>h&&b(c.seconds,Math.round(h))||90>h&&b(c.minute,1)||45>g&&b(c.minutes,Math.round(g))||90>g&&b(c.hour,1)||24>l&&b(c.hours,Math.round(l))||42>
l&&b(c.day,1)||30>j&&b(c.days,Math.round(j))||45>j&&b(c.month,1)||365>j&&b(c.months,Math.round(j/30))||1.5>k&&b(c.year,1)||b(c.years,Math.round(k)),g=c.wordSeparator||"";void 0===c.wordSeparator&&(g=" ");return d.trim([e,h,f].join(g))},parse:function(a){a=d.trim(a);a=a.replace(/\.\d+/,"");a=a.replace(/-/,"/").replace(/-/,"/");a=a.replace(/T/," ").replace(/Z/," UTC");a=a.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(a)},datetime:function(a){a=e.isTime(a)?d(a).attr("datetime"):d(a).attr("title");
return e.parse(a)},isTime:function(a){return"time"===d(a).get(0).tagName.toLowerCase()}});var m={init:function(){var a=d.proxy(k,this);a();var b=e.settings;0<b.refreshMillis&&setInterval(a,b.refreshMillis)},update:function(a){d(this).data("timeago",{datetime:e.parse(a)});k.apply(this)}};d.fn.timeago=function(a,b){var c=a?m[a]:m.init;if(!c)throw Error("Unknown function name '"+a+"' for timeago");this.each(function(){c.call(this,b)});return this};document.createElement("abbr");document.createElement("time")});
(function(W,G,m){function X(b,a){a&&a.onError&&!1===a.onError(b)||(this.name="JsRender Error",this.message=b||"JsRender error")}function E(b,a){var d;b=b||{};for(d in a)b[d]=a[d];return b}function ca(b,a,d){if(!S.rTag||arguments.length)N=b?b.charAt(0):N,O=b?b.charAt(1):O,F=a?a.charAt(0):F,K=a?a.charAt(1):K,T=d||T,b="\\"+N+"(\\"+T+")?\\"+O,a="\\"+F+"\\"+K,L="(?:(?:(\\w+(?\x3d[\\/\\s\\"+F+"]))|(?:(\\w+)?(:)|(\x3e)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+F+"]|\\"+F+"(?!\\"+K+"))*?)",S.rTag=L+")",
L=RegExp(b+L+"(\\/)?|(?:\\/(\\w+)))"+a,"g"),da=RegExp("\x3c.*\x3e|([^\\\\]|^)[{}]|"+b+".*"+a);return[N,O,F,K,T]}function na(b,a){a||(a=b,b=m);var d,f,c,e;c=this;d=!a||"root"===a;if(b){if(e=c.type===a?c:m,!e)if(d=c.views,c._.useKey)for(f in d){if(e=d[f].get(b,a))break}else{f=0;for(c=d.length;!e&&f<c;f++)e=d[f].get(b,a)}}else if(d)for(;c.parent.parent;)e=c=c.parent;else for(;c&&!e;)e=c.type===a?c:m,c=c.parent;return e}function ea(){var b=this.get("item");return b?b.index:m}function oa(b){var a,d=this,
f=(d.ctx||{})[b];if((f=f===m?d.getRsc("helpers",b):f)&&"function"===typeof f)a=function(){return f.apply(d,arguments)},E(a,f);return a||f}function pa(b,a,d){var f,c,e,j=+d===d&&d,g=a.linkCtx;j&&(d=(j=a.tmpl.bnds[j-1])(a.data,a,r));e=d.args[0];if(b||j){c=g&&g.tag||{_:{inline:!g},tagName:b+":",flow:!0,_is:"tag"};c._.bnd=j;g&&(g.tag=c,c.linkCtx=g,d.ctx=H(d.ctx,g.view.ctx));c.tagCtx=d;d.view=a;c.ctx=d.ctx||{};delete d.ctx;a._.tag=c;if((b="true"!==b&&b)&&((f=a.getRsc("converters",b))||P("Unknown converter: {{"+
b+":")))c.depends=f.depends,e=f.apply(c,d.args);e=j&&a._.onRender?a._.onRender(e,a,j):e;a._.tag=m}return e}function qa(b,a){var d,f=this;for(d=(d=r[b])&&d[a];d===m&&f;)d=(d=f.tmpl[b])&&d[a],f=f.parent;return d}function ra(b,a,d,f){var c,e,j,g,h,k,w,D,l,z,n,p="",y=+f===f&&f,v=a.linkCtx||0,u=a.ctx,x=d||a.tmpl,t=a._;"tag"===b._is&&(c=b,b=c.tagName);y&&(f=(l=x.bnds[y-1])(a.data,a,r));k=f.length;c=c||v.tag;for(h=0;h<k;h++){e=f[h];D=e.tmpl;D=e.content=D&&x.tmpls[D-1];d=e.props.tmpl;if(!h&&(!d||!c))z=a.getRsc("tags",
b)||P("Unknown tag: {{"+b+"}}");d=d||(c?c._def:z).template||D;d=""+d===d?a.getRsc("templates",d)||A(d):d;E(e,{tmpl:d,render:Y,index:h,view:a,ctx:H(e.ctx,u)});if(!c){z._ctr?(c=new z._ctr,n=!!c.init,c.attr=c.attr||z.attr||m):c={render:z.render};c._={inline:!v};v&&(v.attr=c.attr=v.attr||c.attr,v.tag=c,c.linkCtx=v);if(c._.bnd=l||v)c._.arrVws={};c.tagName=b;c.parent=g=u&&u.tag;c._is="tag";c._def=z}t.tag=c;e.tag=c;c.tagCtxs=f;c.flow||(d=e.ctx=e.ctx||{},e=c.parents=d.parentTags=u&&H(d.parentTags,u.parentTags)||
{},g&&(e[g.tagName]=g),d.tag=c)}c.rendering={};for(h=0;h<k;h++){e=c.tagCtx=f[h];c.ctx=e.ctx;!h&&n&&(c.init(e,v,c.ctx),n=m);if(b=c.render)w=b.apply(c,e.args);p+=w!==m?w:e.tmpl?e.render():""}delete c.rendering;c.tagCtx=c.tagCtxs[0];c.ctx=c.tagCtx.ctx;if(c._.inline&&(j=c.attr)&&"html"!==j)p="text"===j?fa.html(p):"";return y&&a._.onRender?a._.onRender(p,a,y):p}function U(b,a,d,f,c,e,j,g){var h="array"===a;g={key:0,useKey:h?0:1,id:""+sa++,onRender:g,bnds:{}};a={data:f,tmpl:c,content:j,views:h?[]:{},parent:d,
ctx:b,type:a,get:na,getIndex:ea,getRsc:qa,hlp:oa,_:g,_is:"view"};d&&(f=d.views,c=d._,c.useKey?(f[g.key="_"+c.useKey++]=a,e=c.tag,g.bnd=h&&(!e||!!e._.bnd&&e)):f.splice(g.key=a.index=e!==m?e:f.length,0,a),a.ctx=b||d.ctx);return a}function ta(b,a,d){if("function"===typeof a)a={depends:a.depends,render:a};else{if(b=a.template)a.template=""+b===b?A[b]||A(b):b;!1!==a.init&&(b=a._ctr=function(){},(b.prototype=a).constructor=b)}d&&(a._parentTmpl=d);return a}function ga(b,a,d,f,c,e){function j(a){if(""+a===
a||0<a.nodeType){try{h=0<a.nodeType?a:!da.test(a)&&G&&G(W.document).find(a)[0]}catch(g){}h&&(a=h.getAttribute(ha),b=b||a,a=A[a],a||(b=b||"_"+ua++,h.setAttribute(ha,b),a=A[b]=ga(b,h.innerHTML,d,f,c,e)));return a}}var g,h;a=a||"";g=j(a);e=e||(a.markup?a:{});e.tmplName=b;d&&(e._parentTmpl=d);if(!g&&a.markup&&(g=j(a.markup)))if(g.fn&&(g.debug!==a.debug||g.allowCode!==a.allowCode))g=g.markup;if(g!==m){b&&!d&&(Z[b]=function(){return a.render.apply(a,arguments)});g.fn||a.fn?g.fn&&(a=b&&b!==g.tmplName?H(e,
g):g):(a=ia(g,e),$(g,a));g=e;var k,w,D,l,z;for(k in Q)if(l=Q[k],(z=l.compile)&&(w=g[k+"s"]))for(D in w)w[D]=z(D,w[D],g,k,l);return a}}function ia(b,a){var d,f=V.wrapMap||{},c=E({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:Y},a);a.htmlTag||(d=va.exec(b),c.htmlTag=d?d[1].toLowerCase():"");if((d=f[c.htmlTag])&&d!==f.div)c.markup=t.trim(c.markup),c._elCnt=!0;return c}function wa(b,a){function d(c,e,j){var g,h,k;if(c&&""+c!==c&&!c.nodeType&&!c.markup){for(g in c)d(g,c[g],e);return r}e===
m&&(e=c,c=m);c&&""+c!==c&&(j=e,e=c,c=m);k=j?j[f]=j[f]||{}:d;h=a.compile;if(g=S.onBeforeStoreItem)h=g(k,c,e,h)||h;c?null===e?delete k[c]:k[c]=h?e=h(c,e,j,b,a):e:e=h(m,e);e&&(e._is=b);(g=S.onStoreItem)&&g(k,c,e,h);return e}var f=b+"s";r[f]=d;Q[b]=a}function Y(b,a,d,f,c,e){var j,g,h,k,w,D,l;g=this;var z=!g.attr||"html"===g.attr,n="";!0===f&&(h=!0,f=0);g.tag?(k=g,g=g.tag,j=g._,D=g.tagName,l=k.tmpl,a=H(a,g.ctx),w=k.content,!1===k.props.link&&(a=a||{},a.link=!1),d=d||k.view,b=b===m?d:b):l=g.jquery&&(g[0]||
P('Unknown template: "'+g.selector+'"'))||g;if(l){!d&&(b&&"view"===b._is)&&(d=b);d&&(w=w||d.content,e=e||d._.onRender,b===d&&(b=d.data,c=!0),a=H(a,d.ctx));if(!d||d.data===m)(a=a||{}).root=b;l.fn||(l=A[l]||A(l));if(l){k=e=!1!==(a&&a.link)&&z&&e;!0===e&&(k=m,e=d._.onRender);if(t.isArray(b)&&!c){d=h?d:f!==m&&d||U(a,"array",d,b,l,f,w,e);j=0;for(g=b.length;j<g;j++)h=b[j],c=U(a,"item",d,h,l,(f||0)+j,w,e),h=l.fn(h,c,r),n+=d._.onRender?d._.onRender(h,c):h}else d=h?d:U(a,D||"data",d,b,l,f,w,e),j&&!g.flow&&
(d.tag=g),n+=l.fn(b,d,r);return k?k(n,d):n}}return""}function P(b){throw new r.sub.Error(b);}function M(b){P("Syntax error\n"+b)}function $(b,a,d,f){function c(a){(a-=k)&&m.push(b.substr(k,a).replace(aa,"\\n"))}function e(a){a&&M('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+b)}var j,g=a&&a.allowCode,h=[],k=0,w=[],m=h,l=[,,,h];b=b.replace(xa,"\\$\x26");e(w[0]&&w[0][3].pop()[0]);b.replace(L,function(h,n,p,y,v,u,x,r,t,I,C,B){u&&(v=":",y="html");I=I||d;n=n&&[];var s=u="",q="";x=!I&&!v&&!x;
p=p||v;c(B);k=B+h.length;r?g&&m.push(["*","\n"+t.replace(ya,"$1")+"\n"]):p?("else"===p&&(za.test(t)&&M('for "{{else if expr}}" use "{{else expr}}"'),n=l[6],l[7]=b.substring(l[7],B),l=w.pop(),m=l[3],x=!0),t&&(t=t.replace(aa," "),u=ba(t,n,a).replace(Aa,function(a,b,c){b?q+=c+",":s+=c+",";return""})),s=s.slice(0,-1),u=u.slice(0,-1),B=s&&s.indexOf("noerror:true")+1&&s||"",j=[p,y||!!f||"",u,x&&[],'params:"'+t+'",props:{'+s+"}"+(q?",ctx:{"+q.slice(0,-1)+"}":""),B,n||0],m.push(j),x&&(w.push(l),l=j,l[7]=
k)):C&&(p=l[0],e(C!==p&&"else"!==p&&C),l[7]=b.substring(l[7],B),l=w.pop());e(!l&&C);m=l[3]});c(b.length);(k=h[h.length-1])&&e(""+k!==k&&+k[7]===k[7]&&k[0]);return ja(h,d?b:a,d)}function ja(b,a,d){var f,c,e,j,g,h,k,m,t,l,z,n,p,y,v,u,x,r,F,I,C,B,s=0,q="",A="",J={},E=b.length;""+a===a?(v=d?'data-link\x3d"'+a.replace(aa," ").slice(1,-1)+'"':a,a=0):(v=a.tmplName||"unnamed",a.allowCode&&(J.allowCode=!0),a.debug&&(J.debug=!0),n=a.bnds,y=a.tmpls);for(f=0;f<E;f++)if(c=b[f],""+c===c)q+='\nret+\x3d"'+c+'";';
else if(e=c[0],"*"===e)q+=""+c[1];else{j=c[1];g=c[2];r=c[3];h=c[4];A=c[5];F=c[7];if(!(C="else"===e))if(s=0,n&&(p=c[6]))s=n.push(p);(c=":"===e)?(j&&(e="html"===j?"\x3e":j+e),A&&(C="prm"+f,A="try{var "+C+"\x3d["+g+"][0];}catch(e){"+C+'\x3d"";}\n',g=C)):(r&&(u=ia(F,J),u.tmplName=v+"/"+e,ja(r,u),y.push(u)),C||(x=e,I=q,q=""),u=(u=b[f+1])&&"else"===u[0]);h+=",args:["+g+"]}";if(c&&p||j&&"\x3e"!==e){B=new Function("data,view,j,u"," // "+v+" "+s+" "+e+"\n"+A+"return {"+h+";");B.paths=p;B._ctxs=e;if(d)return B;
z=1}q+=c?"\n"+(p?"":A)+(d?"return ":"ret+\x3d")+(z?(z=0,l=!0,'c("'+j+'",view,'+(p?(n[s-1]=B,s):"{"+h)+");"):"\x3e"===e?(m=!0,"h("+g+");"):(t=!0,"(v\x3d"+g+")!\x3d"+(d?"\x3d":"")+'u?v:"";')):(k=!0,"{tmpl:"+(r?y.length:"0")+","+h+",");if(x&&!u){q="["+q.slice(0,-1)+"]";if(d||p)if(q=new Function("data,view,j,u"," // "+v+" "+s+" "+x+"\nreturn "+q+";"),p&&((n[s-1]=q).paths=p),q._ctxs=e,d)return q;q=I+'\nret+\x3dt("'+x+'",view,this,'+(s||q)+");";x=p=0}}q="// "+v+"\nvar j\x3dj||"+(G?"jQuery.":"js")+"views"+
(t?",v":"")+(k?",t\x3dj._tag":"")+(l?",c\x3dj._cnvt":"")+(m?",h\x3dj.converters.html":"")+(d?";\n":',ret\x3d"";\n')+(V.tryCatch?"try{\n":"")+(J.debug?"debugger;":"")+q+(d?"\n":"\nreturn ret;\n")+(V.tryCatch?"\n}catch(e){return j._err(e);}":"");try{q=new Function("data,view,j,u",q)}catch(K){M("Compiled template code:\n\n"+q,K)}a&&(a.fn=q);return q}function ba(b,a,d){var f,c,e=d.links,j={},g={"0":-1},h=0,k=!1,m=!1;return(b+" ").replace(Ba,function(t,l,r,n,p,y,v,u,x,A,E,I,C,B,s,q,G,J,H){function L(b,
d,e,f,g,h,j){return d&&(a&&!c&&a.push(n),"."!==d)?(b=(e?'view.hlp("'+e+'")':f?"view":"data")+(j?(g?"."+g:e?"":f?"":"."+d)+(h||""):(j=e?"":f?g||"":d,"")),b+=j?"."+j:"","view.data"===b.slice(0,9)?b.slice(5):b):b}p=p||"";r=r||l||E;n=n||u;x=x||q||"";if(y)M(b);else return a&&s&&(y=g[h],H.length-2>J-y&&(y=H.slice(y,J+1),s=O+":"+y+F,s=e[s]=e[s]||$(N+s+K,d,!0),s.paths||ba(y,s.paths=[],d),a.push({_jsvOb:s}))),m?(m=!I,m?t:'"'):k?(k=!C,k?t:'"'):(r?(h++,g[h]=J++,r):"")+(G?h?"":f?(f=c=!1,"\b"):",":v?(h&&M(b),
f=n,c="~"===n.charAt(0),"\b"+n+":"):n?n.split("^").join(".").replace(Ca,L)+(x?(j[++h]=!0,"."!==n.charAt(0)&&(g[h]=J),x):p):p?p:B?(j[h--]=!1,B)+(x?(j[++h]=!0,x):""):A?(j[h]||M(b),","):l?"":(m=I,k=C,'"'))})}function H(b,a){return b&&b!==a?a?E(E({},a),b):b:a&&E({},a)}function ka(b){return la[b]||(la[b]="\x26#"+b.charCodeAt(0)+";")}if(!(G&&G.views||W.jsviews)){var t,R,L,da,N="{",O="{",F="}",K="}",T="^",Ca=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,
Ba=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,aa=/\s*\n/g,ya=/\\(['"])/g,xa=/['"\\]/g,Aa=/\x08(~)?([^\x08]+)\x08/g,za=/^if\s/,va=/<(\w+)[>\s]/,ma=/[\x00`><"'&]/g,ua=0,sa=0,la={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x00":"\x26#0;","'":"\x26#39;",'"':"\x26#34;","`":"\x26#96;"},ha="data-jsv-tmpl",Z={},Q={template:{compile:ga},
tag:{compile:ta},helper:{},converter:{}},r={jsviews:"v1.0.0-beta",render:Z,settings:{delimiters:ca,debugMode:!0,tryCatch:!0},sub:{View:U,Error:X,tmplFn:$,parse:ba,extend:E,error:P,syntaxError:M},_cnvt:pa,_tag:ra,_err:function(b){return V.debugMode?"Error: "+(b.message||b)+". ":""}};(X.prototype=Error()).constructor=X;ea.depends=function(){return[this.get("item"),"index"]};for(R in Q)wa(R,Q[R]);var A=r.templates,fa=r.converters;R=r.tags;var S=r.sub,V=r.settings;G?(t=G,t.fn.render=Y):(t=W.jsviews={},
t.isArray=Array&&Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)});t.render=Z;t.views=r;t.templates=A=r.templates;R({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render())},onUpdate:function(b,a,d){var f;for(b=0;(f=this.tagCtxs[b])&&f.args.length;b++)if(f=f.args[0],a=!f!==!d[b].args[0],f||a)return a;return!1},flow:!0},"for":{render:function(b){var a=
this.tagCtx,d=!arguments.length,f="",c=d||0;if(!this.rendering.done&&(d?f=m:b!==m&&(f+=a.render(b),c+=t.isArray(b)?b.length:1),this.rendering.done=c))this.selected=a.index;return f},onArrayChange:function(b,a){var d,f=a.change;if(this.tagCtxs[1]&&("insert"===f&&b.target.length===a.items.length||"remove"===f&&!b.target.length||"refresh"===f&&!a.oldItems.length!==!b.target.length))this.refresh();else for(d in this._.arrVws)d=this._.arrVws[d],d.data===b.target&&d._.onArrayChange.apply(d,arguments);b.done=
!0},flow:!0},include:{flow:!0},"*":{render:function(b){return b},flow:!0}});fa({html:function(b){return b!=m?String(b).replace(ma,ka):""},attr:function(b){return b!=m?String(b).replace(ma,ka):null===b?null:""},url:function(b){return b!=m?encodeURI(String(b)):null===b?null:""}});ca()}})(this,this.jQuery);
!function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function S(a){function d(e){var b=e.charCodeAt(0);if(b!==92)return b;var a=e.charAt(1);return(b=r[a])?b:"0"<=a&&a<="7"?parseInt(e.substring(1),8):a==="u"||a==="x"?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){if(e<32)return(e<16?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);return e==="\\"||e==="-"||e==="]"||e==="^"?"\\"+e:e}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],a=
b[0]==="^",c=["["];a&&c.push("^");for(var a=a?1:0,f=b.length;a<f;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var h=d(h),l;a+2<f&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h;e.push([h,l]);l<65||h>122||(l<65||h>90||e.push([Math.max(65,h)|32,Math.min(l,90)|32]),l<97||h>122||e.push([Math.max(97,h)&-33,Math.min(l,122)&-33]))}}e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]});b=[];f=[];for(a=0;a<e.length;++a)h=e[a],h[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),
h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));c.push("]");return c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;f<c;++f){var l=a[f];l==="("?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(l<=h?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;f<c;++f)l=a[f],l==="("?(++h,d[h]||(a[f]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=h&&
(a[f]="\\"+d[l]);for(f=0;f<c;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;f<c;++f)l=a[f],e=l.charAt(0),l.length>=2&&e==="["?a[f]=b(l):e!=="\\"&&(a[f]=l.replace(/[A-Za-z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;k<c;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0;j=!1;break}}for(var r={b:8,t:9,n:10,v:11,
f:12,r:13},n=[],k=0,c=a.length;k<c;++k){i=a[k];if(i.global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}function T(a,d){function g(a){var c=a.nodeType;if(c==1){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);c=a.nodeName.toLowerCase();if("br"===c||"li"===c)s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a}}else if(c==3||c==4)c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=
a)}var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;g(a);return{a:s.join("").replace(/\n$/,""),d:m}}function H(a,d,g,b){d&&(a={a:d,e:a},g(a),b.push.apply(b,a.g))}function U(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling)var b=g.nodeType,d=b===1?d?a:g:b===3?V.test(g.nodeValue)?a:d:d;return d===a?void 0:d}function C(a,d){function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;n<e;++n){var z=i[n],w=r[z],t=void 0,f;if(typeof w==="string")f=!1;else{var h=b[z.charAt(0)];
if(h)t=z.match(h[1]),w=h[0];else{for(f=0;f<x;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}if((f=w.length>=5&&"lang-"===w.substring(0,5))&&!(t&&typeof t[1]==="string"))f=!1,w="src";f||(r[z]=w)}h=c;c+=z.length;if(f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(B=z.length-t[2].length,l=B-f.length);w=w.substring(5);H(j+h,z.substring(0,l),g,k);H(j+h+l,f,I(w,f),k);H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}var b={},s;(function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;c<i;++c){var r=
g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;r=r[1];n=""+r;k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/);s=S(j)})();var x=d.length;return g}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,
q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",
/^#[^\n\r]*/,q,"#"]));a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));if(b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+
s+")*(?:\\x5D|$))+/")+")")])}(b=a.types)&&g.push(["typ",b]);b=(""+a.keywords).replace(/^ | $/g,"");b.length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]);d.push(["pln",/^\s+/,q," \r\n\t\u00a0"]);b="^.[^\\s\\w.$@'\"`/\\\\]*";a.regexLiterals&&(b+="(?!s*/)");g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,
q],["pun",RegExp(b),q]);return C(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(c==1&&!x.test(a.className))if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a);else if((c==3||c==4)&&g){var d=a.nodeValue,i=d.match(m);if(i)c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a)}}function s(a){function b(a,c){var d=
c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var a=b(a.nextSibling,0),d;(d=a.parentNode)&&d.nodeType===1;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(d|0)&&c[0].setAttribute("value",d);var r=j.createElement("ol");
r.className="linenums";for(var d=Math.max(0,d-1|0)||0,i=0,n=c.length;i<n;++i)k=c[i],k.className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode("\u00a0")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?D.console&&console.warn("cannot override language handler %s",b):F[b]=a}}function I(a,d){if(!a||!F.hasOwnProperty(a))a=/^\s*</.test(d)?"default-markup":"default-code";return F[a]}function K(a){var d=a.h;try{var g=T(a.c,a.i),b=g.a;
a.a=b;a.d=g.d;a.e=0;I(d,b)(a);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,d=/\n/g,x=a.a,m=x.length,g=0,j=a.d,k=j.length,b=0,c=a.g,i=c.length,r=0;c[i]=m;var n,e;for(e=n=0;e<i;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;i=n;for(e=n=0;e<i;){for(var p=c[e],w=c[e+1],t=e+2;t+2<=i&&c[t+1]===w;)t+=2;c[n++]=p;c[n++]=w;e=t}c.length=n;var f=a.c,h;if(f)h=f.style.display,f.style.display="none";try{for(;b<k;){var l=j[b+2]||m,B=c[r+2]||m,t=Math.min(l,B),A=j[b+1],G;if(A.nodeType!==1&&(G=x.substring(g,
t))){s&&(G=G.replace(d,"\r"));A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A);o.appendChild(A);g<l&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}g=t;g>=l&&(b+=2);g>=B&&(r+=2)}}finally{if(f)f.style.display=h}}catch(u){D.console&&console.log(u&&u.stack||u)}}var D=window,y=["break,continue,do,else,for,if,return,while"],E=[[y,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],
"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[E,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],N=[E,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],
O=[N,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],E=[E,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],P=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],
Q=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],R=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,
V=/\S/,X=v({keywords:[M,O,E,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",P,Q,y],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]);p(C([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",
/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);p(C([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],
["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);p(C([],[["atv",/^[\S\s]+/]]),["uq.val"]);p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:R}),["c","cc","cpp","cxx","cyc","m"]);p(v({keywords:"null,true,false"}),["json"]);p(v({keywords:O,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:R}),
["cs"]);p(v({keywords:N,cStyleComments:!0}),["java"]);p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]);p(v({keywords:P,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]);p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]);p(v({keywords:Q,
hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]);p(v({keywords:E,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]);p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]);
p(C([],[["str",/^[\S\s]+/]]),["regex"]);var Y=D.PR={createSimpleLexer:C,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:D.prettyPrintOne=function(a,d,g){var b=document.createElement("div");b.innerHTML="<pre>"+a+"</pre>";b=b.firstChild;g&&J(b,g,!0);K({h:d,j:g,c:b,i:1});
return b.innerHTML},prettyPrint:D.prettyPrint=function(a,d){function g(){for(var b=D.PR_SHOULD_USE_CONTINUATION?c.now()+250:Infinity;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){var m=k.nodeType,o=(m===7||m===8)&&k.nodeValue;if(o?!/^\??prettify\b/.test(o):m!==3||/\S/.test(k.nodeValue))break;if(o){j={};o.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}k=d.className;if((j!==h||e.test(k))&&!v.test(k)){m=!1;for(o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&
o.className&&e.test(o.className)){m=!0;break}if(!m){d.className+=" prettyprinted";m=j.lang;if(!m){var m=k.match(n),y;if(!m&&(y=U(d))&&t.test(y.tagName))m=y.className.match(n);m&&(m=m[1])}if(w.test(d.tagName))o=1;else var o=d.currentStyle,u=s.defaultView,o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3);u=j.linenums;if(!(u=u==="true"||+u))u=(u=k.match(/\blinenums\b(?::(\d+))?/))?u[1]&&u[1].length?+u[1]:!0:!1;u&&J(d,u,o);r=
{h:m,c:d,j:u,i:o};K(r)}}}i<p.length?setTimeout(g,250):"function"===typeof a&&a()}for(var b=d||document.body,s=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;j<k;++j)p.push(b[m][j]);var b=q,c=Date;c.now||(c={now:function(){return+new Date}});var i=0,r,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,
h={};g()}};typeof define==="function"&&define.amd&&define("google-code-prettify",[],function(){return Y})})();}()
;/**
 * @preserve jed.js https://github.com/SlexAxton/Jed
 */
/*
-----------
A gettext compatible i18n library for modern JavaScript Applications

by Alex Sexton - AlexSexton [at] gmail - @SlexAxton
WTFPL license for use
Dojo CLA for contributions

Jed offers the entire applicable GNU gettext spec'd set of
functions, but also offers some nicer wrappers around them.
The api for gettext was written for a language with no function
overloading, so Jed allows a little more of that.

Many thanks to Joshua I. Miller - unrtst@cpan.org - who wrote
gettext.js back in 2008. I was able to vet a lot of my ideas
against his. I also made sure Jed passed against his tests
in order to offer easy upgrades -- jsgettext.berlios.de
*/
(function (root, undef) {

  // Set up some underscore-style functions, if you already have
  // underscore, feel free to delete this section, and use it
  // directly, however, the amount of functions used doesn't
  // warrant having underscore as a full dependency.
  // Underscore 1.3.0 was used to port and is licensed
  // under the MIT License by Jeremy Ashkenas.
  var ArrayProto    = Array.prototype,
      ObjProto      = Object.prototype,
      slice         = ArrayProto.slice,
      hasOwnProp    = ObjProto.hasOwnProperty,
      nativeForEach = ArrayProto.forEach,
      breaker       = {};

  // We're not using the OOP style _ so we don't need the
  // extra level of indirection. This still means that you
  // sub out for real `_` though.
  var _ = {
    forEach : function( obj, iterator, context ) {
      var i, l, key;
      if ( obj === null ) {
        return;
      }

      if ( nativeForEach && obj.forEach === nativeForEach ) {
        obj.forEach( iterator, context );
      }
      else if ( obj.length === +obj.length ) {
        for ( i = 0, l = obj.length; i < l; i++ ) {
          if ( i in obj && iterator.call( context, obj[i], i, obj ) === breaker ) {
            return;
          }
        }
      }
      else {
        for ( key in obj) {
          if ( hasOwnProp.call( obj, key ) ) {
            if ( iterator.call (context, obj[key], key, obj ) === breaker ) {
              return;
            }
          }
        }
      }
    },
    extend : function( obj ) {
      this.forEach( slice.call( arguments, 1 ), function ( source ) {
        for ( var prop in source ) {
          obj[prop] = source[prop];
        }
      });
      return obj;
    }
  };
  // END Miniature underscore impl

  // Jed is a constructor function
  var Jed = function ( options ) {
    // Some minimal defaults
    this.defaults = {
      "locale_data" : {
        "messages" : {
          "" : {
            "domain"       : "messages",
            "lang"         : "en",
            "plural_forms" : "nplurals=2; plural=(n != 1);"
          }
          // There are no default keys, though
        }
      },
      // The default domain if one is missing
      "domain" : "messages",
      // enable debug mode to log untranslated strings to the console
      "debug" : false
    };

    // Mix in the sent options with the default options
    this.options = _.extend( {}, this.defaults, options );
    this.textdomain( this.options.domain );

    if ( options.domain && ! this.options.locale_data[ this.options.domain ] ) {
      throw new Error('Text domain set to non-existent domain: `' + options.domain + '`');
    }
  };

  // The gettext spec sets this character as the default
  // delimiter for context lookups.
  // e.g.: context\u0004key
  // If your translation company uses something different,
  // just change this at any time and it will use that instead.
  Jed.context_delimiter = String.fromCharCode( 4 );

  function getPluralFormFunc ( plural_form_string ) {
    return Jed.PF.compile( plural_form_string || "nplurals=2; plural=(n != 1);");
  }

  function Chain( key, i18n ){
    this._key = key;
    this._i18n = i18n;
  }

  // Create a chainable api for adding args prettily
  _.extend( Chain.prototype, {
    onDomain : function ( domain ) {
      this._domain = domain;
      return this;
    },
    withContext : function ( context ) {
      this._context = context;
      return this;
    },
    ifPlural : function ( num, pkey ) {
      this._val = num;
      this._pkey = pkey;
      return this;
    },
    fetch : function ( sArr ) {
      if ( {}.toString.call( sArr ) != '[object Array]' ) {
        sArr = [].slice.call(arguments, 0);
      }
      return ( sArr && sArr.length ? Jed.sprintf : function(x){ return x; } )(
        this._i18n.dcnpgettext(this._domain, this._context, this._key, this._pkey, this._val),
        sArr
      );
    }
  });

  // Add functions to the Jed prototype.
  // These will be the functions on the object that's returned
  // from creating a `new Jed()`
  // These seem redundant, but they gzip pretty well.
  _.extend( Jed.prototype, {
    // The sexier api start point
    translate : function ( key ) {
      return new Chain( key, this );
    },

    textdomain : function ( domain ) {
      if ( ! domain ) {
        return this._textdomain;
      }
      this._textdomain = domain;
    },

    gettext : function ( key ) {
      return this.dcnpgettext.call( this, undef, undef, key );
    },

    dgettext : function ( domain, key ) {
     return this.dcnpgettext.call( this, domain, undef, key );
    },

    dcgettext : function ( domain , key /*, category */ ) {
      // Ignores the category anyways
      return this.dcnpgettext.call( this, domain, undef, key );
    },

    ngettext : function ( skey, pkey, val ) {
      return this.dcnpgettext.call( this, undef, undef, skey, pkey, val );
    },

    dngettext : function ( domain, skey, pkey, val ) {
      return this.dcnpgettext.call( this, domain, undef, skey, pkey, val );
    },

    dcngettext : function ( domain, skey, pkey, val/*, category */) {
      return this.dcnpgettext.call( this, domain, undef, skey, pkey, val );
    },

    pgettext : function ( context, key ) {
      return this.dcnpgettext.call( this, undef, context, key );
    },

    dpgettext : function ( domain, context, key ) {
      return this.dcnpgettext.call( this, domain, context, key );
    },

    dcpgettext : function ( domain, context, key/*, category */) {
      return this.dcnpgettext.call( this, domain, context, key );
    },

    npgettext : function ( context, skey, pkey, val ) {
      return this.dcnpgettext.call( this, undef, context, skey, pkey, val );
    },

    dnpgettext : function ( domain, context, skey, pkey, val ) {
      return this.dcnpgettext.call( this, domain, context, skey, pkey, val );
    },

    // The most fully qualified gettext function. It has every option.
    // Since it has every option, we can use it from every other method.
    // This is the bread and butter.
    // Technically there should be one more argument in this function for 'Category',
    // but since we never use it, we might as well not waste the bytes to define it.
    dcnpgettext : function ( domain, context, singular_key, plural_key, val ) {
      // Set some defaults

      plural_key = plural_key || singular_key;

      // Use the global domain default if one
      // isn't explicitly passed in
      domain = domain || this._textdomain;

      var fallback;

      // Handle special cases

      // No options found
      if ( ! this.options ) {
        // There's likely something wrong, but we'll return the correct key for english
        // We do this by instantiating a brand new Jed instance with the default set
        // for everything that could be broken.
        fallback = new Jed();
        return fallback.dcnpgettext.call( fallback, undefined, undefined, singular_key, plural_key, val );
      }

      // No translation data provided
      if ( ! this.options.locale_data ) {
        throw new Error('No locale data provided.');
      }

      if ( ! this.options.locale_data[ domain ] ) {
        throw new Error('Domain `' + domain + '` was not found.');
      }

      if ( ! this.options.locale_data[ domain ][ "" ] ) {
        throw new Error('No locale meta information provided.');
      }

      // Make sure we have a truthy key. Otherwise we might start looking
      // into the empty string key, which is the options for the locale
      // data.
      if ( ! singular_key ) {
        throw new Error('No translation key found.');
      }

      var key  = context ? context + Jed.context_delimiter + singular_key : singular_key,
          locale_data = this.options.locale_data,
          dict = locale_data[ domain ],
          defaultConf = (locale_data.messages || this.defaults.locale_data.messages)[""],
          pluralForms = dict[""].plural_forms || dict[""]["Plural-Forms"] || dict[""]["plural-forms"] || defaultConf.plural_forms || defaultConf["Plural-Forms"] || defaultConf["plural-forms"],
          val_list,
          res;

      var val_idx;
      if (val === undefined) {
        // No value passed in; assume singular key lookup.
        val_idx = 0;

      } else {
        // Value has been passed in; use plural-forms calculations.

        // Handle invalid numbers, but try casting strings for good measure
        if ( typeof val != 'number' ) {
          val = parseInt( val, 10 );

          if ( isNaN( val ) ) {
            throw new Error('The number that was passed in is not a number.');
          }
        }

        val_idx = getPluralFormFunc(pluralForms)(val);
      }

      // Throw an error if a domain isn't found
      if ( ! dict ) {
        throw new Error('No domain named `' + domain + '` could be found.');
      }

      val_list = dict[ key ];

      // If there is no match, then revert back to
      // english style singular/plural with the keys passed in.
      if ( ! val_list || val_idx > val_list.length ) {
        if (this.options.missing_key_callback) {
          this.options.missing_key_callback(key, domain);
        }
        res = [ singular_key, plural_key ];

        // collect untranslated strings
        if (this.options.debug===true) {
          console.log(res[ getPluralFormFunc(pluralForms)( val ) ]);
        }
        return res[ getPluralFormFunc()( val ) ];
      }

      res = val_list[ val_idx ];

      // This includes empty strings on purpose
      if ( ! res  ) {
        res = [ singular_key, plural_key ];
        return res[ getPluralFormFunc()( val ) ];
      }
      return res;
    }
  });


  // We add in sprintf capabilities for post translation value interolation
  // This is not internally used, so you can remove it if you have this
  // available somewhere else, or want to use a different system.

  // We _slightly_ modify the normal sprintf behavior to more gracefully handle
  // undefined values.

  /**
   sprintf() for JavaScript 0.7-beta1
   http://www.diveintojavascript.com/projects/javascript-sprintf

   Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:
       * Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.
       * Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in the
         documentation and/or other materials provided with the distribution.
       * Neither the name of sprintf() for JavaScript nor the
         names of its contributors may be used to endorse or promote products
         derived from this software without specific prior written permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
   ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
  var sprintf = (function() {
    function get_type(variable) {
      return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
    }
    function str_repeat(input, multiplier) {
      for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}
      return output.join('');
    }

    var str_format = function() {
      if (!str_format.cache.hasOwnProperty(arguments[0])) {
        str_format.cache[arguments[0]] = str_format.parse(arguments[0]);
      }
      return str_format.format.call(null, str_format.cache[arguments[0]], arguments);
    };

    str_format.format = function(parse_tree, argv) {
      var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;
      for (i = 0; i < tree_length; i++) {
        node_type = get_type(parse_tree[i]);
        if (node_type === 'string') {
          output.push(parse_tree[i]);
        }
        else if (node_type === 'array') {
          match = parse_tree[i]; // convenience purposes only
          if (match[2]) { // keyword argument
            arg = argv[cursor];
            for (k = 0; k < match[2].length; k++) {
              if (!arg.hasOwnProperty(match[2][k])) {
                throw(sprintf('[sprintf] property "%s" does not exist', match[2][k]));
              }
              arg = arg[match[2][k]];
            }
          }
          else if (match[1]) { // positional argument (explicit)
            arg = argv[match[1]];
          }
          else { // positional argument (implicit)
            arg = argv[cursor++];
          }

          if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {
            throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));
          }

          // Jed EDIT
          if ( typeof arg == 'undefined' || arg === null ) {
            arg = '';
          }
          // Jed EDIT

          switch (match[8]) {
            case 'b': arg = arg.toString(2); break;
            case 'c': arg = String.fromCharCode(arg); break;
            case 'd': arg = parseInt(arg, 10); break;
            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;
            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;
            case 'o': arg = arg.toString(8); break;
            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;
            case 'u': arg = Math.abs(arg); break;
            case 'x': arg = arg.toString(16); break;
            case 'X': arg = arg.toString(16).toUpperCase(); break;
          }
          arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);
          pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';
          pad_length = match[6] - String(arg).length;
          pad = match[6] ? str_repeat(pad_character, pad_length) : '';
          output.push(match[5] ? arg + pad : pad + arg);
        }
      }
      return output.join('');
    };

    str_format.cache = {};

    str_format.parse = function(fmt) {
      var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;
      while (_fmt) {
        if ((match = /^[^\x25]+/.exec(_fmt)) !== null) {
          parse_tree.push(match[0]);
        }
        else if ((match = /^\x25{2}/.exec(_fmt)) !== null) {
          parse_tree.push('%');
        }
        else if ((match = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {
          if (match[2]) {
            arg_names |= 1;
            var field_list = [], replacement_field = match[2], field_match = [];
            if ((field_match = /^([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
              field_list.push(field_match[1]);
              while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {
                if ((field_match = /^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
                  field_list.push(field_match[1]);
                }
                else if ((field_match = /^\[(\d+)\]/.exec(replacement_field)) !== null) {
                  field_list.push(field_match[1]);
                }
                else {
                  throw('[sprintf] huh?');
                }
              }
            }
            else {
              throw('[sprintf] huh?');
            }
            match[2] = field_list;
          }
          else {
            arg_names |= 2;
          }
          if (arg_names === 3) {
            throw('[sprintf] mixing positional and named placeholders is not (yet) supported');
          }
          parse_tree.push(match);
        }
        else {
          throw('[sprintf] huh?');
        }
        _fmt = _fmt.substring(match[0].length);
      }
      return parse_tree;
    };

    return str_format;
  })();

  var vsprintf = function(fmt, argv) {
    argv.unshift(fmt);
    return sprintf.apply(null, argv);
  };

  Jed.parse_plural = function ( plural_forms, n ) {
    plural_forms = plural_forms.replace(/n/g, n);
    return Jed.parse_expression(plural_forms);
  };

  Jed.sprintf = function ( fmt, args ) {
    if ( {}.toString.call( args ) == '[object Array]' ) {
      return vsprintf( fmt, [].slice.call(args) );
    }
    return sprintf.apply(this, [].slice.call(arguments) );
  };

  Jed.prototype.sprintf = function () {
    return Jed.sprintf.apply(this, arguments);
  };
  // END sprintf Implementation

  // Start the Plural forms section
  // This is a full plural form expression parser. It is used to avoid
  // running 'eval' or 'new Function' directly against the plural
  // forms.
  //
  // This can be important if you get translations done through a 3rd
  // party vendor. I encourage you to use this instead, however, I
  // also will provide a 'precompiler' that you can use at build time
  // to output valid/safe function representations of the plural form
  // expressions. This means you can build this code out for the most
  // part.
  Jed.PF = {};

  Jed.PF.parse = function ( p ) {
    var plural_str = Jed.PF.extractPluralExpr( p );
    return Jed.PF.parser.parse.call(Jed.PF.parser, plural_str);
  };

  Jed.PF.compile = function ( p ) {
    // Handle trues and falses as 0 and 1
    function imply( val ) {
      return (val === true ? 1 : val ? val : 0);
    }

    var ast = Jed.PF.parse( p );
    return function ( n ) {
      return imply( Jed.PF.interpreter( ast )( n ) );
    };
  };

  Jed.PF.interpreter = function ( ast ) {
    return function ( n ) {
      var res;
      switch ( ast.type ) {
        case 'GROUP':
          return Jed.PF.interpreter( ast.expr )( n );
        case 'TERNARY':
          if ( Jed.PF.interpreter( ast.expr )( n ) ) {
            return Jed.PF.interpreter( ast.truthy )( n );
          }
          return Jed.PF.interpreter( ast.falsey )( n );
        case 'OR':
          return Jed.PF.interpreter( ast.left )( n ) || Jed.PF.interpreter( ast.right )( n );
        case 'AND':
          return Jed.PF.interpreter( ast.left )( n ) && Jed.PF.interpreter( ast.right )( n );
        case 'LT':
          return Jed.PF.interpreter( ast.left )( n ) < Jed.PF.interpreter( ast.right )( n );
        case 'GT':
          return Jed.PF.interpreter( ast.left )( n ) > Jed.PF.interpreter( ast.right )( n );
        case 'LTE':
          return Jed.PF.interpreter( ast.left )( n ) <= Jed.PF.interpreter( ast.right )( n );
        case 'GTE':
          return Jed.PF.interpreter( ast.left )( n ) >= Jed.PF.interpreter( ast.right )( n );
        case 'EQ':
          return Jed.PF.interpreter( ast.left )( n ) == Jed.PF.interpreter( ast.right )( n );
        case 'NEQ':
          return Jed.PF.interpreter( ast.left )( n ) != Jed.PF.interpreter( ast.right )( n );
        case 'MOD':
          return Jed.PF.interpreter( ast.left )( n ) % Jed.PF.interpreter( ast.right )( n );
        case 'VAR':
          return n;
        case 'NUM':
          return ast.val;
        default:
          throw new Error("Invalid Token found.");
      }
    };
  };

  Jed.PF.extractPluralExpr = function ( p ) {
    // trim first
    p = p.replace(/^\s\s*/, '').replace(/\s\s*$/, '');

    if (! /;\s*$/.test(p)) {
      p = p.concat(';');
    }

    var nplurals_re = /nplurals\=(\d+);/,
        plural_re = /plural\=(.*);/,
        nplurals_matches = p.match( nplurals_re ),
        res = {},
        plural_matches;

    // Find the nplurals number
    if ( nplurals_matches.length > 1 ) {
      res.nplurals = nplurals_matches[1];
    }
    else {
      throw new Error('nplurals not found in plural_forms string: ' + p );
    }

    // remove that data to get to the formula
    p = p.replace( nplurals_re, "" );
    plural_matches = p.match( plural_re );

    if (!( plural_matches && plural_matches.length > 1 ) ) {
      throw new Error('`plural` expression not found: ' + p);
    }
    return plural_matches[ 1 ];
  };

  /* Jison generated parser */
  Jed.PF.parser = (function(){

var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"expressions":3,"e":4,"EOF":5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,"n":19,"NUMBER":20,"$accept":0,"$end":1},
terminals_: {2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},
productions_: [0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],
performAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {

var $0 = $$.length - 1;
switch (yystate) {
case 1: return { type : 'GROUP', expr: $$[$0-1] };
break;
case 2:this.$ = { type: 'TERNARY', expr: $$[$0-4], truthy : $$[$0-2], falsey: $$[$0] };
break;
case 3:this.$ = { type: "OR", left: $$[$0-2], right: $$[$0] };
break;
case 4:this.$ = { type: "AND", left: $$[$0-2], right: $$[$0] };
break;
case 5:this.$ = { type: 'LT', left: $$[$0-2], right: $$[$0] };
break;
case 6:this.$ = { type: 'LTE', left: $$[$0-2], right: $$[$0] };
break;
case 7:this.$ = { type: 'GT', left: $$[$0-2], right: $$[$0] };
break;
case 8:this.$ = { type: 'GTE', left: $$[$0-2], right: $$[$0] };
break;
case 9:this.$ = { type: 'NEQ', left: $$[$0-2], right: $$[$0] };
break;
case 10:this.$ = { type: 'EQ', left: $$[$0-2], right: $$[$0] };
break;
case 11:this.$ = { type: 'MOD', left: $$[$0-2], right: $$[$0] };
break;
case 12:this.$ = { type: 'GROUP', expr: $$[$0-1] };
break;
case 13:this.$ = { type: 'VAR' };
break;
case 14:this.$ = { type: 'NUM', val: Number(yytext) };
break;
}
},
table: [{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],
defaultActions: {6:[2,1]},
parseError: function parseError(str, hash) {
    throw new Error(str);
},
parse: function parse(input) {
    var self = this,
        stack = [0],
        vstack = [null], // semantic value stack
        lstack = [], // location stack
        table = this.table,
        yytext = '',
        yylineno = 0,
        yyleng = 0,
        recovering = 0,
        TERROR = 2,
        EOF = 1;

    //this.reductionCount = this.shiftCount = 0;

    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    if (typeof this.lexer.yylloc == 'undefined')
        this.lexer.yylloc = {};
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);

    if (typeof this.yy.parseError === 'function')
        this.parseError = this.yy.parseError;

    function popStack (n) {
        stack.length = stack.length - 2*n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }

    function lex() {
        var token;
        token = self.lexer.lex() || 1; // $end = 1
        // if token isn't its numeric value, convert
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    }

    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;
    while (true) {
        // retreive state number from top of stack
        state = stack[stack.length-1];

        // use default actions if available
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol == null)
                symbol = lex();
            // read action for current state and first input
            action = table[state] && table[state][symbol];
        }

        // handle parse error
        _handle_error:
        if (typeof action === 'undefined' || !action.length || !action[0]) {

            if (!recovering) {
                // Report error
                expected = [];
                for (p in table[state]) if (this.terminals_[p] && p > 2) {
                    expected.push("'"+this.terminals_[p]+"'");
                }
                var errStr = '';
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line '+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(', ') + ", got '" + this.terminals_[symbol]+ "'";
                } else {
                    errStr = 'Parse error on line '+(yylineno+1)+": Unexpected " +
                                  (symbol == 1 /*EOF*/ ? "end of input" :
                                              ("'"+(this.terminals_[symbol] || symbol)+"'"));
                }
                this.parseError(errStr,
                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});
            }

            // just recovered from another error
            if (recovering == 3) {
                if (symbol == EOF) {
                    throw new Error(errStr || 'Parsing halted.');
                }

                // discard current lookahead and grab another
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                symbol = lex();
            }

            // try to recover from error
            while (1) {
                // check for error recovery rule in this state
                if ((TERROR.toString()) in table[state]) {
                    break;
                }
                if (state == 0) {
                    throw new Error(errStr || 'Parsing halted.');
                }
                popStack(1);
                state = stack[stack.length-1];
            }

            preErrorSymbol = symbol; // save the lookahead token
            symbol = TERROR;         // insert generic error symbol as new lookahead
            state = stack[stack.length-1];
            action = table[state] && table[state][TERROR];
            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error
        }

        // this shouldn't happen, unless resolve defaults are off
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);
        }

        switch (action[0]) {

            case 1: // shift
                //this.shiftCount++;

                stack.push(symbol);
                vstack.push(this.lexer.yytext);
                lstack.push(this.lexer.yylloc);
                stack.push(action[1]); // push state
                symbol = null;
                if (!preErrorSymbol) { // normal execution/no error
                    yyleng = this.lexer.yyleng;
                    yytext = this.lexer.yytext;
                    yylineno = this.lexer.yylineno;
                    yyloc = this.lexer.yylloc;
                    if (recovering > 0)
                        recovering--;
                } else { // error just occurred, resume old lookahead f/ before error
                    symbol = preErrorSymbol;
                    preErrorSymbol = null;
                }
                break;

            case 2: // reduce
                //this.reductionCount++;

                len = this.productions_[action[1]][1];

                // perform semantic action
                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1
                // default location, uses first token for firsts, last for lasts
                yyval._$ = {
                    first_line: lstack[lstack.length-(len||1)].first_line,
                    last_line: lstack[lstack.length-1].last_line,
                    first_column: lstack[lstack.length-(len||1)].first_column,
                    last_column: lstack[lstack.length-1].last_column
                };
                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);

                if (typeof r !== 'undefined') {
                    return r;
                }

                // pop off stack
                if (len) {
                    stack = stack.slice(0,-1*len*2);
                    vstack = vstack.slice(0, -1*len);
                    lstack = lstack.slice(0, -1*len);
                }

                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)
                vstack.push(yyval.$);
                lstack.push(yyval._$);
                // goto new state = table[STATE][NONTERMINAL]
                newState = table[stack[stack.length-2]][stack[stack.length-1]];
                stack.push(newState);
                break;

            case 3: // accept
                return true;
        }

    }

    return true;
}};/* Jison generated lexer */
var lexer = (function(){

var lexer = ({EOF:1,
parseError:function parseError(str, hash) {
        if (this.yy.parseError) {
            this.yy.parseError(str, hash);
        } else {
            throw new Error(str);
        }
    },
setInput:function (input) {
        this._input = input;
        this._more = this._less = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = '';
        this.conditionStack = ['INITIAL'];
        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};
        return this;
    },
input:function () {
        var ch = this._input[0];
        this.yytext+=ch;
        this.yyleng++;
        this.match+=ch;
        this.matched+=ch;
        var lines = ch.match(/\n/);
        if (lines) this.yylineno++;
        this._input = this._input.slice(1);
        return ch;
    },
unput:function (ch) {
        this._input = ch + this._input;
        return this;
    },
more:function () {
        this._more = true;
        return this;
    },
pastInput:function () {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\n/g, "");
    },
upcomingInput:function () {
        var next = this.match;
        if (next.length < 20) {
            next += this._input.substr(0, 20-next.length);
        }
        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\n/g, "");
    },
showPosition:function () {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c+"^";
    },
next:function () {
        if (this.done) {
            return this.EOF;
        }
        if (!this._input) this.done = true;

        var token,
            match,
            col,
            lines;
        if (!this._more) {
            this.yytext = '';
            this.match = '';
        }
        var rules = this._currentRules();
        for (var i=0;i < rules.length; i++) {
            match = this._input.match(this.rules[rules[i]]);
            if (match) {
                lines = match[0].match(/\n.*/g);
                if (lines) this.yylineno += lines.length;
                this.yylloc = {first_line: this.yylloc.last_line,
                               last_line: this.yylineno+1,
                               first_column: this.yylloc.last_column,
                               last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}
                this.yytext += match[0];
                this.match += match[0];
                this.matches = match;
                this.yyleng = this.yytext.length;
                this._more = false;
                this._input = this._input.slice(match[0].length);
                this.matched += match[0];
                token = this.performAction.call(this, this.yy, this, rules[i],this.conditionStack[this.conditionStack.length-1]);
                if (token) return token;
                else return;
            }
        }
        if (this._input === "") {
            return this.EOF;
        } else {
            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),
                    {text: "", token: null, line: this.yylineno});
        }
    },
lex:function lex() {
        var r = this.next();
        if (typeof r !== 'undefined') {
            return r;
        } else {
            return this.lex();
        }
    },
begin:function begin(condition) {
        this.conditionStack.push(condition);
    },
popState:function popState() {
        return this.conditionStack.pop();
    },
_currentRules:function _currentRules() {
        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;
    },
topState:function () {
        return this.conditionStack[this.conditionStack.length-2];
    },
pushState:function begin(condition) {
        this.begin(condition);
    }});
lexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {

var YYSTATE=YY_START;
switch($avoiding_name_collisions) {
case 0:/* skip whitespace */
break;
case 1:return 20
break;
case 2:return 19
break;
case 3:return 8
break;
case 4:return 9
break;
case 5:return 6
break;
case 6:return 7
break;
case 7:return 11
break;
case 8:return 13
break;
case 9:return 10
break;
case 10:return 12
break;
case 11:return 14
break;
case 12:return 15
break;
case 13:return 16
break;
case 14:return 17
break;
case 15:return 18
break;
case 16:return 5
break;
case 17:return 'INVALID'
break;
}
};
lexer.rules = [/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./];
lexer.conditions = {"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"inclusive":true}};return lexer;})()
parser.lexer = lexer;
return parser;
})();
// End parser

  // Handle node, amd, and global systems
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = Jed;
    }
    exports.Jed = Jed;
  }
  else {
    if (typeof define === 'function' && define.amd) {
      define('jed', function() {
        return Jed;
      });
    }
    // Leak a global regardless of module system
    root['Jed'] = Jed;
  }

})(this);
/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
(function(c){var g=function(a){var b,d;a=c(a);if(!a.parent().length)return!1;b=a.data("size-data");d={width:a.width(),height:a.height()};if(!b||d.width!==b.width||d.height!==b.height)a.trigger(c.Event("textarea-resize")),a.data("size-data",d);return!!d.height};c.fn.textareaResize=function(){return this.each(function(){var a=c(this),b,d,e;if(!a.data("size-data")){a.data("size-data",{width:a.width(),height:a.height()});a.on("mousedown",function(){b=setInterval(function(){!1===g(a)&&clearInterval(b)},
15);e=!0});if(swarm.has.nonStandardResizeControl())a.on("mousemove",function(){e=!0;d||(d=setTimeout(function(){d=!1;g(a)},200))});c(document).on("mouseup",function(){clearInterval(b);e&&g(a);e=!1})}})}})(window.jQuery);
(function(c){var g=function(a,b){this.$element=c(a);this.options=b;this.getPlot();this.renderRevisionPoints();this.setMarkerMode(b.markerMode||this.markerMode);this.markerRadius=this.getMarker().outerWidth()/2;var d=this;this.$element.tooltip({selector:".rev, .marker, .connector",container:"body",html:!0,template:this.tooltipTemplate,title:function(){if(c(this).hasClass("connector")){var b=d.getMarker("both"),a=d.getRevisionData(b.right.data("target")),b=d.getRevisionData(b.left.data("target"));return d.getDiffLabel(a,
b)}a=c(c.data(this,"target"));return a.attr("data-original-title")||a.attr("title")}});1>=(this.getRevisionData()||[]).length||(this.$element.on("mousedown.slider",c.proxy(this.mousedown,this)),c(document).on("mouseup.slider",c.proxy(this.mouseup,this)))};g.prototype={constructor:g,markerMode:1,connectorTemplate:'\x3cdiv class\x3d"connector" data-original-title\x3d"" draggable\x3d"false"\x3e\x3cdiv class\x3d"connector-inner"\x3e\x3c/div\x3e\x3c/div\x3e',markerTemplate:'\x3cdiv class\x3d"marker" data-original-title\x3d"" draggable\x3d"false"\x3e\x3cdiv class\x3d"marker-dot border-box"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipTemplate:'\x3cdiv class\x3d"tooltip slider-tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e',markerRadius:0,setMarkerMode:function(a){this.previousRevision=null;this.removeModeVisuals();if(1===a)this.markerMode=a,this.moveMarker(this.$element.find(".active").last(),null,!0);else if(2===a){var b=this.$element.find(".active").last(),d=this.$element.find(".active").not(b).first();d.length||(d=b.prev(".rev"));d.length||(d=
b,b=b.next(".rev"));this.markerMode=a;this.$connector=c(this.connectorTemplate).insertAfter(this.getPlot());this.moveMarker(b,"right",!0);this.moveMarker(d,"left",!0)}this.updateActive()},_getClosestMarker:function(a){if(1===this.markerMode)return this.getMarker();var b=this.getMarker("both"),d=Math.abs(a-(b.left.offset().left+this.markerRadius));a=Math.abs(a-(b.right.offset().left+this.markerRadius));return d<a?b.left:b.right},_getClosestRevNode:function(a,b,d){var c=2*this.getRevisionData().length-
2;a=Math.round(Math.floor(a/(d/c))/2);this.setClosestRevNode(this.$element.find(".rev")[a],b);return b.data("target")},setClosestRevNode:function(a,b){var d=b.data("target");if(d!==a&&((1===this.markerMode||this.getMarker().not(b[0]).data("target")!==d)&&c(d).removeClass("closest"),c(a).addClass("closest"),b.data("target",a),this.$element.trigger("slider-closest-change",this),this._mouseListen)){var e=this.$element.data("tooltip");e.leave({currentTarget:d});d=c.data(a,"tooltip");2===this.markerMode?
(d=this.$connector.data("tooltip"))&&d.tip().find(".tooltip-inner").html(d.getTitle()):(!d||!d.tip()[0].parentNode)&&e.enter({currentTarget:a})}},onMarkerMouseMove:function(a,b){this.dragging=!0;var d=this.$element[0].getBoundingClientRect(),e=a.pageX-this.markerRadius,f=this.closestMarker,h=this.slaveMarker,g="left"===f.data("side");this.lockstep&&(e-=this.markerOffset);e=Math.max(e,d.left);e=Math.max(e,d.left+this.lockstep);e=Math.min(e,d.right);e=Math.min(e,d.right+this.lockstep);e-=d.left+c(window).scrollLeft();
this.lockstep&&(h.css("left",e-this.lockstep+"px"),this._getClosestRevNode(e-this.lockstep,h,d.width));if(2===this.markerMode&&!this.lockstep)var k=d.width/(this.getRevisionData().length-1),l=parseFloat(h.css("left"),10),e=g?Math.min(e,l-k):Math.max(e,l+k);f.css("left",e+"px");this._getClosestRevNode(e,f,d.width);2===this.markerMode&&(this.updateConnector(),setTimeout(c.proxy(this.moveConnectorTooltip,this),0));this.$element.trigger("slider-move",this,e);b&&(this.lockstep&&this.moveMarker(h.data("target"),
h,!0),this.moveMarker(f.data("target"),f))},moveConnectorTooltip:function(){var a=this.$connector.data("tooltip");if(!a||!a.tip()[0].parentNode)this.$element.data("tooltip").enter({currentTarget:this.$connector[0]});else{var b=a.tip(),d=a.getPosition();a.applyPlacement({top:d.top-b[0].offsetHeight,left:d.left+d.width/2-b[0].offsetWidth/2},"top")}},updateConnector:function(){var a=this.getMarker("both"),b=a.left[0].style.left,d=a.right[0].style.left,c=0<b.indexOf("%")&&0<d.indexOf("%"),f=c?"%":"px";
c||(b=a.left.css("left"),d=a.right.css("left"));b=parseFloat(b,10);d=parseFloat(d,10);this.$connector.css({left:b+f,width:d-b+f})},moveMarker:function(a,b,d){a=this.$element.find(a);if(a.length){b=b instanceof c?b:this.getMarker(b);var e=parseInt(a.data("rev-index"),10);b.css(this.getRevNodePosition(e));2===this.markerMode&&this.updateConnector();this.setClosestRevNode(a[0],b);a=c(b.data("target")).is(".active");b=this.getMarker().not(b);e=c(b.data("target")).is(".active");if(!d&&(!a||b.length&&!e))this.updateActive(),
this.$element.trigger("slider-moved",this)}},updateActive:function(){var a=2===this.markerMode?this.getMarker("right"):this.getMarker(),a=c(a.data("target"));this.currentRevision=this.getRevisionData(a);this.$element.find(".rev").removeClass("active");a.addClass("active");2===this.markerMode&&(a=this.getMarker("left"),a=c(a.data("target")),this.previousRevision=this.getRevisionData(a),a.addClass("active"))},renderRevisionPoints:function(){this.$element.find(".rev").remove();var a=this,b=this.getRevisionData();
c.each(b,function(b,e){var f=a.getRevNodePosition(b),f="left: "+f.left+";",f=c('\x3cdiv class\x3d"rev manual-tooltip '+((e.selected?"active":"")+(e.pending?"":" committed"))+'" style\x3d"'+f+'"\x3e\x3cdiv class\x3d"rev-dot border-box"\x3e\x3c/div\x3e\x3c/div\x3e');f.data("rev-index",b);f.attr("title",a.getRevisionLabel(e));f.appendTo(a.$element)})},getRevNodePosition:function(a){var b=this.getRevisionData().length;return{left:(1>=b?100:100*(a/(b-1)))+"%"}},getRevisionLabel:function(a){return"#"+a.rev+
" "+swarm.te("by")+" \x3cb\x3e"+a.user+"\x3c/b\x3e "+c.timeago.inWords(Date.now()-1E3*a.time)+'\x3cbr /\x3e\x3cspan class\x3d"muted"\x3e'+swarm.te(a.pending?"Shelved in %s":"Committed in %s",[a.change])+"\x3c/span\x3e"},getDiffLabel:function(a,b){return'\x3cdiv class\x3d"text-left"\x3e#'+a.rev+' \x3cspan class\x3d"muted"\x3e'+swarm.te(a.pending?"Shelved in %s":"Committed in %s",[a.change])+"\x3c/span\x3e\x3cbr /\x3e#"+b.rev+' \x3cspan class\x3d"muted"\x3e'+swarm.te(b.pending?"Shelved in %s":"Committed in %s",
[b.change])+"\x3c/span\x3e\x3c/div\x3e"},getRevisionData:function(a){return a?this.options.data[c(a).data("rev-index")]:this.options.data},getMarker:function(a){this.$marker=this.$marker||this.$element.find(".marker");var b;for(b=0;b<this.markerMode;b++)this.$marker[b]||(this.$marker=this.$marker.add(c(this.markerTemplate).insertAfter(this.getPlot())));if(!a||1===this.$marker.length)return this.$marker;b=this.$marker.eq(0).offset().left;var d=this.$marker.eq(1).offset().left;b={left:b<d?this.$marker.eq(0):
this.$marker.eq(1),right:b>=d?this.$marker.eq(0):this.$marker.eq(1)};b.left.data("side","left");b.right.data("side","right");return"both"===a?b:b[a]},removeModeVisuals:function(){this.$marker&&(this.$marker.remove(),this.$marker=null);this.$connector&&(this.$connector.remove(),this.$connector=null);this.$element.find(".closest").removeClass("closest")},getPlot:function(){this.$plot=this.$plot||this.$element.find(".plot");this.$plot.length||(this.$plot=c('\x3cdiv class\x3d"plot" /\x3e').prependTo(this.$element));
return this.$plot},mousedown:function(a){if(0===a.button){a.preventDefault();var b=c(a.target),d=this.$element.data("tooltip");b.is(".marker-dot, .rev-dot, .connector-inner")&&(b=b.parent());this.markerOffset=this.lockstep=0;this._mouseListen=!0;this._clickTarget=b[0];this.closestMarker=b.hasClass("marker")?b:this._getClosestMarker(a.pageX);this.slaveMarker=this.getMarker().not(this.closestMarker);this.getMarker().addClass("moving");this.$element.off("mouseenter.tooltip",".rev, .marker, .connector");
this.$element.off("mouseleave.tooltip",".rev, .marker, .connector");if(2===this.markerMode){var e="left"===this.closestMarker.data("side"),f=this.closestMarker.offset().left,h=this.slaveMarker.offset().left,g=this.closestMarker.find(".marker-dot").outerWidth()/2;this.markerOffset=a.pageX-(f+this.markerRadius);if(Math.abs(this.markerOffset)>g&&(e&&0<this.markerOffset||!e&&0>this.markerOffset))this.lockstep=f-h}if(b.hasClass("rev"))this.moveMarker(b[0],this.closestMarker,!0);else{if(1===this.markerMode||
!b.hasClass("connector"))b=2===this.markerMode?this.$connector[0]:this.closestMarker.data("target"),d.enter({currentTarget:b});this.onMarkerMouseMove(a)}c(document).on("mousemove.slider",c.proxy(this.onMarkerMouseMove,this));setTimeout(c.proxy(function(){this.closestMarker&&d.leave({currentTarget:this.closestMarker[0]})},this),500)}},mouseup:function(a){if(this._mouseListen){c(document).off("mousemove.slider");this.getMarker().removeClass("moving");if(this.dragging)this.onMarkerMouseMove(a,!0);else this.moveMarker(this._clickTarget,
this.closestMarker);this.closestMarker=null;this._mouseListen=!1;this._clickTarget=null;this.dragging=!1;a=this.$element.data("tooltip");this.$element.on("mouseleave.tooltip",".rev, .marker, .connector",c.proxy(a.leave,a));this.$element.on("mouseenter.tooltip",".rev, .marker, .connector",c.proxy(a.enter,a));this.$element.find(".rev, .connector").trigger("mouseout")}},disable:function(){this.$element.addClass("disabled");this.$element.append('\x3cdiv class\x3d"overlay"\x3e\x3c/div\x3e');this.$element.off("mousedown.slider");
c(document).off("mouseup.slider")}};c.fn.versionSlider=function(a){return this.each(function(){var b=c(this),d=b.data("versionSlider");d?"object"===typeof a&&(c.extend(d.options,a),d.renderRevisionPoints(),d.setMarkerMode(d.options.markerMode||d.markerMode)):(d=c.extend({},b.data(),"object"===typeof a&&a),b.data("versionSlider",new g(this,d)))})};c.fn.versionSlider.Constructor=g})(window.jQuery);
(function(c){var g=function(a,b){this.$element=c(a);this.options=c.extend({},c.fn.multiPicker.defaults,b);this.init()};g.prototype={constructor:g,itemTemplate:'\x3cdiv class\x3d"multipicker-item" data-value\x3d"{{\x3evalue}}"\x3e\x3cdiv class\x3d"pull-left"\x3e\x3cdiv class\x3d"btn-group"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info button-name" disabled\x3e{{\x3evalue}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info item-remove"title\x3d"{{te:"Remove"}}" aria-label\x3d"{{te:"Remove"}}"\x3e\x3ci class\x3d"icon-remove icon-white"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e{{if inputName}}\x3cinput type\x3d"hidden" name\x3d"{{\x3einputName}}[]" value\x3d"{{\x3evalue}}"\x3e{{/if}}\x3c/div\x3e\x3c/div\x3e',
init:function(){this.$element.typeahead(this.options);this.typeahead=this.$element.data("typeahead");this.typeahead.select=c.proxy(this.select,this);this.typeahead.highlighter=c.proxy(this.highlighter,this);this.typeahead.matcher=c.proxy(this.matcher,this);this.$element.addClass("multipicker-input");this.getItemsContainer().addClass("multipicker-items-container clearfix");this.$element.on("keypress",function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation())});c.each(this.options.selected,
c.proxy(function(a,b){this.addItem(b)},this));this.update();this.options.disabled&&this.disable()},setSource:function(a){this.typeahead.source=a},highlighter:function(a){a=c("\x3cspan /\x3e").text(a).html();var b=c("\x3cspan /\x3e").text(this.typeahead.query).html(),b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26");return a.replace(RegExp("("+b+")","ig"),function(b,a){return"\x3cstrong\x3e"+a+"\x3c/strong\x3e"})},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.typeahead.query.toLowerCase())&&
-1===this.getSelected().indexOf(this.typeahead.updater(a))},addItem:function(a){if(-1!==this.getSelected().indexOf(a))return!1;var b=this.getItemsContainer();if(b.length){var d=this;this.createItem(a).appendTo(b).find(".item-remove").on("click",function(b){b.stopPropagation();c(this).tooltip("destroy");c(this).closest(".multipicker-item").remove();d.update()})}this.update()},createItem:function(a,b){return this.options.createItem?this.options.createItem.call(this,a):c(c.templates(this.itemTemplate).render({value:a,
inputName:b||this.options.inputName}))},select:function(){var a=this.typeahead.$menu.find(".active").attr("data-value");!1!==this.addItem(this.typeahead.updater(a))&&this.$element.val("");return this.typeahead.hide()},getSelected:function(){var a=[];this.getItemsContainer().find(".multipicker-item").each(function(){a.push(c(this).data("value"))});return a},getItemsContainer:function(){return c(this.options.itemsContainer)},update:function(){this.updateRequired();c.isFunction(this.options.onUpdate)&&
this.options.onUpdate.call(this)},updateRequired:function(){if(null!==this.options.required){var a="function"===typeof this.options.required?this.options.required.call(this):this.options.required,b=0===this.getSelected().length;this.$element.prop("required",a&&b).trigger("change")}},clear:function(){var a=this.getItemsContainer();a.find("[title]").tooltip("destroy");a.find(".multipicker-item").remove();this.update()},disable:function(){this.$element.prop("disabled",!0)},enable:function(){this.$element.prop("disabled",
!1)}};c.fn.multiPicker=function(a){return this.each(function(){var b=c(this),d=b.data("multipicker");if(d){if("string"===typeof a)d[a]()}else d=c.extend({},b.data(),"object"===typeof a&&a),b.data("multipicker",new g(this,d))})};c.fn.multiPicker.defaults={itemsContainer:null,inputName:null,onUpdate:null,required:null,createItem:null,selected:[],source:[],disabled:!1};c.fn.multiPicker.Constructor=g})(window.jQuery);
(function(c){var g=function(b,a){var e=this;this.$element=c(b);this.options=c.extend({},c.fn.userMultiPicker.defaults,a);this.groupUsers={};this.projectPrefix="swarm-project-";var f=this.options.source||[];delete this.options.source;var h=[];c.each(this.options.selected,function(){h.push(e.makeUserItem(this))});c.each(this.options.enableGroups?this.options.selectedGroups:[],function(){h.push(e.makeGroupItem(this))});this.options.selected=h;this.init();this.typeahead.updater=c.proxy(this.updater,this);
this.typeahead.render=c.proxy(this.render,this);this.typeahead.sorter=c.proxy(this.sorter,this);this.setSource(f);this.disable();this.$element.prop("required")&&!this.$element.val()&&this.$element.addClass("invalid");this.options.disabled||c.fn.userMultiPicker.Promise(this).done(c.proxy(this.setSource,this))};g.prototype=c.extend({},c.fn.multiPicker.Constructor.prototype,{constructor:g,matcher:function(b){if(-1===b.label.toLowerCase().indexOf(this.typeahead.query.toLowerCase()))return!1;var a=this.options.excludeUsers||
[],c=this.options.excludeProjects||[],f=b.id.substr(this.projectPrefix.length),h=this.options.enableGroups;return this.getSelected(b).length||"user"===b.type&&-1!==a.indexOf(b.id)||"project"===b.type&&-1!==c.indexOf(f)||"user"!==b.type&&!h?!1:!0},setSource:function(b){this.typeahead.source=b;this.enable();this.$element.removeClass("invalid")},updater:function(b){return b.split(" (")[0]},sorter:function(b){b.sort(function(b,a){b=b.label.toLowerCase();a=a.label.toLowerCase();return b===a?0:b>a?1:-1});
return b},addItem:function(b){var a="project"===b.type?"group":b.type;if(this.getSelected(b).length)return!1;var e=this.getItemsContainer();if(e.length){var f=e.find(".type-"+a);f.length||(f=c("\x3cdiv\x3e").addClass("clearfix type-"+a)["group"===a?"prependTo":"appendTo"](e));e=this.createItem(b.label,"group"===a?this.options.groupInputName||this.options.inputName+"-groups":this.options.inputName).data("value",b).appendTo(f);"group"===a&&e.find("button").removeClass("btn-info").addClass("btn-primary");
e.find("input").val(b.id);var h=this,g={user:swarm.te("User"),group:swarm.te("Group"),project:swarm.te("Project")};e.find(".button-name").prop("disabled",!1).click(function(b){b.preventDefault()}).tooltip({html:!0,container:"body",customClass:"multipicker-item",title:function(){var a='\x3cspan class\x3d"label-type type-'+b.type+'"\x3e'+g[b.type]+'\x3c/span\x3e\x3cspan class\x3d"name"\x3e'+b.label+"\x3c/span\x3e";if("group"===b.type||"project"===b.type){var d=h.groupUsers[b.id];if("array"===c.type(d))return a+
'\x3cdiv class\x3d"group-users muted"\x3e'+d.slice(0,100).join(", ")+(100<d.length?" ...":"")+"\x3c/div\x3e";if(!d){var e=c(this).data("tooltip");h.groupUsers[b.id]=c.ajax("/users?fields[]\x3dUser\x26group\x3d"+b.id).done(function(a){h.groupUsers[b.id]=c.map(a,function(b){return b.User});e.tip().hasClass("in")&&e.show()})}}return a}});var k=this;e.find(".item-remove").on("click",function(b){b.stopPropagation();c(this).tooltip("destroy");c(this).closest(".multipicker-item").remove();k.update()})}this.update()},
select:function(){var b=this.typeahead.$menu.find(".active").data("value");!1!==this.addItem(b)&&this.$element.val("");return this.typeahead.hide()},getSelected:function(b){var a=[];this.getItemsContainer().find(".multipicker-item").each(function(){var e=c(this).data("value");(!b||b.id===e.id&&e.type===b.type)&&a.push(e)});return a},render:function(b){var a=this,e=this.typeahead,f=this.typeahead.$menu,h={project:[],group:[],user:[]};c.each(b,function(){h[this.type]=h[this.type]||[];h[this.type].push(this)});
var g=this.options.maxItems/b.length;b=[];c.each(h,function(a,d){b=c.merge(b,d.slice(0,Math.ceil(d.length*g)))});var k={user:swarm.t("Users"),group:swarm.t("Groups"),project:swarm.t("Projects")},l,m,n=[];c.each(b,function(){m=c(e.options.item).data("value",this).attr("data-label",this.label);m.find("a").html(a.highlighter(this.label));a.options.enableGroups&&this.type!==l&&(l=this.type,m.prepend(c.templates('\x3cspan class\x3d"group-heading"\x3e{{te:label}}\x3c/span\x3e').render({label:k[this.type]})));
n.push(m[0])});f.html(n);return e},makeUserItem:function(b){b=c.isPlainObject(b)?b:{User:b.valueOf()};var a=b.User;b.FullName&&b.FullName!==b.User&&(a+=" ("+b.FullName+")");return{id:b.User,type:"user",label:a}},makeGroupItem:function(b){b=c.isPlainObject(b)?b:{Group:b.valueOf()};var a=0===b.Group.indexOf(this.projectPrefix);return{id:b.Group,type:a?"project":"group",label:a?b.Group.substr(this.projectPrefix.length):b.Group}}});c.fn.userMultiPicker=function(b){return this.each(function(){var a=c(this),
e=a.data("user-multipicker");if(e){if("string"===typeof b)e[b]()}else e=c.extend({},a.data(),"object"===typeof b&&b),a.data("user-multipicker",new g(this,e))})};c.fn.userMultiPicker.Constructor=g;c.fn.userMultiPicker.defaults=c.extend({},c.fn.multiPicker.defaults,{excludeUsers:[],excludeProjects:[],groupInputName:null,enableGroups:!1,maxItems:20});var a;c.fn.userMultiPicker.Promise=function(b){return a=a||c.when(c.ajax("/users",{data:{fields:["User","FullName"],format:"json"}}),c.ajax("/groups",{data:{fields:["Group"],
format:"json"}})).then(function(a,e){var f=[];c.each(a[0],function(){f.push(b.makeUserItem(this))});c.each(e[0].groups,function(){f.push(b.makeGroupItem(this))});return f})}})(window.jQuery);
(function(c){function g(a,b,d,e,f){var h=/([^\[\]\s]*)\[([^\[\]\s]*)\](.*)/i;if(h.test(b)&&!e){var j=h.exec(b);b=j[1];var h=j[2],j=j[3],k=!h||c.isNumeric(h),l=a[b]=a[b]||(k?[]:{});k&&!j?f(a,b,d):g(l,h+j,d,e,f)}else e&&(void 0!==a[b]&&!c.isArray(a[b]))&&(a[b]=[a[b]]),f(a,b,d)}c.deparam=function(a,b,d){var e=function(a,d,e){if(b)switch(e){case "undefined":e=null;break;case "null":case "":e=null;break;case "true":e=!0;break;case "false":e=!1;break;default:e=c.isNumeric(e)?+e:e}else e=e||"";c.isArray(a[d])?
a[d].push(e):a[d]=e};void 0===d&&(d=c.ajaxSettings.traditional);a=a.replace(/^\?/,"").replace(/\+/g,"%20").split("\x26");var f={},h,j,k;for(h=0;h<a.length;h++)j=a[h].split("\x3d"),k=decodeURIComponent(j[0]),j=1<j.length?decodeURIComponent(j[1]):"",g(f,k,j,d,e);return f}})(window.jQuery);(function(c){c.isScrolledToBottom=function(g,a){g=g||window;a=a||document;return c(g).scrollTop()+2>=c(a).height()-c(g).height()}})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
(function(a){a(function(){a("body").tooltip({selector:"[title]:not(.manual-tooltip)",container:"body"})});var f=a.fn.tooltip;a.fn.tooltip=function(c){if(a.isPlainObject(c)&&(c.isDelegated=c.isDelegated||!!c.selector,this.addClass(!c.isDelegated&&"manual"===c.trigger?"manual-tooltip":""),"manual"===c.trigger&&this.closest(".modal").length))this.one("show",function(e){e.target===this&&a(this).data("tooltip").tip().addClass("modal-tooltip")});this.off("show.tooltip.class");this.on("show.tooltip.class",
function(e){e.target===this&&a(this).data("tooltip")&&(e=a(this).data("tooltip").options,a(this).data("tooltip").tip().addClass(e.customClass||e.customclass))});return f.apply(this,arguments)};a.fn.tooltip.Constructor=f.Constructor;a.fn.tooltip.defaults=f.defaults;a.fn.tooltip.defaults.animation=!1;a.fn.tooltip.defaults.delay={show:150,hide:0};var g=a.fn.tooltip.Constructor.prototype,h=g.applyPlacement;g.applyPlacement=function(a,e){var b=this.tip(),l=b[0].offsetWidth,d=document.documentElement.clientWidth-
(a.left+l);0>d&&(a.left+=d);var f=h.apply(this,[a,e]);0>d&&(b=b[0].offsetWidth,this.replaceArrow(2*d-l+b,b,"left"));return f};var d=g.setContent;g.setContent=function(){d.apply(this,arguments);"object"===typeof this.options.title&&this.tip().find(".tooltip-inner").empty().append(this.options.title)}})(window.jQuery);
(function(a){var f=a.fn.popover;a.fn.popover=function(g){this.off("show.popover.class");this.on("show.popover.class",function(f){f.target===this&&a(this).data("popover")&&(f=a(this).data("popover").options,a(this).data("popover").tip().addClass(f.customClass||f.customclass))});return f.apply(this,arguments)};a.fn.popover.Constructor=f.Constructor;a.fn.popover.defaults=f.defaults;a.fn.popover.Constructor.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")}})(window.jQuery);
(function(a){a.fn.collapse.Constructor.prototype.dimension=function(){this.$element.addClass("collapsing");return this.$element.hasClass("width")?"width":"height"};a(document).on("shown.collapse.data-api hidden.collapse.data-api",".collapse",function(f){this===f.target&&a(this).removeClass("collapsing")})})(window.jQuery);
(function(a){var f=a.fn.dropdown.Constructor.prototype,g=f.toggle,h=f.keydown,d=function(e){var b=e.data("active-target");if(!b||!b.parentNode)e.removeClass("open").detach();else{var c="function"===typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},b=a.extend({},c,a(b).offset());e.hasClass("pull-right")?e.offset({top:b.top+b.height,left:b.left+b.width-e[0].offsetWidth}):e.offset({top:b.top+b.height,left:b.left})}},c=function(){a(".contained-dropdown").removeClass("open").detach()};
f.toggle=function(e){var b,f,j=a(this),h=j.attr("data-dropdown-container");if(h){if(j.is(".disabled, :disabled"))return;(b=j.data("dropdown-menu"))?f=b.hasClass("open"):(b=j.parent().find(".dropdown-menu"),b.detach(),b.removeClass("open").addClass("contained-dropdown"),j.data("dropdown-menu",b))}c();g.apply(this,arguments);h&&b&&!f&&(b.data("active-target",this),b.addClass("open").css({top:0,left:0}).appendTo(h),d(b));return!1};f.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var b=a(this),
c=b.is("[role\x3dmenu]")?b:b.data("dropdown-menu"),d=c&&c.data("active-target");!d||!c||!c.is(b)?h.apply(this,arguments):(e.preventDefault(),e.stopPropagation());d&&(c&&!b.is(".disabled, :disabled"))&&(d=c.hasClass("open"),!d||d&&27===e.keyCode?(27===e.which&&a(c.data("active-target")).focus(),b.is(c)&&b.click()):(c=a("li:not(.divider):visible a",c),c.length&&(b=c.index(c.filter(":focus")),38===e.keyCode&&0<b&&b--,40===e.keyCode&&b<c.length-1&&b++,-1===b&&(b=0),c.eq(b).focus())))}};a(window).on("resize.dropdown.clear",
c);a(document).off("click.dropdown.data-api","[data-toggle\x3ddropdown]").off("keydown.dropdown.data-api","[data-toggle\x3ddropdown], [role\x3dmenu]").on("click.dropdown.container.data-api",c).on("click.dropdown.data-api","[data-toggle\x3ddropdown]",f.toggle).on("keydown.dropdown.data-api","[data-toggle\x3ddropdown], [role\x3dmenu]",f.keydown).on("shown.dropdown.position hidden.dropdown.position",function(){a(".contained-dropdown").each(function(){d(a(this))})})})(window.jQuery);
(function(a){function f(d,c){this.options=c;this.$el=a(d);this.$parent=this.$el.closest(this.options.parentSelector);this.$target=this.$parent.find(this.options.targetSelector);this.$boundary=this.options.boundary?a(this.options.boundary):this.$parent;this.$el.addClass("swarm-affix");this.$target.hasClass("in")&&this.listen();this.$target.on("hide show",function(b){b.target!==this&&a.fn.swarmAffix.checkAll()});var e=this;this.$target.on("hidden shown",function(b){b.target===this&&("hidden"===b.type&&
e.check(),e.listen("hidden"===b.type));a.fn.swarmAffix.checkAll()});if(this.options.scrollToTarget)this.$target.on("hide",function(b){b.target===this&&(b=e.$parent.offset().top-e.getFixedTop(),b<a(window).scrollTop()&&a("html, body").animate({scrollTop:b},"fast","swing"))})}var g=null;f.prototype={listen:function(d){this.eventListener=this.eventListener&&a(window).off("scroll resize",this.eventListener)&&null;if(!d){var c=a.proxy(this.check,this);this.eventListener=function(a){(a.target===this||a.target===
document||a.target===document.documentElement||a.target===document.body)&&swarm.requestFrame(c)};a(window).on("scroll resize",this.eventListener)}},getFixedTop:function(){null===g&&(g=0,a("."+this.options.offsetClass).each(function(){if(a(this).hasClass("swarm-affix"))return!1;"fixed"===a(this).css("position")&&(g+=this.offsetHeight)}),setTimeout(function(){g=null},1E3));return g},check:function(){var d=this.$el[0].offsetHeight;if(d){var c="top"===this.options.position,e=a(window).scrollTop(),b=this.$boundary[0].getBoundingClientRect(),
f=c&&this.getFixedTop(),g=c?e+f:e+a(window).height()-d,h=b.top+e+b.height,k=this.showAffix,m=this.showAffixMiddle,n=this.showAffixBottom;this.showAffix=b.top+e<=g&&g<=h&&this.$target.hasClass("in");this.showAffixMiddle=this.showAffixBottom=!1;this.options.animate&&(this.showAffixMiddle=this.showAffix&&g>=h-b.height/2,this.showAffixBottom=this.showAffix&&g>=h-d);d=a.proxy(function(){this.$el.toggleClass("affix "+(c?this.options.offsetClass:""),this.showAffix);this.options.animate&&(this.showAffix&&
!k&&this.$el.css({top:"",bottom:""}),this.$el.toggleClass("affix-middle",this.showAffixMiddle),this.$el.toggleClass("affix-bottom",this.showAffixBottom))},this);if(k!==this.showAffix||m!==this.showAffixMiddle||n!==this.showAffixBottom)this.options.animate&&this.showAffix&&!k?(c?this.$el.css("top",(b.top>=f-10?f:b.top+1)+"px"):this.$el.css("bottom",(-10<=b.bottom?0:b.bottom)+"px"),swarm.requestFrame(d)):d()}}};a.fn.swarmAffix=function(d){a.fn.swarmAffix.checkAll(!0);return this.each(function(){var c=
a.data(this,"swarm-affix");c?d&&d.boundary&&(c.$boundary=a(d.boundary)):(d=a.extend({},a.fn.swarmAffix.defaults,d),c=new f(this,d),a.data(this,"swarm-affix",c));swarm.requestFrame(function(){c.check()})})};var h=[!1,!1];a.fn.swarmAffix.checkAll=function(d){var c=d?0:1;swarm.requestFrame(function(){h[c]||(a(".swarm-affix"+(d?".affix":"")).each(function(){var c=a.data(this,"swarm-affix");c.eventListener&&c.check()}),h[c]=!0,setTimeout(function(){h[c]=!1},0))})};a.fn.swarmAffix.defaults={offsetClass:"offset-fixed",
parentSelector:".diff-wrapper",targetSelector:".diff-details",boundary:null,scrollToTarget:!1,animate:!0,position:"top"}})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
var swarm={requestFrame:function(a){window.requestAnimationFrame?window.requestAnimationFrame(a):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a):setTimeout(a,1E3/60)},encodeURIPath:function(a){return encodeURIComponent(a).replace(/\%2F/g,"/")},encodeURIDepotPath:function(a){return swarm.encodeURIPath(a.replace(/^\/*/,""))},url:function(a){var b=$("body").data("base-url")||"";return"/"===a.charAt(0)&&0!==a.indexOf(b)?b+a:a},localStorage:{set:function(a,b){return!swarm.localStorage.canStore()?
null:window.localStorage.setItem(a,b)},get:function(a){return!swarm.localStorage.canStore()?null:window.localStorage.getItem(a)},canStore:function(){try{return void 0!==window.localStorage&&null!==window.localStorage}catch(a){return!1}}},query:{first:function(a,b){b=b||document;return(b=b instanceof window.jQuery?b[0]:b)&&b.querySelector?$(b.querySelector(a)):$(a,b).first()},all:function(a,b){b=b||document;return(b=b instanceof window.jQuery?b[0]:b)&&b.querySelectorAll?$(b.querySelectorAll(a)):$(a,
b)},apply:function(a,b,c){var d;for(d=0;d<b.length;d++)swarm.query.all(a,b[d]).each(c)}}};
swarm.history={supported:!(!window.history||!window.history.pushState),isPageShow:!1,initialized:!1,init:function(){swarm.history.switchTab();if(!swarm.history.initialized)if(swarm.history.supported)$(document).on("shown.swarm.tab",'[data-toggle\x3d"tab"]',function(){var a=window.history.state&&window.history.state.tab,c=$(this).attr("href");c&&c!==a&&swarm.history.pushState({tab:c},null,c)}),swarm.history.onPopState(function(a){a=a.originalEvent;a.state&&(a.state.tab&&!1!==a.state.autoSwitchTab)&&
swarm.history.switchTab(a.state.tab)}),$(window).on("pageshow",function(){swarm.history.isPageShow=!0;setTimeout(function(){swarm.history.isPageShow=!1},0)}),$(window).on("beforeSetState",function(a,c){$.extend(c,{tab:$(".nav-tabs").find("li.active \x3e a[href]").attr("href"),route:swarm.history.getPageRoute()})}),swarm.history.initialized=!0,swarm.history.doStateUpdate();else{var a=location.hash?"":$(".nav-tabs").find("li.active \x3e a[href]").attr("href");$(document).on("shown.swarm.tab",'[data-toggle\x3d"tab"]',
function(){var b=$(this).attr("href");(b=b.substr(b.indexOf("#")))&&(b!==location.hash&&(b!==a||location.hash))&&location.assign(location.pathname+location.search+b)});$(window).on("hashchange.swarm.history",function(){swarm.history.switchTab(location.hash||a)})}},replaceState:function(a,b,c){if(swarm.history.supported){var d={};$(window).triggerHandler("beforeSetState",[d,"replace"]);a=$.extend(d,a);window.history.replaceState(a,b,c)}},pushState:function(a,b,c){if(swarm.history.supported){var d=
{};$(window).triggerHandler("beforeSetState",[d,"push"]);a=$.extend(d,a);window.history.pushState(a,b,c)}},clearState:function(){swarm.history.supported&&window.history.replaceState(null,null,null)},doStateUpdate:function(){swarm.history.supported&&swarm.history.initialized&&swarm.history.replaceState(null,null,null)},onPopState:function(a){if(swarm.history.supported)$(window).on("popstate",function(b){swarm.history.isPageShow||a.apply(this,arguments)})},getPageRoute:function(){var a=$("body")[0].className.match(/\broute\-(\S+)/i);
return a&&a[1]},switchTab:function(a){if((a=(a||window.location.hash||$(".nav-tabs").find("li.active \x3e a[href]").attr("href")||"").replace(/^#/,""))&&$('.nav-tabs a[href\x3d"#'+a+'"]').length&&!$('.nav-tabs li.active a[href\x3d"#'+a+'"]').length){var b=$("#"+a+".fade"),c=b.parent().find("\x3e .fade.active");b.removeClass("fade");c.removeClass("fade");$('.nav-tabs a[href\x3d"#'+a+'"]').one("shown",function(){c.addClass("fade");b.addClass("in fade")}).tab("show")}},patchPartialSuppport:function(){if(swarm.history.supported&&
swarm.has.partialHistorySupport()){var a=window.history.pushState,b=window.history.replaceState,c=window.onpopstate;window.history.state=null;window.history.pushState=function(b,c,e){window.history.state=b;return a.call(window.history,b,c,e)};window.history.replaceState=function(a,c,e){window.history.state=a;return b.call(window.history,a,c,e)};window.onpopstate=function(a){window.history.state=a.state;c&&c.call(window,a)}}}};
swarm.modal={show:function(a){var b=function(){return 0>parseInt($(this).css("marginLeft"),10)?-($(this).width()/2):0};$(a).css({width:"auto",marginLeft:""}).modal("show").css({marginLeft:b});if(!$(a).data("resize-swarm-modal")){var c=$(window).on("resize",function(){$(a).css("marginLeft","");$(a).css({marginLeft:b})});$(a).data("resize-swarm-modal",c)}}};
swarm.tooltip={showConfirm:function(a,b){$(a).popover($.extend({trigger:"manual",container:"body",placement:"top"},b,{html:!0,content:'\x3cdiv class\x3d"pad2 padw0 content"\x3e'+(b.content||"")+'\x3c/div\x3e\x3cdiv class\x3d"buttons center pad2 padw0"\x3e'+(b.buttons.length?b.buttons.join(""):"")+"\x3c/div\x3e",template:'\x3cdiv class\x3d"popover popover-confirm" tabindex\x3d"0"\x3e \x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e \x3cdiv class\x3d"popover-content center"\x3e\x3c/div\x3e\x3c/div\x3e'})).popover("show");
$(a).data("popover").tip().focus();return $(a).data("popover")}};
swarm.form={checkInvalid:function(a){var b=$(a).find(".invalid").length;try{b+=$(a).find(":invalid").length}catch(c){b+=$(a).find("[required]:enabled").filter(function(){return $(this).val()?!1:!0}).length}$(a).toggleClass("invalid",0<b);$(a).find('[type\x3d"submit"]').not(".loading").prop("disabled",!!b)},post:function(a,b,c,d,f){var e=$(b).find('[type\x3d"submit"]');swarm.form.disableButton(e);swarm.form.clearErrors(b);$.ajax(a,{type:"POST",data:f?f(b):$(b).serialize(),complete:function(a,f){swarm.form.enableButton(e);
$(b).is(".invalid")&&e.prop("disabled",!0);if("success"===f&&a.responseText){var g=JSON.parse(a.responseText);swarm.form.postHandler.apply(this,[b,c,d,g])}}})},postHandler:function(a,b,c,d){a=$(a);if(!1===d.isValid){var f=d.error?[d.error]:[],e=$.Event("form-errors");e.action="error";$.each(d.messages||[],function(b,c){var d=swarm.form.getElement(a,b).closest(".controls"),e=d.closest(".control-group");e.addClass("error");e.one("focusin.swarm.form.error",function(){swarm.form.clearErrors(this)});$.each(c,
function(a,b){if(d.length)return $("\x3cspan /\x3e").text(b).addClass("help-block help-error").appendTo(d),!1;f.push(b)})});f.length&&(c=c&&$(c)||a,c.prepend($.templates('\x3cdiv class\x3d"alert"\x3e{{for errors}}\x3cdiv\x3e{{\x3e#data}}\x3c/div\x3e{{/for}}\x3c/div\x3e').render({errors:f})),a.one("focusin.swarm.form.error",function(){c.find("\x3e .alert").remove()}));a.trigger(e)}else d.redirect&&(swarm.form.disableButton($(a).find('[type\x3d"submit"]')),window.location=swarm.url(d.redirect));b&&
b(d,a)},getElement:function(a,b){return $(a).find('[name\x3d"'+b+'"], [name^\x3d"'+b+'["]')},clearErrors:function(a,b){a=$(a);a.is("form")||(a=a.closest(".control-group.error"));a.find(".alert").remove();a.find(".help-error").remove();a.find(".control-group.error").removeClass("error");a.removeClass("error");if(!b){var c=$.Event("form-errors");c.action="clear";a.trigger(c)}},disableButton:function(a){$(a).prop("disabled",!0).addClass("loading");var b=setTimeout(function(){$(a).addClass("animate")},
500);$(a).data("animationTimeout",b)},enableButton:function(a){$(a).prop("disabled",!1).removeClass("loading animate");clearTimeout($(a).data("animationTimeout"))}};swarm.about={show:function(){$(".about-dialog.modal").length?swarm.modal.show(".about-dialog.modal"):$.ajax({url:"/about",data:{format:"partial"}}).done(function(a){$("body").append(a);$(".about-dialog .token").click(function(){$(this).select()})})}};
swarm.info={init:function(){swarm.info.refreshLog();$("iframe").load(function(){swarm.info.resizeIframe(this)});$('a[data-toggle\x3d"tab"]').on("shown",function(){var a=$(this).attr("href");"#phpinfo"===a&&swarm.info.resizeIframe($("iframe")[0]);$(".nav-tabs .btn-group").toggleClass("hidden","#log"!==a)});$(".btn-refresh").click(function(a){a.preventDefault();swarm.info.refreshLog()});$('.nav-tabs .active a[href\x3d"#log"]').length&&$(".nav-tabs .btn-group").removeClass("hidden")},refreshLog:function(){var a=
$(".swarmlog-latest tbody");a.empty();a.append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading animate"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e");$.ajax({url:"/info/log",data:{format:"partial"}}).done(function(a){$(".swarmlog-latest tbody").html(a);$(".timeago").timeago();$("tr.has-details").click(function(){var a=$(this).next("tr.entry-details");$(this).find(".icon-chevron-right").toggleClass("icon-chevron-down");a.toggle()})})},resizeIframe:function(a){a.style.height=
a.contentWindow.document.body.offsetHeight+"px"}};
swarm.has={nonStandardResizeControl:function(){return!!navigator.userAgent.match(/webkit/i)},historyAnimation:function(){return!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i))},fullFileApi:function(){return!(void 0===window.FormData||void 0===window.File)},_cssCalcSupport:null,cssCalcSupport:function(){if(null===swarm.has._cssCalcSupport){var a=$("\x3cdiv /\x3e",{css:{position:"absolute",top:"-9999px",left:"-9999px",width:"calc(10px + 5px)"}}).appendTo("body");swarm.has._cssCalcSupport=
0!==a[0].offsetWidth;a.remove()}return swarm.has._cssCalcSupport},partialHistorySupport:function(){return!!(window.history&&void 0===window.history.state)},xhrUserAbortAsError:function(){return!(!navigator.userAgent.match(/gecko/i)||!navigator.userAgent.match(/firefox/i)||navigator.userAgent.match(/webkit/i)||navigator.userAgent.match(/trident/i))}};
swarm.bees={origin:null,sprites:[],scale:1,init:function(a,b){swarm.bees.origin=$('\x3cdiv class\x3d"bees-origin"\x3e\x3c/div\x3e');swarm.bees.origin.appendTo("body");swarm.bees.origin.css({position:"fixed",left:a+"px",top:b+"px",pointerEvents:"none"});var c=null;$("body").mousemove(function(a){c||(c=setTimeout(function(){setTimeout(function(){swarm.bees.origin.css({top:a.pageY-50+"px",left:a.pageX-50+"px"})},100);15>swarm.bees.sprites.length&&0.25>Math.random()&&swarm.bees.makeBee();c=null},10))});
swarm.bees.makeBee();setInterval(function(){var a;for(a=0;swarm.bees.sprites.length&&a<Math.round(swarm.bees.sprites.length/5)+1;a++)swarm.bees.killBee(Math.floor(Math.random()*swarm.bees.sprites.length))},1E3)},makeBee:function(){var a=$('\x3cdiv class\x3d"little-bee"\x3e\x3cimg src\x3d"'+swarm.url("/swarm/img/errors/little-bee.png")+'"\x3e\x3c/div\x3e');swarm.bees.randomize(a);swarm.bees.sprites.push(a);a.appendTo(swarm.bees.origin)},killBee:function(a){var b=swarm.bees.sprites[a];b&&(b.fadeOut(500,
function(){$(this).remove()}),swarm.bees.sprites.splice(a,1))},randomize:function(a){a.find("img").css({width:Math.floor(30*Math.random())+5});var b=Math.floor(100*Math.random())+50,c=Math.floor(100*Math.random())+50;a.removeClass("clockwise counter-clockwise");a.addClass(0.5>Math.random()?"clockwise":"counter-clockwise");a.addClass(0.5>Math.random()?"fast":"slow");a.css({width:b+"px",height:c+"px"})}};
$(function(){if($.support.transition)$("body.error").one("mousemove",function(a){swarm.bees.init(a.pageX,a.pageY)});$("body").is(".route-home.authenticated")&&$.getJSON(swarm.url("/queue/status"),function(a){0===a.workers&&$("body \x3e .container-fluid").first().prepend('\x3cdiv class\x3d"alert alert-error center"\x3e'+swarm.te("Hmm... no queue workers? Ask your administrator to check the")+' \x3ca href\x3d"'+swarm.url("/docs/setup.worker.html")+'"\x3e'+swarm.te("worker setup")+"\x3c/a\x3e.\x3c/div\x3e")})});/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.activity={_loading:!1,init:function(b){var c=$("[class~\x3d'stream-"+(b||"global")+"']"),e=swarm.localStorage.get("activity.type");e&&c.find("th .nav-pills a.type-"+e).closest("li").addClass("active");c.find("th .nav-pills a").click(function(){var a=$(this).attr("class").match(/type-([\w]+)/).pop(),c=$(this).closest("li").is(".active");$(this).closest(".nav-pills").find("li").removeClass("active");$(this).closest("li").toggleClass("active",!c);swarm.activity.load(b,!0);swarm.localStorage.set("activity.type",
!c?a:null);return!1});c.find("ul.dropdown-menu a").on("click",function(a){a.preventDefault();a=$(this).closest("li").data("scope");swarm.localStorage.set("activity.scope",a);swarm.activity.load(b,!0)});c.find(".dropdown-toggle").on("click",function(a){$(this).closest(".dropdown").length||a.stopPropagation()});$(document).on("swarm-login",function(){swarm.activity.load(b,!0)})},load:function(b,c,e){if(swarm.activity._loading){if(!c)return;swarm.activity._loading.abort();swarm.activity._loading=!1}var a=
$("[class~\x3d'stream-"+(b||"global")+"']");if(a.length&&(c&&(a.data("last-seen",null),a.data("end-of-data",null),a.find("tbody").empty()),!a.data("end-of-data"))){a.find("tbody").append('\x3ctr class\x3d"loading muted hide"\x3e \x3ctd colspan\x3d"3"\x3e  \x3cspan class\x3d"loading"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e \x3c/td\x3e\x3c/tr\x3e");setTimeout(function(){a.find("tbody tr.loading").removeClass("hide").find(".loading").addClass("animate")},void 0===e?2E3:0);var l=b;c=swarm.localStorage.get("activity.scope")||
"user";var g=swarm.user.getAuthenticatedUser(),j=a.is(".switchable")&&null!==g,h=j&&"user"===c;h&&(b="personal-"+g.id,a.addClass("stream-"+b));var f=a.data("type-filter");null===f&&(f=a.find("th .nav-pills li.active a"),f=f.length&&f.attr("class").match(/type-([\w]+)/).pop());c=a.data("last-seen");var k=swarm.url("/activity")+(b?"/streams/"+encodeURIComponent(b):"");swarm.activity._loading=$.ajax({url:k,data:{max:50,after:c,type:f||null},dataType:"json",success:function(c){a.find("tbody tr.loading").remove();
(null===c.lastSeen||c.lastSeen===a.data("last-seen"))&&a.data("end-of-data",!0);a.data("last-seen",c.lastSeen);c=c.activity;if(!swarm.localStorage.get("activity.scope")&&h&&!c.length)swarm.localStorage.set("activity.scope","all"),swarm.activity._loading=!1,swarm.activity.load(l,!0);else{j&&a.find("thead .activity-title").removeClass("default-title").text(h?swarm.t("Followed Activity"):swarm.t("All Activity"));a.find("thead .activity-dropdown").toggleClass("dropdown",j);a.toggleClass("stream-personal",
h);a.find("a.rss-link").attr("href",k+"/rss");!a.find("tbody tr").length&&(!c.length&&a.data("end-of-data"))&&a.find("tbody").append($('\x3ctr class\x3d"activity-info"\x3e\x3ctd\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e'+swarm.te(f?"No matching activity.":"No activity.")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"));var g;$.each(c,function(c,d){var b=d.comments[0];d.comments={count:b,label:b?swarm.tp("%s comment","%s comments",b):swarm.t("Add a comment"),title:d.comments[1]?swarm.tp("%s archived",
null,d.comments[1]):"",url:d.url+(d.url&&!d.url.match("#")?"#comments":"")};d.condensed=a.is(".condensed");d.rowClass=(d.topic?"has-topic ":"")+(d.type?"activity-type-"+d.type+" ":"")+(d.action?"activity-action-"+d.action.toLowerCase().replace(/ /g,"-"):"");b=d.target.match(/^(\w+) (\d+)(?: \((.+), line (\d+)\))?$/)||[];if("review"===b[1]||"change"===b[1])d.target=b[1]+" %s",d.targetReplacements=b.slice(2),d.targetReplacements[1]&&(d.target+=" (%s, line %s)");g=$.templates('\x3ctr id\x3d"{{\x3eid}}" class\x3d"row-main {{\x3erowClass}}"\x3e\x3ctd rowspan\x3d"2" width\x3d64\x3e{{:avatar}}\x3c/td\x3e\x3ctd class\x3d"activity-body"\x3e{{if !condensed}}\x3csmall class\x3d"pull-right"\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3edate}}"\x3e\x3c/span\x3e\x3c/small\x3e{{/if}}{{if user}}{{if userExists}}\x3ca href\x3d"{{url:"/users"}}/{{urlc:user}}"\x3e{{/if}}\x3cstrong\x3e{{\x3euser}}\x3c/strong\x3e{{if userExists}}\x3c/a\x3e{{/if}} {{/if}}{{if behalfOf}} ({{te:"on behalf of"}} {{if behalfOfExists}}\x3ca href\x3d"{{url:"/users"}}/{{urlc:behalfOf}}"\x3e{{/if}}\x3cstrong\x3e{{\x3ebehalfOf}}\x3c/strong\x3e{{if behalfOfExists}}\x3c/a\x3e{{/if}}) {{/if}}{{te:action}} {{if url}}\x3ca href\x3d"{{:url}}"\x3e{{/if}}{{te:target targetReplacements}}{{if url}}\x3c/a\x3e{{/if}}{{if preposition \x26\x26 projectList}} {{te:preposition)}} {{:projectList}}{{/if}}\x3cp class\x3d"description force-wrap"\x3e{{:description}}\x3c/p\x3e\x3c/td\x3e\x3ctd rowspan\x3d"2" class\x3d"color-stripe"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d"{{\x3eid}}-append" class\x3d"row-append"\x3e\x3ctd\x3e{{if condensed}}\x3csmall\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3edate}}"\x3e\x3c/span\x3e\x3c/small\x3e{{/if}}{{if topic}}\x3cdiv class\x3d"comment-link{{if !comments.count}} no-comments{{/if}}"\x3e\x3csmall\x3e\x3ci class\x3d"icon-comment"\x3e\x3c/i\x3e \x3ca href\x3d"{{:comments.url}}" title\x3d"{{\x3ecomments.title}}"\x3e{{\x3ecomments.label}}\x3c/a\x3e\x3c/small\x3e\x3c/div\x3e{{/if}}\x3c/td\x3e\x3c/tr\x3e\x3ctr class\x3d"row-spacing"\x3e\x3ctd colspan\x3d"3"\x3e\x3c/td\x3e\x3c/tr\x3e').render(d);
b=$(g);a.find("tbody").append(b);b.find("p.description").expander();b.find(".timeago").timeago()});e=(void 0===e?50:e)-c.length;if(e>Math.round(25)||a.height()<$(window).height())return swarm.activity._loading=!1,swarm.activity.load(b,!1,e);setTimeout(function(){swarm.activity._loading=!1},500)}}})}}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.user={login:function(a){a=a&&$('\x3cdiv class\x3d"alert" /\x3e').text(a);$(".login-dialog.modal").length?(swarm.form.clearErrors(".login-dialog.modal form",!0),$(".login-dialog.modal .modal-body").prepend(a),swarm.modal.show(".login-dialog.modal")):$.ajax({url:"/login",data:{format:"partial"}}).done(function(c){$("body").prepend(c);$(".login-dialog.modal .modal-body").prepend(a)})},follow:function(a,c,b){b=$(b);swarm.form.disableButton(b);b.tooltip("destroy");var e=b.is(".following"),f=e?"unfollow":
"follow";$.post("/"+f+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(c),function(a){swarm.form.enableButton(b);a.isValid&&(b.text(e?swarm.t("Follow"):swarm.t("Unfollow")),b.toggleClass("following"),b.tooltip({title:swarm.t(e?"No longer following %s":"Now following %s",[c]),trigger:"manual"}).tooltip("show"),swarm.user.updateFollowersSidebar(f),setTimeout(function(){b.tooltip("destroy")},3E3))});return!1},updateFollowersSidebar:function(a){var c=swarm.user.getAuthenticatedUser(),b=$(".profile-sidebar .metrics .followers .count"),
e=$(".profile-sidebar .followers.profile-block"),f=e.find(".avatars");if(c){var d=f.find('img[data-user\x3d"'+c.id+'"]').closest("span");d.css("opacity","follow"===a?1:0.2);"follow"===a&&!d.length&&(d=f.find("\x3e div").last(),d=d.length&&5>d.children().length&&d||$("\x3cdiv /\x3e").appendTo(f),$('\x3cspan class\x3d"border-box" /\x3e').html(c.avatar).appendTo(d),e.removeClass("hidden"));b.text(parseInt(b.text(),10)+("follow"===a?1:-1))}},getAuthenticatedUser:function(){return $("body").data("user")}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.project={initEdit:function(a,b,c,d){var e=$(a).find("#members"),f=$(a).find("#owners");e.userMultiPicker({required:!0,itemsContainer:$(a).find(".members-list"),inputName:"members",groupInputName:"subgroups",enableGroups:d,excludeProjects:[c]});f.userMultiPicker({itemsContainer:$(a).find(".owners-list"),inputName:"owners",required:function(){return $(a).find(".checkbox-owners").prop("checked")}});$(a).find(".checkbox-owners").on("click",function(){var b=$(a).find(".checkbox-owners").prop("checked");
$(a).find("#owners").userMultiPicker("updateRequired");$(a).find(".owners-list input").prop("disabled",!b)});swarm.project.branch.init(a);$(a).find(".swarm-branch-group").on("click",swarm.project.branch.openNewSubForm);$(a).on("click.swarm.branch.clear",".branches .clear-branch-btn",function(){$(this).parent().find(".subform-identity-element").val("");swarm.project.branch.closeSubForm($(this).closest(".btn-group").find(".btn.dropdown-toggle"))});$(a).on("click.swarm.branch.close",".branches .close-branch-btn",
function(){swarm.project.branch.closeSubForm($(this).closest(".btn-group").find(".btn.dropdown-toggle"))});$(a).find(".automated-tests .help-details").popover({container:".automated-tests",trigger:"hover focus"});$(a).find(".automated-deployment .help-details").popover({container:".automated-deployment",trigger:"hover focus"});swarm.form.checkInvalid($(a).find("form"));$(a).find("form").submit(function(c){c.preventDefault();swarm.form.post(b,$(a).find("form"),null,null,function(a){var b=$.deparam($(a).serialize());
$.isArray(b.branches)&&(b.branches=b.branches.filter(function(a){return void 0!==a}));b=$.extend({owners:null},b);!b.branches&&!$(a).find(".branches").is(".readonly")&&(b.branches=null);b=$.extend({members:null},b);d&&(b=$.extend({subgroups:null},b));return b})});$(a).find(".btn-delete").on("click",function(a){a.preventDefault();var b=$(this),d=swarm.tooltip.showConfirm(b,{placement:"top",content:swarm.te("Delete this project?"),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+
swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});d.tip().on("click",".btn-cancel",function(){d.destroy()});d.tip().on("click",".btn-confirm",function(){swarm.form.disableButton(d.tip().find(".btn-confirm"));d.tip().find(".buttons .btn").prop("disabled",!0);$.post("/projects/delete/"+encodeURIComponent(c),function(a){if(a.isValid)window.location.href="/";else{d.destroy();var c=swarm.tooltip.showConfirm(b,{placement:"top",
content:a.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+swarm.te("Ok")+"\x3c/button\x3e"]});c.tip().on("click",".btn",function(){c.destroy()})}})})});e=function(){var a="",a="URL"===$("select#postFormat").val()?"foo\x3dbar\x26baz\x3dbuzz":'{"foo" : "bar", "baz" : "buzz"}';$("textarea#postBody").attr("placeholder",a)};e();$("select#postFormat").on("change",e);e=function(){var a=$("input#reviewEmails").prop("checked")||$("input#changeEmails").prop("checked");$(".email-flags").find(".help-block").toggleClass("hide",
a)};e();$(".email-flags").find('input[type\x3d"checkbox"]').on("change",e);$("input[type\x3dcheckbox][data-toggle\x3dcollapse]").on("click",function(a){$(this).parent().siblings("div.body").hasClass("collapsing")&&a.preventDefault()})},branch:{_branchIndex:0,init:function(a){$(a).find(".control-group.branches .existing").each(function(){swarm.project.branch.initBranch(this);$(this).find(".btn.dropdown-toggle").dropdown();var a=parseInt($(this).find('input[name^\x3d"branches["]').attr("name").match(/branches\[([0-9]+)\]/)[1],
10);a>=swarm.project.branch._branchIndex&&(swarm.project.branch._branchIndex=a+1)});$(a).on("click.moderator.checkbox",".checkbox-moderators",function(){$(this).closest(".control-group-moderators").find(".collapse").collapse($(this).prop("checked")?"show":"hide")});$(a).find(".branches.readonly").find(".swarm-branch-link").hide()},initBranch:function(a){$(a).find(".btn.dropdown-toggle").on("click",function(){if($(this).parent().hasClass("open"))swarm.project.branch.onCloseSubForm(this);else $(".branches .open .btn.dropdown-toggle").not(this).each(function(){swarm.project.branch.onCloseSubForm(this)}),
swarm.project.branch.onOpenSubForm(this)});$("html").on("click.swarm.branchgroup.close",function(){swarm.project.branch.onCloseSubForm($(a).find(".btn.dropdown-toggle"))});var b=function(){var b=$(a).closest(".branch-button"),c=b.find(".dropdown-subform");swarm.form.checkInvalid(c);b.find(".btn.dropdown-toggle").toggleClass("btn-danger",c.is(".invalid"));c.find(".btn.close-branch-btn").prop("disabled",c.is(".invalid"))};$(a).find("input,textarea").on("input keyup blur",b);var c=$(a).find("input.input-moderators");
c.userMultiPicker({itemsContainer:$(a).find(".moderators-list"),disabled:$(a).closest(".branches").is(".readonly"),onUpdate:function(){b();var c=$(a).find(".checkbox-moderators:checked").length?$.map(this.getSelected(),function(a){return a.label}):[],e=c.length?swarm.tp("%s Moderator","%s Moderators",c.length):"";this.$element.closest(".branch-button").find(".moderators-info").text(e).attr({"data-original-title":c.join(", "),title:""})},required:function(){return $(a).find(".checkbox-moderators").prop("checked")}});
$(a).find(".checkbox-moderators").on("click",function(){var d=$(this).prop("checked");$(a).find(".moderators-list input").prop("disabled",!d);c.userMultiPicker("update");b()});b();$(a).closest(".branches").is(".readonly")&&$(a).find("input,textarea,.item-remove,.clear-branch-btn").prop("disabled",!0)},onOpenSubForm:function(a){setTimeout(function(){$(a).parent().find(".subform-identity-element").focus()},0)},onCloseSubForm:function(a){var b=$(a).parent().find(".subform-identity-element").val(),c=
$(a).closest("form");b?$(a).html('\x3cspan class\x3d"branch-label"\x3e\x3c/span\x3e\x3cspan class\x3d"caret"\x3e\x3c/span\x3e').find("span.branch-label").text(b):$(a).closest(".branch-button").remove();swarm.form.checkInvalid(c)},closeSubForm:function(a){swarm.project.branch.onCloseSubForm($(a).dropdown("toggle"))},openNewSubForm:function(a){a.preventDefault();a.stopPropagation();$(".branches .open .btn.dropdown-toggle").each(function(){swarm.project.branch.closeSubForm(this)});a=swarm.project.branch._branchIndex;
var b=$(".controls .branch-template").children().clone(),c=b.find(".subform-identity-element"),d=b.find(".branch-paths"),e=b.find("input.input-moderators");c.attr("name","branches["+a+"][name]");d.attr("name","branches["+a+"][paths]");c.attr("id","branch-name-"+a);d.attr("id","branch-paths-"+a);d.attr("required",!0);c.siblings("label").attr("for","branch-name-"+a);d.siblings("label").attr("for","branch-paths-"+a);e.attr("data-input-name","branches["+a+"][moderators]");swarm.project.branch._branchIndex++;
b.insertBefore($(this).parent());swarm.project.branch.initBranch(b);b.find(".btn.dropdown-toggle").dropdown("toggle");swarm.project.branch.onOpenSubForm(b.find(".btn.dropdown-toggle"))}}};
swarm.projects={init:function(a){a=$(a);var b=function(){var b="user"===(swarm.localStorage.get("projects.scope")||"all")?"My ":"All ";a.find("thead .projects-title").text(swarm.t(b+"Projects"));a.find("thead .projects-dropdown").addClass("dropdown")};$("body").is(".authenticated")&&b();$(document).on("swarm-login",function(){b();swarm.projects.load(a)});a.find("ul.dropdown-menu a").on("click",function(b){b.preventDefault();b=$(this).closest("li").data("scope");swarm.localStorage.set("projects.scope",
b);swarm.projects.update(a,b)});swarm.projects.load(a)},load:function(a){a=$(a);a.addClass("loading");$.ajax("/projects").done(function(b){b.sort(function(a,b){return b.members+b.followers-(a.members+a.followers)});a.find("tbody").empty();$.each(b,function(){this.users=this.members+this.followers;this.score=$.inArray(this,b.slice().reverse())/(b.length-1);this.score=Math.round(10*(0.5*this.score+0.5))/10;var c=$.templates('\x3ctr class\x3d"project{{if isMember}} is-member{{/if}}"\x3e \x3ctd\x3e  \x3cdiv class\x3d"metrics pull-right padw1 muted"\x3e   \x3cspan class\x3d"users badge count-{{\x3eusers}}"         style\x3d"opacity: {{\x3escore}};"         title\x3d"{{\x3emembers}}\x26nbsp;{{tpe:"Member" "Members" members}},                {{\x3efollowers}}\x26nbsp;{{tpe:"Follower" "Followers" followers}}"\x3e     {{\x3eusers}}   \x3c/span\x3e  \x3c/div\x3e  \x3ca href\x3d"{{url:"/projects"}}/{{urlc:id}}" class\x3d"name"\x3e{{\x3ename}}\x3c/a\x3e  \x3cp class\x3d"description muted"\x3e\x3csmall\x3e   {{if description}}{{:description}}{{else}}{{te:"No description"}}{{/if}}  \x3c/small\x3e\x3c/p\x3e \x3c/td\x3e\x3c/tr\x3e').render(this);
a.find("tbody").append(c)});a.find(".description").expander({slicePoint:70});swarm.projects.update(a);a.removeClass("loading")})},update:function(a,b){var c=$("body").is(".authenticated"),d=a.find("tbody tr.is-member"),e="user"===b;b||(e=c&&"user"===swarm.localStorage.get("projects.scope"),e=d.length?e:!1);c="";a.find("thead .projects-dropdown").is(".dropdown")&&(c=e?"My ":"All ");a.find("thead .projects-title").text(swarm.t(c+"Projects"));c=a.find("tbody tr").hide();d=e?d:c;d.show();a.find("tbody tr.projects-info").remove();
d.length||a.find("tbody").append($('\x3ctr class\x3d"projects-info"\x3e\x3ctd\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e'+swarm.te("No projects.")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"));c.removeClass("first-visible last-visible");d.first().addClass("first-visible");d.last().addClass("last-visible")}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.groups={_loading:!1,init:function(){var b=$(".groups-toolbar input[name\x3dkeywords]");$("table.groups").data("keywords",b.val());swarm.groups.load();var a=function(){$("table.groups").data("keywords")!==b.val()&&(swarm.groups._loading&&(swarm.groups._loading.abort(),swarm.groups._loading=!1),$("table.groups").data("keywords",b.val()),swarm.groups.load(!0))},g=function(){a();var c="?keywords\x3d"+encodeURIComponent(b.val());c!==location.search&&swarm.history.pushState(null,null,c)};$(".groups-toolbar .btn-search").on("click",
g);b.on("keypress",function(a){var b=a.keyCode||a.which;"keypress"===a.type&&13!==b||g()});$(document).on("swarm-login",function(){location.reload()});$(window).scroll(function(){$.isScrolledToBottom()&&swarm.groups.load()});swarm.history.onPopState(function(){var c=$.deparam(location.search.replace(/^\?/,""),!1,!0);b.val(c.q||"");a()})},load:function(b){if(swarm.groups._loading){if(!b)return;swarm.groups._loading.abort();swarm.groups._loading=!1}var a=$("table.groups");a.length&&(b&&(a.data("last-seen",
null),a.data("end-of-data",null),a.find("tbody").empty()),a.data("end-of-data")||(a.find("tbody").append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"5"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e"),swarm.groups._loading=$.ajax({url:location.pathname,data:{format:"json",max:50,after:a.data("last-seen"),keywords:a.data("keywords"),fields:"Group name ownerAvatars memberCount description isMember isInGroup emailFlags".split(" "),sort:"-isInGroup,-isEmailEnabled,name",
excludeProjects:!0},dataType:"json",success:function(b){a.find("tbody tr.loading").remove();var c=b.lastSeen;(null===c||c===a.data("last-seen"))&&a.data("end-of-data",!0);a.data("last-seen",c);$.each(b.groups,function(b,c){var j=3,d="",h=[],e=swarm.user.getAuthenticatedUser();e&&c.ownerAvatars.sort(function(b,a){var c=$(b).find("img").data("user"),d=$(a).find("img").data("user");return c===e.id?-1:d===e.id?1:0});$.each(c.ownerAvatars||[],function(b,a){0<j?(j--,d+=a):h.push($(a).attr("title")||$(a).find("img").data("user"))});
h.length&&(d+='\x3cspan class\x3d"more-owners" title\x3d"'+h.join(",")+'"\x3e+'+h.length+"\x3c/span\x3e");c.ownerAvatars=d;var f=[];"1"===c.emailFlags.reviews&&f.push(swarm.te("Reviews"));"1"===c.emailFlags.commits&&f.push(swarm.te("Commits"));c.notifications=f.join(", ");f=$.templates('\x3ctr data-id\x3d"{{\x3eGroup}}" class\x3d"{{if isInGroup}}is-in-group{{/if}}{{if isMember}} is-member{{/if}}"\x3e \x3ctd class\x3d"name"\x3e\x3ca href\x3d"{{url:"/groups"}}/{{urlc:Group}}"\x3e{{\x3ename}}\x3c/a\x3e\x3c/td\x3e \x3ctd class\x3d"description"\x3e{{:description}}\x3c/td\x3e \x3ctd class\x3d"owners"\x3e{{:ownerAvatars}}\x3c/td\x3e \x3ctd class\x3d"members"\x3e  \x3cspan class\x3d"badge" title\x3d"{{if isMember}}{{te:"You are a member"}}{{else}}{{te:"You are not a member"}}{{/if}}"\x3e   {{\x3ememberCount}}  \x3c/span\x3e \x3c/td\x3e \x3ctd class\x3d"notifications"\x3e  {{if notifications}}\x3ci class\x3d"icon-bell" title\x3d"{{\x3enotifications}}" data-custom-class\x3d"group-notifications"\x3e\x3c/i\x3e{{/if}} \x3c/td\x3e\x3c/tr\x3e').render(c);
$(f).appendTo(a.find("tbody"))});!a.find("tbody tr").length&&(!b.length&&a.data("end-of-data"))&&$('\x3ctr class\x3d"groups-info"\x3e \x3ctd colspan\x3d"'+a.find("thead th").length+'"\x3e  \x3cdiv class\x3d"alert border-box pad3"\x3eNo groups.\x3c/div\x3e \x3c/td\x3e\x3c/tr\x3e').appendTo(a.find("tbody"));a.find(".description").expander({slicePoint:90});b=a.find(".is-in-group").last();b.next().length&&b.addClass("last-is-in-group");setTimeout(function(){swarm.groups._loading=!1},500)}})))}};
swarm.group={initEdit:function(b,a,g){var c=$(b).find("#members"),k=$(b).find("#owners");c.userMultiPicker({itemsContainer:$(b).find(".members-list"),inputName:"Users",groupInputName:"Subgroups",enableGroups:!0});k.userMultiPicker({itemsContainer:$(b).find(".owners-list"),inputName:"Owners"});swarm.form.checkInvalid($(b).find("form"));$(b).find("form").submit(function(c){c.preventDefault();swarm.form.post(a,$(b).find("form"),null,null,function(a){a=$.deparam($(a).serialize());return a=$.extend({Owners:null,
Users:null,Subgroups:null},a)})});$(b).find(".btn-delete").on("click",function(a){a.preventDefault();var b=$(this),c=swarm.tooltip.showConfirm(b,{placement:"top",content:swarm.te("Delete this group?"),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});c.tip().on("click",".btn-cancel",function(){c.destroy()});c.tip().on("click",".btn-confirm",
function(){swarm.form.disableButton(c.tip().find(".btn-confirm"));c.tip().find(".buttons .btn").prop("disabled",!0);$.post("/groups/delete/"+encodeURIComponent(g),function(a){if(a.isValid)window.location.href="/";else{c.destroy();var e=swarm.tooltip.showConfirm(b,{placement:"top",content:a.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+swarm.te("Ok")+"\x3c/button\x3e"]});e.tip().on("click",".btn",function(){e.destroy()})}})})});c=function(){var a=$("input#emailReviews").prop("checked")||
$("input#emailCommits").prop("checked");$(".email-flags").find(".help-block").toggleClass("hide",a)};c();$(".email-flags").find('input[type\x3d"checkbox"]').on("change",c)}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.browse={_pathCache:[{},{}],_pushingState:!1,_showDeleted:!1,init:function(){$("body").data("browse-initialized")||($("body").data("browse-initialized",!0),$(".timeago").timeago(),$(".prettyprint").length&&swarm.browse.prettify(),swarm.browse.initHistory(),$(".file-history .description").expander({slicePoint:90}),swarm.browse.handleTabChange(),swarm.browse.handleLineHash(),$(window).one("load",function(){setTimeout(function(){swarm.browse.handleLineHash()},0)}),swarm.history.supported&&($("body").on("click.browse-files",
".browse-files .dir a, .browse-files .file a, .breadcrumb li a",function(a){!a.ctrlKey&&!a.metaKey&&(swarm.browse.openPath(this.href,!1,$(this).closest(".file").length),a.preventDefault())}),$(window).on("beforeSetState",function(a,b){$.extend(b,{browseUrl:$(".breadcrumb").data("url"),isFile:$(".browse-title .rev").length,autoSwitchTab:!1})}),swarm.history.doStateUpdate(),swarm.history.onPopState(function(a){a=a.originalEvent.state||{};if(!a.browseUrl)return location.reload();swarm.browse.openPath(a.browseUrl,
!0,a.isFile)})),$(document).on("show.browse-content",'.browse-content .nav-tabs a[data-toggle\x3d"tab"]',swarm.browse.handleTabChange))},pathLoaded:function(a){swarm.browse.handleLineHash();swarm.browse.initHistory();$(".deleted-files button").toggleClass("active",swarm.browse._showDeleted);a?swarm.history.switchTab(window.history.state.tab):swarm.history.doStateUpdate();swarm.browse.handleTabChange()},openPath:function(a,b,c){a=a.replace(/\/$/,"").replace(/\#.*$/,"");var e=$(".breadcrumb").data("path"),
f=e.match(/\//g).length,d=a.substring(a.indexOf("/files")),g=0>d.match(/\//g).length-f?"prev":"next",j="next"===g?"left":"right";if(e===d)return b&&swarm.history.switchTab(window.history.state.tab);b||swarm.history.pushState({isFile:c},null,a);swarm.browse.getCached(e)||swarm.browse.setCached(e);var e=0<d.lastIndexOf("/")?d.substr(d.lastIndexOf("/")+1):"//",h=$("\x3cdiv /\x3e",{"class":"item "+g}).appendTo(".browse-files-carousel");c=swarm.browse.getLoadingPane(d,c);$(".browse-title").text(e);h.append(c);
c=function(){$(".browse-files-carousel .item.active").remove();h.removeClass(g+" "+j).addClass("active");$(".browse-files-carousel").height("");$("body").css("overflowY","");$(".browse-files-carousel").css("overflow","");h.find(".loading").length||swarm.browse.pathLoaded(b)};$.support.transition&&(!b||!swarm.has.historyAnimation())?($(".browse-files-carousel").css("overflow","hidden"),$("body").css("overflowY","hidden"),$(".browse-files-carousel").height($(window).height()),$(".browse-files-carousel .item.active").add(h).addClass(j),
h.one($.support.transition.end,c)):c();(d=swarm.browse.getCached(d))?swarm.browse.handlePathResponse(d.data,h,b,d.inputs,!0):$.ajax({url:a,data:{format:"partial",showDeleted:swarm.browse._showDeleted||void 0},success:function(a){swarm.browse.handlePathResponse(a,h,b)},error:function(b){403===b.status&&(this.errorHandled=!0,h.html($('\x3cdiv class\x3d"browse-content"\x3e \x3cdiv class\x3d"alert"\x3e'+swarm.te("You don't have permission to view this file.")+"\x3c/div\x3e\x3c/div\x3e")),h.is(".active")&&
swarm.browse.pathLoaded(),$(".breadcrumb").data("path",a),$("head title").html($("head title").html().split("-").shift()+" - "+swarm.te("Not Allowed")))}})},handlePathResponse:function(a,b,c,e,f){if(null!==b[0].parentNode){var d=$("\x3cdiv /\x3e").append($.parseHTML(a,document,!0));a=d.find("title");var g=d.find(".browse-title"),j=d.find(".breadcrumb"),d=d.find(".browse-content");b.html(d);$.each(e||[],function(){b.find("input[name\x3d"+this.name+"]").val(this.value)});$(".browse-title").replaceWith(g);
$(".breadcrumb").replaceWith(j);$("head title").html($("head title").html().split("-").shift()+" - "+a.html());f||(swarm.browse.prettify(),$(".file-history .description").expander({slicePoint:90}));$(".timeago").timeago();b.is(".active")&&swarm.browse.pathLoaded(c)}},getCached:function(a){var b=swarm.browse._pathCache[swarm.browse._showDeleted?1:0],c=(new Date).getTime()-6E5;return b.hasOwnProperty(a)&&b[a].time>c&&b[a]},setCached:function(a,b){b=void 0!==b?b:swarm.browse._showDeleted;swarm.browse._pathCache[b?
1:0][a]={time:(new Date).getTime(),data:$("title")[0].outerHTML+$("body").html(),inputs:$("input").serializeArray()}},initHistory:function(){var a=$(".breadcrumb").data("path"),b=$(".browse-content .user-filter input"),c=$(".browse-content .range-filter input"),e=$("#commits"),f=swarm.url("/files");0===a.indexOf(f)&&(a=a.slice(f.length));swarm.changes.init(a,e,{user:b,range:c});b.add(c).off("input.history-filters keyup.history-filters blur.history-filters").on("input.history-filters keyup.history-filters blur.history-filters",
function(){clearTimeout(swarm.changes.filterTimeout);swarm.changes.filterTimeout=setTimeout(function(){swarm.changes.load(a,e,{user:b.val(),reset:!0,range:c.val()})},500)});c.off("click.range-filter").on("click.range-filter",function(a){a.stopPropagation();c.closest(".range-filter").find(".popover").length||c.data("popover").show()});$(document).off("click.range-filter").on("click.range-filter",function(a){c.length&&1===a.which&&c.data("popover").hide()});$(document).off("click.range-filter-popover").on("click.range-filter-popover",
".range-filter .popover",function(a){a.stopPropagation()});c.length&&c.popover({container:".range-filter",trigger:"manual"})},toggleAnnotations:function(a){a=$(a);var b=a.is(".active");a.toggleClass("active");$(".view-text ol").toggleClass("annotated");b?$(".view-text ol li .annotation").hide():$(".view-text .annotation").length?$(".view-text ol li .annotation").show():($(".view-text ol li").each(function(){$(this).prepend('\x3cspan class\x3d"annotation"\x3e\x26nbsp;\x3c/span\x3e')}),$.ajax({url:window.location,
data:{annotate:!0},dataType:"json",success:function(a){var b=0,f=null,d=a.annotate;if(0!==d.length){var g=$.templates('\x3ca href\x3d"'+$.views.converters.url("/changes/")+'{{:id}}"\x3e\x3cspan class\x3d"text"\x3e{{\x3echange.user}}\x3c/span\x3e\x3c/a\x3e'),j=$.templates('\x3cp class\x3d"monospace"\x3e{{:change.desc}}\x3c/p\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3echange.time}}"\x3e\x3c/span\x3e');$(".view-text").on("mouseenter",".annotation a",function(){var b=$(this),e=b.attr("href").match(/changes\/([0-9]+)/)[1],
d=a.changes[e];b.popover({title:swarm.te("Change")+" "+e,animation:!1,trigger:"hover",html:!0,content:$(j.render({change:d}))}).popover("show");b.data("popover").tip().find("span.timeago").timeago()});$(".view-text ol li .annotation").each(function(){var h=$(this),j=d[b].lower,k=a.changes[j],l=j===f;h.html(g.render({id:encodeURIComponent(j),change:k}));h.addClass(l?"repeat":"");f=j;b++})}}}))},getShortLink:function(a){a=$(a);a.toggleClass("active");a.is(".active")?(a.tooltip("disable"),a.tooltip("hide")):
a.tooltip("enable");if(!a.data("popover")){var b=window.location.pathname,c=swarm.url("/");0===b.indexOf(c)&&(b=b.slice(c.length-1));$.post("/l",{uri:b+window.location.search},function(b){var c="Press CTRL-C";-1!==navigator.userAgent.indexOf("Mobile")?c="Long-press":-1!==navigator.userAgent.indexOf("Mac")&&(c="Press \x26#8984;-C");b=$.templates('\x3cdiv class\x3d"short-link"\x3e\x3cinput class\x3d"center" type\x3d"text" value\x3d"{{\x3euri}}" size\x3d"{{\x3esize}}" readonly\x3e\x3cbr\x3e\x3cspan class\x3d"muted"\x3e\x3csmall\x3e{{t:hint}} {{te:"to copy"}}\x3c/small\x3e\x3c/span\x3e\x3c/div\x3e').render({uri:b.uri,
hint:c,size:b.uri.length});a.popover({html:!0,content:b,placement:"top",container:"body",customClass:"short-link-popover"});var d=a.data("popover").tip();a.popover().on("shown",function(){d.find("input").select();d.find("input").on("click",function(){$(this).select()})});var g=function(){a.removeClass("active").popover("hide")};swarm.history.onPopState(g);$(window).on("beforeSetState",g);$(document).on("show.swarm.tab",'[data-toggle\x3d"tab"]',g);$(document).on("click",function(b){!d.is(b.target)&&
(0===d.has(b.target).length&&!a.is(b.target)&&0===a.has(b.target).length)&&g()});a.popover("show")},"json")}},getArchive:function(a){a=$(a);a.toggleClass("active");a.is(".active")?(a.data("popover")||swarm.browse.initArchivePopover(a),a.popover("show"),$.ajax({url:a.attr("href"),data:{background:!0,format:"json"},success:function(b){swarm.browse.pollForArchive(b.digest,a)},error:function(b,c,e){swarm.browse.updateArchiveStatus(a,{error:e});this.errorHandled=!0}})):swarm.browse.cancelArchiveDownload(a)},
initArchivePopover:function(a){a.popover({trigger:"manual",container:".browse-content",html:!0,placement:"top",content:'\x3cdiv class\x3d"pad1 padw0 content archive-status"\x3e\x3cdiv class\x3d"close"\x3e\x26times;\x3c/div\x3e\x3cdiv class\x3d"progress active"\x3e\x3cdiv class\x3d"bar underlay"\x3e\x3cspan class\x3d"padw2"\x3e'+swarm.te("Initializing...")+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"bar"\x3e\x3cspan class\x3d"padw2"\x3e'+swarm.te("Initializing...")+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"});
var b=function(){swarm.browse.cancelArchiveDownload(a)};$(document).on("click",function(c){(!a.data("popover").tip().is(c.target)&&0===a.data("popover").tip().has(c.target).length&&!a.is(c.target)&&0===a.has(c.target).length||$(c.target).is(".archive-status .close"))&&b()});swarm.history.onPopState(b);$(window).on("beforeSetState",b);$(document).on("show.swarm.tab",'[data-toggle\x3d"tab"]',b)},updateArchiveStatus:function(a,b){var c=a.data("popover")?a.data("popover").tip():null;if(c){var e,f,d;!b.success&&
!b.error?(e=parseInt(b.progress,10)||0,f="compress"===b.phase?swarm.t("Compressing..."):swarm.t("Syncing...")):b.success?(e=100,f=swarm.t("Downloading..."),d="progress-success",setTimeout(function(){a.removeClass("active").popover("hide")},3E3)):(e=100,f=swarm.t("Error")+": "+swarm.t(b.error)||swarm.t("Unknown"),d="progress-danger");c.find(".progress .bar").css("width",e+"%");c.find(".progress .bar span").text(f);c.find(".progress").removeClass("progress-success progress-danger").addClass(d);a.removeClass("btn-danger").find("i").attr("class",
"icon-briefcase");b.error&&a.addClass("btn-danger").find("i").attr("class","icon-warning-sign icon-white")}},cancelArchiveDownload:function(a){a.removeClass("active").popover("hide");swarm.browse._archivePolling&&(window.clearTimeout(swarm.browse._archivePolling),swarm.browse._archivePolling=null)},_archivePolling:null,pollForArchive:function(a,b){window.clearTimeout(swarm.browse._archivePolling);swarm.browse._archivePolling=setTimeout(function(){$.ajax("/archive-status/"+a,{data:{format:"json"},
success:function(c){swarm.browse.updateArchiveStatus(b,c);swarm.browse._archivePolling&&!c.error&&(c.success?window.location.href=b.attr("href"):swarm.browse.pollForArchive(a,b))},error:function(a,e,f){swarm.browse.updateArchiveStatus(b,{error:f});this.errorHandled=!0}})},1E3)},prettify:function(){window.prettyPrint();$(".prettyprint.nocode li").filter(function(){return!this.firstChild||1!==this.firstChild.nodeType}).wrapInner('\x3cspan class\x3d"pln" /\x3e')},getLoadingPane:function(a,b){var c='\x3cspan class\x3d"loading muted pad2"\x3e'+
swarm.te("Loading...")+"\x3c/span\x3e";b||(c='\x3ctable class\x3d"table table-compact browse-files"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth class\x3d"file-name"\x3e'+swarm.te("Name")+'\x3c/th\x3e\x3cth class\x3d"file-time"\x3e'+swarm.te("Modified")+'\x3c/th\x3e\x3cth class\x3d"file-size"\x3e'+swarm.te("Size")+'\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr class\x3d"dir"\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e");
var e=$('\x3cdiv class\x3d"browse-content"\x3e\x3cul class\x3d"nav nav-tabs browse-tabs"\x3e\x3cli class\x3d"active"\x3e\x3ca href\x3d"#browse" data-toggle\x3d"tab"\x3e\x3ci class\x3d"icon-'+(b?"file":"folder-open")+'"\x3e\x3c/i\x3e '+swarm.te(b?"View":"Browse")+'\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"#commits" data-toggle\x3d"tab"\x3e\x3ci class\x3d"icon-time"\x3e\x3c/i\x3e '+swarm.te("Commits")+'\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"tab-content"\x3e\x3cdiv class\x3d"tab-pane fade in active" id\x3d"browse"\x3e'+
c+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");e.find(".loading").css("visibility","hidden");setTimeout(function(){e.find(".loading").css("visibility","").addClass("animate")},500);return e},handleLineHash:function(){var a=window.location.hash.replace(/^#l?/i,"");if(a){var b=parseInt(a,10),c=0<b?$("ol.linenums li:nth-child("+b+")"):[];if(c.length&&($("html, body").scrollTop(c.offset().top-Math.round($(window).height()/4)),c.addClass("highlight"),a.match(/[0-9]+\-[0-9]+/))){c=0;a=parseInt(a.split("-").pop(),
10);for(c=b;c<a;c++)$("ol.linenums li:nth-child("+(c+1)+")").addClass("highlight")}}},handleTabChange:function(a){a=$(a&&a.target||".nav-tabs .active a[href]").attr("href");$(".btn-blame").closest(".btn-group").toggle("#view"===a);$(".user-filter").toggle("#commits"===a);$(".range-filter").toggle("#commits"===a);$(".deleted-filter").toggle("#browse"===a);$(".btn-group-archive").toggle("#browse"===a);var b=$(".project-navbar");b.find("ul.nav li").removeClass("active");"#browse"===a||"#view"===a?b.find("ul.nav a.browse-link").closest("li").addClass("active"):
"#commits"===a&&b.find("ul.nav a.history-link").closest("li").addClass("active")},toggleDeletedFiles:function(a){swarm.browse._showDeleted=!swarm.browse._showDeleted;$(a).toggleClass("active",swarm.browse._showDeleted);a=$(".breadcrumb").data("url");var b=$(".breadcrumb").data("path"),c=swarm.browse.getCached(b);swarm.browse.setCached(b,!swarm.browse._showDeleted);var e=function(a){a=$("\x3cdiv /\x3e").append($.parseHTML(a)).find(".tab-content #browse");$(".tab-content #browse").replaceWith(a);$(".timeago").timeago()};
c?e(c.data):($("table.browse-files tbody").html('\x3ctr\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading animate muted pad2"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e"),$.ajax({url:a,data:{format:"partial",showDeleted:swarm.browse._showDeleted||void 0},success:function(a){e(a);swarm.browse.setCached(b)}}))}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.diff={_activeScroller:null,_navElement:null,_navQueue:null,_scrolling:null,moreContextLines:10,init:function(){swarm.diff._navQueue=[];$(".diff-wrapper .diff-details.collapse").on("shown hidden",function(a){if(a.target===this){a="hidden"===a.type;var c=$(this).closest(".diff-wrapper");c.toggleClass("collapsed",a);!a&&c.find(".loading").length&&swarm.diff.loadDiff(c);c.data("dirty-scroll-width")&&swarm.diff.updateScrollerWidth(c);c.data("dirty-sideways-width")&&swarm.diff.updateSidewaysWidth(c)}});
$(".diff-wrapper").on("diff-loaded",function(){setTimeout($.proxy(function(){$(".diff-header .diff-header-affix",this).swarmAffix({scrollToTarget:!0})},this),0)});$(".diff-header a.filename").on("click.file",function(a){a.preventDefault()});$(document).on("click.diff.btn",".diff-header .btn",function(a){a.stopPropagation()});$(document).on("click.diff.ws.btn",".btn-ws",function(a){swarm.diff.toggleWhitespace($(a.target).closest(".diff-wrapper"))});$(document).on("click.diff.inline.btn",".btn-inline",
function(){swarm.diff.showInline(this);$(this).closest(".diff-header-affix").swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.sideways.btn",".btn-sideways",function(){swarm.diff.showSideways(this);$(this).closest(".diff-header-affix").swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.full.btn",".btn-full",function(a){swarm.diff.toggleFullFile($(a.target).closest(".diff-wrapper"))});$(".diff-wrapper").on("show-full show-more-context",function(){$(".diff-header .diff-header-affix",
this).swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.more.context",".diff-type-meta",function(){$(this).hasClass("is-cut")||swarm.diff.renderMoreContext($(this),swarm.diff.moreContextLines)});if(1===$("#files.active .diff-wrapper").length)$(".diff-wrapper .diff-details").collapse("show");else if(1===$("#files .diff-wrapper").length)$('.change-tabs a[href\x3d"#files"]').one("shown",function(){$(".diff-wrapper .diff-details").collapse("show")});$(window).on("hashchange.diff.context",swarm.diff.handleHash);
swarm.diff.handleHash();$(window).resize(function(){$(".diff-wrapper").trigger("diff-resize");swarm.has.cssCalcSupport()||$(".diff-wrapper .diff-details.in").each(function(){swarm.diff.updateScrollerWidth($(this).closest(".diff-wrapper"))})});var a=!1;$(window).on("keydown",function(b){!a&&(!b.altKey&&!b.ctrlKey&&!b.metaKey&&!b.isDefaultPrevented()&&!$(b.target).is("input, textarea, select")&&$("#files.active").length)&&(a=!0,78===b.which?(b.preventDefault(),swarm.diff._navQueue.push("n"),swarm.diff.processNavQueue()):
80===b.which&&(b.preventDefault(),swarm.diff._navQueue.push("p"),swarm.diff.processNavQueue()))});$(window).on("keyup",function(){a=!1})},processNavQueue:function(a,b){if(b||!swarm.diff._navigating){swarm.diff._navigating=!0;a=a&&$(a)||$(swarm.diff._navElement);var c=swarm.diff.getNavElements(),d="n"===swarm.diff._navQueue[0]?0:-1;a.length&&a[0].parentNode&&(d=c.index(a)+("n"===swarm.diff._navQueue[0]?1:-1));var d=-1>=d?c.length-1:d,d=d===c.length?0:d,e=c.eq(d);e.is(".diff-details")&&!e.closest(".diff-wrapper").data("diff-loaded")?
(e.closest(".diff-wrapper").one("diff-loaded",function(){swarm.diff.processNavQueue(null,!0)}),e.collapse("show")):e.is(".diff-details")?swarm.diff.processNavQueue(e,!0):(c=function(){swarm.diff._navElement=e[0];swarm.diff._navQueue.shift();swarm.diff._navigating=!1;swarm.diff._navQueue.length?swarm.diff.processNavQueue():(swarm.diff.focusNavElement(e),swarm.diff.scrollToElement(e))},d=e.closest(".diff-details"),d.is(".in")?c():(swarm.diff._navigating=!0,d.one("shown",c),d.collapse("show")))}},focusNavElement:function(a){a=
$(a);swarm.diff._navElement=a[0];$(".diff-nav-focus-start, .diff-nav-focus-end").removeClass("diff-nav-focus-start diff-nav-focus-end");var b=a,c=$();a.closest(".diff-body").is(".diff-sideways")&&(b=b.add(swarm.diff.getPairedRow(a[0])));b.each(function(){c=$(this).next("tr.diff-type-same, tr.diff-type-meta").length||1>$(this).next().length?c.add(this):c.add($(this).nextUntil("tr.diff-type-same, tr.diff-type-meta").last())});b.addClass("diff-nav-focus-start");c.addClass("diff-nav-focus-end")},getNavElements:function(a){var b=
a&&$()||$(".diff-details");a=a&&$(a)||$(".diff-details");var c=a.find(".diff-body").filter(function(){var a=$(this).css("display"),b=$($(this).data("diff-pair")).css("display");return"block"===a&&(!$(this).is(".right-side")||"block"!==b)}),c=c.length?c:a;return b=b.add(c.find(".diff-type-meta + .diff-type-add, .diff-type-meta + .diff-type-delete,.diff-type-same + .diff-type-add, .diff-type-same + .diff-type-delete,.diff-image, .diff-description"))},handleHash:function(){var a=window.location.hash.replace(/^#/,
"");if(a){var a=a.split(","),b=$("a[name\x3d"+a[0]+"]").closest(".diff-wrapper");if(b.length){var c=b.find(".diff-details.collapse"),d=b.closest(".tab-pane"),e=$('.nav-tabs a[href\x3d"#'+d[0].id+'"]');e.one("shown",function(){c.not(".in").collapse("show");if(!a[1])return swarm.diff.scrollToElement(b);swarm.diff.handleSubHash(a[1],b)});d.is(".active")?e.trigger($.Event("shown")):e.tab("show")}}},handleSubHash:function(a,b){if(!b.data("comments-loaded"))return b.one("comments-loaded",function(){swarm.diff.handleSubHash(a,
b)}),!1;var c=b.find(".diff-body").filter(function(){return"block"===$(this).css("display")}).add(b.find(".diff-footer")),d;"l"===a.charAt(0)?d=c=c.find("tr."+a):(c=c.find("."+a),d=c.closest(".comments-section"));var e=b.data("file");return(!c.length||d.hasClass("diff-full-context"))&&(e.isEdit||e.fromFile)&&!b.hasClass("show-full")?(b.one("show-full",function(){swarm.diff.handleSubHash(a,b)||(b.find(".btn-full").removeClass("active"),swarm.diff.toggleFullFile(b))}),b.find(".btn-full").addClass("active"),
swarm.diff.toggleFullFile(b),!1):c.length?(d.hasClass("comments-section")&&("none"===d.css("display")&&(d.toggle(!0).trigger("show"),d.hasClass("comments-row")&&($(swarm.diff.getPairedRow(d)).toggle(!0).trigger("show"),swarm.comments.sizeCommentRowForDiff(d))),d.find(".closed-comments-body.hidden").find(c).length&&d.find(".closed-comments-header").click()),swarm.diff.scrollToElement(c),!0):!1},scrollToElement:function(a){if(a.length){a=a.offset().top;var b=parseInt($("body").css("padding-top"),10);
$("html, body").animate({scrollTop:a-3*b},"fast","swing")}},getDiffMode:function(a){a=$(a);return!a.find(".diff-details .diff-table").length?"inline":a.find(".btn-sideways").hasClass("active")?"sideways":a.find(".btn-inline").hasClass("active")?"inline":"inline"!==swarm.localStorage.get("diff.mode")?"sideways":"inline"},getActiveDiffBody:function(a,b){a=$(a);var c=a.hasClass("ignore-ws")?"no-ws":"ws",d=swarm.diff.getDiffMode(a),c=a.find(".diff-"+d+"."+c);if(b)var e=a.hasClass("pure-add"),g=a.hasClass("action-delete"),
c=c.filter(function(){var a=$(this);return e&&!a.hasClass("left-side")||g&&!a.hasClass("right-side")||!0});return c},_getDiffFiles:function(a){a=$(a);var b=a.data("file"),c={};if(b.diffLeft||b.diffRight)return b.diffRight&&(c.right={path:b.depotFile,rev:b.diffRight}),b.diffLeft&&(c.left={path:b.depotFile,rev:b.diffLeft}),c;a=a.closest(".change-wrapper").data("change");var d="pending"===a.status,e=b.fromFile&&b.fromRev;c.right={path:b.depotFile,rev:d?"@\x3d"+a.id:"#"+b.rev};if((!b.isAdd||e)&&"none"!==
b.rev)c.left={path:e?b.fromFile:b.depotFile,rev:"#"+(e?b.fromRev:d?b.rev:parseInt(b.rev,10)-1)};return c},loadDiff:function(a,b){a=$(a);var c=a.data("file");if(c.isDelete&&c.action.match("move")){var d;$(".diff-wrapper").each(function(){if($(this).data("file").fromFile===c.depotFile)return d=$(this),!1});a.find(".diff-details").html('\x3cdiv class\x3d"diff-body"\x3e  \x3cdiv class\x3d"diff-description pad3"\x3e'+c.type.charAt(0).toUpperCase()+c.type.substr(1)+"    "+swarm.te(d?"file moved to":"file moved")+
(d?' \x3ca href\x3d"#"\x3e\x3c/a\x3e':"")+".  \x3c/div\x3e\x3c/div\x3e").append('\x3cdiv class\x3d"diff-footer"\x3e\x3c/div\x3e');a.find(".diff-details a").text(d.data("file").depotFile).click(function(a){window.location="#"+d.find("a[name]").attr("name");d.find(".diff-details").hasClass("out")&&d.find(".diff-details").collapse("show");a.preventDefault()});b=b&&b();a.data("diff-loaded",!0).trigger($.Event("diff-loaded"));return b}var e=swarm.diff._getDiffFiles(a);$.ajax({url:"/diff",data:{left:e.left&&
e.left.path+e.left.rev,right:e.right&&e.right.path+e.right.rev,ignoreWs:a.is(".ignore-ws")?1:0,action:c.action||null},dataType:"text",success:function(d){var e=$($.parseHTML(d,document,!0));d=function(b){a.find(".loading, .diff-scroll-container, .diff-footer").remove();swarm.diff.spanifyWhitespaceOnPlainLines(e);var c=a.find(".diff-details").append(e);b&&(c.append('\x3cdiv class\x3d"diff-scroll-container"\x3e\x3cdiv class\x3d"diff-scroll"\x3e\x3cdiv class\x3d"scroll-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
swarm.diff.addScrollListeners(a,a.find(".diff-scroll")));c.append('\x3cdiv class\x3d"diff-footer"\x3e\x3c/div\x3e')};if(!e.find(".diff-table").length)return d(),a.trigger($.Event("load")),b=b&&b(),a.data("diff-loaded",!0).trigger($.Event("diff-loaded")),b;if(c.isAdd&&0===swarm.query.all("tr.diff-type-delete, tr.diff-type-same",e).length)a.addClass("pure-add");else if(!c.isDelete){swarm.diff.subDiff(e);var f=swarm.query.first("tr.diff-type-meta",e),j=f.next();(j.hasClass("ll1")||!j.find(".line-num-left").data("num"))&&
f.addClass("all-context-loaded")}swarm.query.all("tr.diff",e).not(".diff-type-meta").addClass("diff-content");d(!0);d=swarm.diff.getDiffMode(a);if(0===a.find(".btn-inline, .btn-sideways").length){f='\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show In-Line")+'"            class\x3d"btn btn-mini btn-inline '+("inline"===d?"active":"")+'"\x3e        \x3ci class\x3d"swarm-icon icon-diff-inline"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" title\x3d"'+
swarm.te("Show Side-by-Side")+'"            class\x3d"btn btn-mini btn-sideways '+("sideways"===d?"active":"")+'"\x3e        \x3ci class\x3d"swarm-icon icon-diff-sideways"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show Whitespace")+'"        class\x3d"btn btn-mini btn-show-whitespace"        onclick\x3d"swarm.diff.toggleShowWhitespace(this);"\x3e        \x3cspan\x3e\x26bull;\x3c/span\x3e    \x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+
swarm.te("Ignore Whitespace")+'"            class\x3d"btn btn-mini btn-ws" data-toggle\x3d"button"\x3e        \x3ci class\x3d"swarm-icon icon-ignore-ws"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e';if(c.isEdit||c.fromFile)f+='\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show Full Context")+'"            class\x3d"btn btn-mini btn-full" data-toggle\x3d"button"\x3e        \x3ci class\x3d"swarm-icon icon-expand-file"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e';
a.find(".diff-toolbar").prepend($(f))}a.trigger($.Event("load"));"inline"===d&&swarm.diff.updateScrollerWidth(a);"sideways"===d&&!swarm.diff.getActiveDiffBody(a).length&&swarm.diff.showSideways(a.find(".btn-sideways"));b=b&&b();a.data("diff-loaded",!0).trigger($.Event("diff-loaded"));return b},error:function(b){403===b.status&&(this.errorHandled=!0,a.find(".diff-details").html($('\x3cdiv class\x3d"alert pad3"\x3e'+swarm.te("You don't have permission to view this file.")+"\x3c/div\x3e")))}})},subDiff:function(a){var b=
function(a){a=$(a);return a.hasClass("lf")&&"lf"||a.hasClass("crlf")&&"crlf"||a.hasClass("cr")&&"cr"},c=function(){var a,b;$(this).html($(this).html().replace(/(^[\t ]+)|([\t ]+$)/g,function(c,h,f){a=h||a;b=f||b;return""}));$(this).before(a);$(this).after(b)};swarm.query.all("tr.diff-type-delete + tr.diff-type-add",a).each(function(){for(var d=$(this),e=d,g=[],h=[this];(e=e.prev("tr.diff-type-delete")).length;)g.unshift(e[0]);for(;(d=d.next("tr.diff-type-add")).length;)h.push(d[0]);h=$(h);g=$(g);
h.addClass("diff-type-edit");g.addClass("diff-type-edit");var f=!1;h.each(function(a){if(a>=g.length)return!1;if(b(h[a])!==b(g[a]))return f=!0,!1});f&&(h.addClass("line-end-changed"),g.addClass("line-end-changed"));$(g[g.length-1]).data("padChunkLength",Math.max(h.length-g.length,0));$(h[h.length-1]).data("padChunkLength",Math.max(g.length-h.length,0));swarm.diff._subDiffChunk(g,h);a.is(".no-ws")&&(swarm.query.apply("span.insert, span.delete",h,c),swarm.query.apply("span.insert, span.delete",g,c))})},
addScrollListeners:function(a,b){b.scroll(function(){if(!(swarm.diff._activeScroller&&swarm.diff._activeScroller.source!==this)){clearTimeout(swarm.diff._scrolling);swarm.diff._scrolling=setTimeout(function(){swarm.diff._activeScroller=null},1E3);if(!swarm.diff._activeScroller){var b=swarm.diff.getActiveDiffBody(a).find(".diff-scroll").add(a.find(".diff-scroll-container .diff-scroll"));swarm.diff._activeScroller={source:this,targets:b.not(this)}}swarm.diff._activeScroller.targets.scrollLeft(this.scrollLeft)}})},
showSideways:function(a,b){if(a&&$(a).length){var c=$(a).closest(".diff-wrapper"),d=c.find(".diff-inline.active"),e=c.hasClass("ignore-ws")?c.find(".diff-sideways.no-ws"):c.find(".diff-sideways.ws"),g=b?$():e;c.find(".btn-inline").removeClass("active");c.find(".btn-sideways").addClass("active");if(!g.length){var h=d.hasClass("ws")?"ws":"no-ws",f=d.clone(!0).attr("class","diff-body diff-sideways border-box "+h+" left-side"),h=d.clone(!0).attr("class","diff-body diff-sideways border-box "+h+" right-side");
swarm.query.all("img.loaded",f).removeClass("loaded");swarm.query.all("img.loaded",h).removeClass("loaded");var j=function(){this.value&&this.value===this.placeholder&&(this.value="")};swarm.query.apply("[placeholder]",f,j);swarm.query.apply("[placeholder]",h,j);var j=function(){$.cleanData([this]);this.parentNode.removeChild(this)},l=$('\x3ctd class\x3d"line-value"\x3e\x26nbsp;\x3c/td\x3e'),k=["diff-content","has-comments","archived-only"],m=function(){var a=" "+this.parentNode.className+" ",b;for(b=
0;b<k.length;b++)a=a.replace(" "+k[b]+" "," ");this.parentNode.className=$.trim(a)+" line-pad";this.parentNode.replaceChild(l[0].cloneNode(!0),this)},g=g.add(f).add(h);f.data("diff-pair",h[0]);h.data("diff-pair",f[0]);swarm.query.all("tr.diff.diff-type-add.diff-type-edit",f).each(j);swarm.query.all("tr.diff.diff-type-delete.diff-type-edit",h).each(j);swarm.query.apply("tr.diff.diff-type-edit",g,function(){var a=$.data(this,"padChunkLength");void 0!==a&&0<a&&swarm.diff.pad(a,this)});var n=$([1]);swarm.query.apply("td.line-value",
g,function(){n[0]=this.parentNode;if(!n.hasClass("diff-type-meta")){var a=this.firstChild;a&&3===a.nodeType&&(a.splitText(1),this.removeChild(a))}});swarm.query.all("td.line-num-right",f).each(j);swarm.query.all("td.line-num-left",h).each(j);swarm.query.all("tr.diff.diff-type-add td.line-value",f).each(m);swarm.query.all("tr.diff.diff-type-delete td.line-value",h).each(m);g.insertAfter(c.find(".diff-body").last());swarm.diff.addScrollListeners(c,g.find(".diff-scroll"))}b&&e.remove();d.css("display",
"none").trigger("hide");g.css("display","block").trigger("show");c.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(c)[0]);b||!e.length?swarm.diff.updateSidewaysWidth(c):swarm.diff.updateScrollerWidth(c)}},updateScrollerWidth:function(a,b){var c=swarm.diff.getActiveDiffBody(a,!0).find("table.diff-table");if(null===b||void 0===b){if(a.hasClass("collapsed")){a.data("dirty-scroll-width",!0);return}b=0;c.each(function(a){$.swap(this,{minWidth:"",width:"1px"},function(){b=
Math.max(b,c.eq(a).width())})})}var d;2===c.length?swarm.has.cssCalcSupport()?d="calc("+b+"px - (100% / 2) + 100%)":(d=a.width(),d=b-d/2+d+"px"):d=b+"px";a.data("dirty-scroll-width",1>b);a.find(".scroll-content").css("minWidth",d);a.find(".diff-scroll-container .diff-scroll").swarmAffix({position:"bottom",animate:!1,boundary:c})},updateSidewaysWidth:function(a){a.hasClass("pure-add")||a.hasClass("action-delete")?swarm.diff.updateScrollerWidth(a):a.hasClass("collapsed")?a.data("dirty-sideways-width",
!0):(a.data("dirty-sideways-width",!1),a.find(".diff-sideways.left-side").each(function(){var b=$(this),c=$(b.data("diff-pair")),d=b.find("table.diff-table"),e=c.find("table.diff-table"),g=$().add(d).add(e),h=[];g.css({minWidth:"",width:"1px"});if("none"===b[0].style.display&&"none"===c[0].style.display){var f={display:"block",visibility:"hidden"},j=function(a){h.push(a.width())};$.swap(b[0],f,j,[d]);$.swap(c[0],f,j,[e])}else h=[d.width(),e.width()],swarm.diff.updateScrollerWidth(a,Math.max(h[0],
h[1]));g.css({minWidth:Math.max(h[0],h[1])+"px",width:""})}),a.trigger("diff-resize"))},_subDiffChunk:function(a,b){var c=new window.diff_match_patch,d=[],e=[];a.each(function(a,b){d.push(swarm.query.first("td.line-value",b).text().substring(1))});b.each(function(a,b){e.push(swarm.query.first("td.line-value",b).text().substring(1))});var g=c.diff_main(d.join("\n"),e.join("\n")),h="",f="";c.diff_cleanupSemantic(g);$.each(g,function(a,b){var c=[],d=[];$.each(b[1].split("\n"),function(a,e){e=swarm.diff.spanifyWhitespace($.views.converters.html(e));
switch(b[0]){case 1:d.push('\x3cspan class\x3d"insert"\x3e'+e+"\x3c/span\x3e");break;case -1:c.push('\x3cspan class\x3d"delete"\x3e'+e+"\x3c/span\x3e");break;default:e="\x3cspan\x3e"+e+"\x3c/span\x3e",d.push(e),c.push(e)}});h+=c.join("\n");f+=d.join("\n")});$.each(h.split("\n"),function(b,c){swarm.query.first("td.line-value",a[b]).html("-"+c)});$.each(f.split("\n"),function(a,c){swarm.query.first("td.line-value",b[a]).html("+"+c)})},showInline:function(a){a=$(a).closest(".diff-wrapper");var b=a.find(".diff-inline.active"),
c=a.find(".diff-sideways");a.find(".btn-inline").addClass("active");a.find(".btn-sideways").removeClass("active");b.show().trigger($.Event("show"));c.hide().trigger($.Event("hide"));a.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(a)[0]);swarm.diff.updateScrollerWidth(a)},pad:function(a,b){b=$(b);for(var c=swarm.diff.getLineSelector(b).replace("."," "),d;0<a--;)d=$(b).clone(),d.removeClass("diff-content has-comments archived-only"+c).addClass("line-pad"),
d.find("td").html(" \x26nbsp;"),d.find(".line-num").attr("data-num",""),d.insertAfter(b)},collapseAll:function(){$(".diff-details.collapse.in").trigger("hide").removeClass("in").css("height","0").trigger("hidden")},expandAll:function(){$(".diff-details.collapse").not(".in").trigger("show").addClass("in").css("height","auto").trigger("shown")},toggleFullFile:function(a){var b=a.data("file");if(b.isEdit||b.fromFile){if(a.data("full-file"))return swarm.diff._renderFullFile(a);b=swarm.diff._getDiffFiles(a);
$.ajax({url:"/files/"+swarm.encodeURIDepotPath(b.left.path)+"?v\x3d"+encodeURIComponent(b.left.rev),data:"view",dataType:"text",success:function(b){b=b.split(/\r\n|\n|\r/);a.data("full-file",b);swarm.diff._renderFullFile(a)}})}},buildContextRowsHtml:function(a,b,c,d){d=d||"";var e="",g=$.templates('\x3ctr class\x3d"diff diff-type-same diff-content {{\x3eclass}}" tabindex\x3d"0"\x3e  \x3ctd class\x3d"line-num line-num-left" data-num\x3d"{{\x3eleft}}"\x3e\x3c/td\x3e  \x3ctd class\x3d"line-num line-num-right" data-num\x3d"{{\x3eright}}"\x3e\x3c/td\x3e  \x3ctd class\x3d"line-value"\x3e {{:value}}\x3c/td\x3e\x3c/tr\x3e');
$.each(a,function(a,f){var j=b+a,l=c+a,k=f.split(/(\r\n|\n|\r)/),m=(k[1]||"").replace(/\r/,"cr").replace(/\n/,"lf");e+=g.render({"class":d+" ll"+j+" lr"+l+" "+m,left:j,right:l,value:swarm.diff.spanifyWhitespace($.views.converters.html(k[0]))})});return e},_renderFullFile:function(a){a.toggleClass("show-full",a.find(".btn-full").hasClass("active"));if(a.find(".diff-inline.active").hasClass("fully-loaded"))swarm.diff.updateSidewaysWidth(a);else{var b=a.data("full-file"),c=$(".diff-inline.active tbody",
a).first(),d=0,e,g,h,f;$(".diff-inline.active tr.diff-type-meta",a).each(function(){var a=$("td.line-value .meta-value",this).html().match(/@@ \-([0-9]+),([0-9]+) \+([0-9]+),([0-9]+) @@/);if(a){e=parseInt(a[1],10);g=parseInt(a[2],10);h=parseInt(a[3],10);f=parseInt(a[4],10);var a=$(this),c=b.slice(d,e-1);a.before(swarm.diff.buildContextRowsHtml(c,e-c.length,h-c.length,"diff-full-context"));d=e+g-1}});d<b.length&&c.append(swarm.diff.buildContextRowsHtml(b.slice(d),e+g,h+f,"diff-full-context"));"sideways"===
swarm.diff.getDiffMode(a)?swarm.diff.showSideways($(".btn-sideways",a),!0):$(".diff-sideways",a).remove();$(".diff-inline.active",a).addClass("fully-loaded")}a.trigger($.Event("show-full"))},renderMoreContext:function(a,b){a=$(a);if(a.length){var c=a.closest(".diff-wrapper"),d=swarm.diff._getDiffFiles(c);if(!c.data("rendering-more-context")){c.data("rendering-more-context",!0);var e,g=a.find(".meta-value").html();swarm.query.all(".diff-inline.active tr.diff-type-meta",c).each(function(){if($(this).find(".meta-value").html()===
g)return e=$(this),!1});var h=function(a,b){a=$(a);return!a.length?null:a.filter(".diff-content").not(".diff-full-context,.diff-type-add").length?parseInt(a.find("td.line-num-left").data("num"),10)||null:h(a[b?"next":"prev"](),b)},f=[],j,l=h(e,!1),k=h(e,!0);l&&(j=l+b,k&&j+1>=k&&(j=k-1,k=!1),f.push(l+1+"-"+j));k&&f.push((0<k-b?k-b:1)+"-"+(0<k-1?k-1:1));f.length?$.ajax({url:"/view/"+swarm.encodeURIDepotPath(d.left.path),data:{format:"json",v:d.left.rev,lines:f},dataType:"json",success:function(d){var f=
function(a,b){if(a&&b&&b.length){var d,e=swarm.query.all(".diff-inline.active tr.ll"+(a-1),c).not(".diff-full-context");e.length||(d=!0,e=swarm.query.all(".diff-inline.active tr.ll"+(a+b.length),c).not(".diff-full-context"));if(e.length){var f,g;f=g=e;e.hasClass("diff-type-delete")&&(f=e,g=e=e.nextUntil(":not(.diff-type-edit)").last());f=parseInt(g.find("td.line-num-right").data("num"),10)-parseInt(f.find("td.line-num-left").data("num"),10);f=swarm.diff.buildContextRowsHtml(b,a,a+f,"additional-context-content");
d?e.before(f):e.after(f)}}},g,j=[];$.each(d,function(a,b){a=parseInt(a,10);if(!g||g+j.length!==a)f(g,j),g=a,j=[];j.push(b)});f(g,j);var k=Object.keys(d).length;swarm.query.all(".diff-inline.active tr.diff-type-meta",c).each(function(){var a=$(this),c=h(a,!1),d=h(a,!0);(c&&d&&c+1>=d||d&&1===d||!d&&a.is(e)&&k<b)&&a.addClass("all-context-loaded")});a.find(".icon-more-context").each(function(){$(this).data("tooltip")&&$(this).data("tooltip").hide()});"sideways"===swarm.diff.getDiffMode(c)?swarm.diff.showSideways(c.find(".btn-sideways"),
!0):c.find(".diff-sideways").remove();c.trigger($.Event("show-more-context"))},complete:function(){c.data("rendering-more-context",!1)}}):(swarm.query.all("tr.diff-type-meta",c).each(function(){$(this).find(".meta-value").html()===g&&$(this).addClass("all-context-loaded")}),a.find(".icon-more-context").each(function(){$(this).data("tooltip")&&$(this).data("tooltip").hide()}),c.data("rendering-more-context",!1))}}},inlineAll:function(){$(".btn-inline").not(".active").each(function(){swarm.diff.showInline(this)});
swarm.localStorage.set("diff.mode","inline")},sidewaysAll:function(){$(".btn-sideways").not(".active").each(function(){swarm.diff.showSideways(this)});swarm.localStorage.set("diff.mode","sideways")},toggleWhitespace:function(a){var b=$(".diff-inline.active",a),c=$(".diff-inline",a).not(".active"),d=function(){c.addClass("active");c.show().trigger("show");b.hide().trigger("hide");$(".btn-full",a).is(".active")&&swarm.diff.toggleFullFile(a);$(".btn-sideways",a).is(".active")?($(".diff-sideways",a).hide().trigger("hide"),
c.find(".diff-description").length||swarm.diff.showSideways($(".btn-sideways",a))):(a.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(a)[0]),swarm.diff.updateScrollerWidth(a))};b.removeClass("active");a.toggleClass("ignore-ws",$(".btn-ws",a).is(".active"));if(a.find(".diff-inline.no-ws").length)return d();swarm.diff.loadDiff(a,function(){c=a.find(".diff-inline.no-ws");d()})},getPairedRow:function(a){var b=$(a).closest(".diff-body");if(!b.is(".diff-sideways"))return null;
b=$(b.data("diff-pair")).find(".diff-table \x3e tbody");a=$(a).index();return b.children().length>a?b.children()[a]:null},getLineNumber:function(a){var b=$(a).attr("class").match(/ll([0-9]+)/);a=$(a).attr("class").match(/lr([0-9]+)/);return{left:b&&parseInt(b[1],10),right:a&&parseInt(a[1],10)}},getLineSelector:function(a){var b=[];a=swarm.diff.getLineNumber(a);a.left=a.left&&b.push("ll"+a.left);a.right=a.right&&b.push("lr"+a.right);return b.length?"."+b.join("."):""},spanifyWhitespace:function(a){return a.replace(/( )/g,
'\x3cspan class\x3d"space"\x3e$1\x3c/span\x3e').replace(/(\t)/g,'\x3cspan class\x3d"tab"\x3e$1\x3c/span\x3e')},spanifyWhitespaceOnPlainLines:function(a){swarm.query.all("tr:not(.diff-type-edit):not(.diff-type-meta) \x3e td.line-value",a).each(function(){this.innerHTML=this.innerHTML.substr(0,1)+swarm.diff.spanifyWhitespace(this.innerHTML.substr(1))})},toggleShowWhitespace:function(a){a=$(a);a.toggleClass("active");a.closest(".diff-wrapper").toggleClass("show-whitespace",a.is(".active"))}};
swarm.changes={_loading:!1,init:function(a,b,c){b=$(b);var d=$('.nav-tabs a[href\x3d"#'+b.attr("id")+'"]');!b.children().length&&$(d).has(".active")&&swarm.changes.load(a,b,c);$(document).off("shown.changes");$(document).on("shown.changes",d,function(){b.children().length||swarm.changes.load(a,b,c)});$(window).off("scroll.changes");$(window).on("scroll.changes",function(){b.is(".active")&&$(".change-history").length&&$.isScrolledToBottom()&&swarm.changes.load(a,b,c)})},load:function(a,b,c){if(!swarm.changes._loading){c=
c||{};var d=c.user instanceof $?c.user.val():c.user,e=c.range instanceof $?c.range.val():c.range,g=c.reset,h=c.status;c=c.includeReviews;swarm.changes._loading=!0;a=a?a.replace(/^\/+|\/+$/g,""):"";var d=$.trim(d),f=$(".change-history",b);if(g&&a===f.data("path")&&e===f.data("range")&&d===f.data("user"))swarm.changes._loading=!1;else{var j=f.data("page");f.length?j?f.data("page",++j):f.data("page",j=2):j=1;var l=$(".change-history tbody tr:last",b).attr("id");g&&(j=1,l=null);var k=f.data("project-id")||
$(b).data("project-id"),k=(k?swarm.url("/projects/")+k:"")+"/changes/"+a;$.ajax({url:k,data:{user:d,range:e,after:l,max:50*j,format:"partial",status:h,includeReviews:c},dataType:"text",success:function(c,j,k){c=$("\x3cdiv /\x3e").append($.parseHTML(c)).find("table");j=c.find("tbody tr");g&&f.find("tbody").empty();!j.length&&(g||!f.length)?(c=c.is(".remote")?swarm.te("Remote depot (change details are not available)."):swarm.te("shelved"===h?"No shelved changes.":"No matching changes."),k.getResponseHeader("X-Swarm-Range-Error")?
($(b).html('\x3cdiv class\x3d"alert alert-danger pad3"\x3e'+swarm.te("Range Syntax Error")+"\x3c/div\x3e"),$(".range-filter").addClass("control-group error")):$(b).html('\x3cdiv class\x3d"alert pad3"\x3e'+c+"\x3c/div\x3e")):($(b).find(".alert").remove(),$(".range-filter").removeClass("control-group error"),b&&!f.length?$(b).append(c):$(".change-history tbody",b).append(j),f.data("path",a),f.data("user",d),f.data("range",e),j.find(".timeago").timeago(),j.find(".description").expander({slicePoint:90}))},
complete:function(){$(b).trigger("changes-loaded");setTimeout(function(){swarm.changes._loading=!1},500)},error:function(a){a.getResponseHeader("X-Swarm-Range-Error")&&($(b).html('\x3cdiv class\x3d"alert alert-danger pad3"\x3e'+swarm.te("Range Syntax Error")+"\x3c/div\x3e"),$(".range-filter").addClass("control-group error"),this.errorHandled=!0)}})}}},openChangeSelector:function(a,b,c){b.review.path=b.change.basePath||"";var d=$($.templates('\x3cdiv class\x3d"modal hide fade select-change-modal" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"select-change-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"select-change-title"\x3e{{te:"Select Change"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cinput type\x3d"hidden" name\x3d"id" value\x3d"{{\x3eid}}"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"change-input control-group pad2 padw0"\x3e\x3cdiv class\x3d"input-prepend"\x3e\x3cspan class\x3d"add-on"\x3e@\x3c/span\x3e\x3cinput class\x3d"input-small" type\x3d"text" pattern\x3d"[0-9]*" name\x3d"change" id\x3d"change" required placeholder\x3d"{{te:"Change"}}"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3ch4 class\x3d"muted"\x3e{{te:"Commits"}}\x3c/h4\x3e\x3cinput class\x3d"path pull-left border-box" type\x3d"text" name\x3d"path" placeholder\x3d"{{te:"Path"}}" value\x3d"{{\x3epath}}"\x3e\x3cinput class\x3d"user pull-right border-box" type\x3d"text" name\x3d"user" placeholder\x3d"{{te:"User"}}" value\x3d"{{\x3eauthor}}"\x3e\x3c/div\x3e\x3cdiv class\x3d"changes-list"\x3e\x3cdiv class\x3d"loading animate muted pad3"\x3e{{te:"Loading..."}}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Select"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render(b.review)).appendTo("body");
swarm.modal.show(d);swarm.form.checkInvalid($(d).find("form"));d.find("form").submit(function(b){b.preventDefault();swarm.form.post(a,d.find("form"),function(a){a.isValid&&c(d,a)},d.find(".messages")[0])});d.find(".changes-list").on("click","tr",function(a){0===a.button&&(a.preventDefault(),$(this).closest(".changes-list").is(".disabled")||(d.find("#change").val(parseInt($(this).find("td.change a").text(),10)).trigger("change"),d.find(".changes-list tr").removeClass("active"),$(this).addClass("active")))});
d.find("#change").on("input keyup blur",function(){d.find(".changes-list tr").removeClass("active")});d.on("hidden",function(a){a.target===this&&$(this).remove()});d.find(".changes-list").on("changes-loaded",function(){$(this).find(".loading").remove();$(this).find("thead, td.time").remove();$(this).find(".description").expander("destroy").expander({slicePoint:70})});swarm.changes.load(d.find("input.path").val(),d.find(".changes-list"),{user:d.find("input.user").val()});d.find(".changes-list").scroll(function(){var a=
d.find(".changes-list");$.isScrolledToBottom(a,a.find("\x3etable"))&&swarm.changes.load(d.find("input.path").val(),d.find(".changes-list"),{user:d.find("input.user").val()})});d.find("input.path, input.user").on("input keyup blur",function(){clearTimeout(swarm.changes.filterTimeout);swarm.changes.filterTimeout=setTimeout(function(){swarm.changes.load(d.find("input.path").val(),d.find(".changes-list"),{user:d.find("input.user").val(),reset:!0})},500)})}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.comments={init:function(a,c,b,d){$(b).data("counter-node",d).data("context",c);swarm.comments.load(a,b);$(b).on("click.comment.context",".context a",function(){$(this).attr("href").match(window.location.hash)&&setTimeout(swarm.diff.handleHash,0)});$(document).on("swarm-login",function(){var c={context:$(b).data("context")};$.ajax("/comments/"+a,{data:c}).done(function(a){swarm.comments.update(b,a)})});$(document).on("shown.comments.tab",'li a[href\x3d"#comments"]',function(){$(b).find("table.opened-comments \x3e tbody \x3e tr.row-main").length||
$(b).find(".comment-add textarea").focus()});$(document).on("click.task-state.menu",".task-state-menu a",function(a){a.preventDefault();var c=$(this),d=$(c.closest(".task-state-menu").data("active-target")).closest("tr.row-main"),h=swarm.comments.getCommentId(d);$.post("/comment/edit/"+h,{taskState:c.data("task-state")},function(a){if(a.isValid){var e=c.data("task-state");d.find("button.dropdown-toggle").data("tooltip")&&d.find("button.dropdown-toggle").data("tooltip").hide();$("tr.c"+h).removeClass("task-state-"+
d.data("task-state")).data("task-transitions",a.taskTransitions).data("task-state",a.comment.taskState);swarm.comments.renderTaskControls(d);"verified:archive"===e&&($("tr.c"+h).next(".row-append").addBack().toggleClass("closed"),swarm.comments.updateArchived(null,d,b));swarm.comments.renderTaskSummary(b)}})});$(document).on("click.comments.edit",".comments-wrapper .edit-comment",function(a){a.preventDefault();swarm.comments.showEditForm($(this).closest("tr.row-append").prev(".row-main"))});$(document).on("click.comments.close",
".comments-wrapper .btn-close",function(a){a.preventDefault();var c=$(this),d=c.closest("tr.row-main");a=d.is(".closed")?"remove":"add";var h=swarm.comments.getCommentId(d);$("tr.c"+h).find("button.btn-close").prop("disabled",!0);$("tr.c"+h).next(".row-append").addBack().toggleClass("closed");var j={};j[a+"Flags"]=["closed"];$.post("/comment/edit/"+h,j,function(){swarm.comments.updateArchived(c,d,b);$("tr.c"+h).find("button.btn-close").prop("disabled",!1);swarm.comments.renderTaskSummary(b)})});$(document).on("click.comments.like",
".comments-wrapper .likes a",function(a){a.preventDefault();var c=$(this),b=c.closest(".likes"),d=b.find(".likes-counter");a=c.closest("tr.row-append");a=swarm.comments.getCommentId(a);var j=swarm.user.getAuthenticatedUser().id,k=b.is(".user-likes");$.post("/comment/edit/"+a,k?{removeLike:j}:{addLike:j},function(a){b.toggleClass("has-likes",0<a.comment.likes.length);b.toggleClass("user-likes",!k);b.find("i").toggleClass("icon-heart",k).toggleClass("swarm-icon icon-heart-red",!k);d.text(a.comment.likes.length);
d.attr({"data-original-title":a.comment.likes.join(", "),title:""});c.attr({"data-original-title":swarm.t(k?"Like":"Unlike"),title:""});c.is(":hover")&&c.tooltip("show")})});$(b).on("update",function(){$(b).find(".comments-table .comment-body a").each(function(){var a=$(this),c=a.attr("href"),b=null;c.match(/\.(gif|png|jpe?g)(\?|$)/i)&&(b=$("\x3cimg\x3e").attr("src",c));var d=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i;c.match(d)&&(b=$('\x3ciframe width\x3d640 height\x3d390 frameborder\x3d"0" allowfullscreen\x3e\x3c/iframe\x3e').attr("src",
"https://www.youtube.com/embed/"+c.match(d)[1]));b&&a.closest("td").find(".comment-attachments").append(b.wrap('\x3cdiv class\x3d"referenced-media"\x3e\x3c/div\x3e').parent())})});if(swarm.has.fullFileApi())$("body").on("dragenter",function(){$(".comment-form .can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,onRemove:swarm.comments.uploaderCallback}})});else $(b).on("update",function(){$(b).find(".textarea-wrapper.can-attach").removeClass("can-attach");
$(b).find(".drop-note").hide()});swarm.comments.renderTaskSummary();$(document).on("change.comment",".comment-form textarea",function(){swarm.comments.setFormState($(this).closest("form"),{body:$(this).val()})});$(b).on("update",function(){swarm.comments.initDelayTooltip($(b).find(".comment-form form"))})},initDelayTooltip:function(a){var c=a.find(".delay-notifications");c.data("tooltip")||(c.tooltip({html:!0,customClass:"delay-comments-tooltip",title:function(){var a=parseInt(c.find(".delayed-comments-counter").text(),
10),d=0<c.find(":checked").length?swarm.te("Email notifications will be delayed until you post with this option unchecked"):swarm.te("Email notifications will be sent immediately");a&&(d+='\x3cbr\x3e\x3cspan class\x3d"muted"\x3e'+swarm.tpe("%d delayed notification","%d delayed notifications",a)+"\x3c/span\x3e");return d}}),c.on("focusout",function(a){c.is(":hover")&&a.stopPropagation()}),c.find(":checkbox").on("change",function(){c.tooltip("show")}))},uploaderCallback:function(a){if("remove"!==a.type){a=
this.controlsContainer.closest("form");var c=$.extend({uploaders:[]},swarm.comments.getFormState(a)),b=this.controlsContainer.closest(".comments-section");c.uploaders.push(this);swarm.comments.setFormState(a,c);b.length&&swarm.comments.sizeCommentRowForDiff(b.filter(".comments-row"))}},updateArchived:function(a,c,b){a=$(a);$(".comments-wrapper").each(function(){swarm.comments.moveClosedComments(this,!0)});a.data("tooltip")&&a.data("tooltip").hide();if(c.closest(".comments-section").length){c=c.closest(".comments-section");
var d=(a=c.hasClass("comments-row"))?$(swarm.diff.getPairedRow(c)):$(),e=$().add(c).add(d);!e.find(".opened-comments tr").length&&!swarm.comments.hasPending(c)&&(!d.length||!swarm.comments.hasPending(d))?e.hide().trigger("hide"):a&&swarm.comments.sizeCommentRowForDiff(c)}else $('.change-tabs a[href\x3d"#files"]').off("shown.comments.close").one("shown.comments.close",function(){$(".diff-wrapper").each(function(){swarm.comments.sizeForDiff(this)})});swarm.comments.updateCounts(b)},load:function(a,
c){var b={context:$(c).data("context")};$.ajax("/comments/"+a,{data:b}).done(function(a){swarm.comments.update(c,a);swarm.form.checkInvalid($(c).find("form"))})},update:function(a,c){var b=$(a);b.html(c);b.find("input[name\x3dcontext]").val(JSON.stringify(b.data("context")));b.find(".comments-wrapper").data("comment-container",a);$(".diff-wrapper").removeClass("has-comments");b.find(".comments-table tr.row-main").each(function(){var a=$(this).data("context");a&&a.md5&&$(".diff-header-affix \x3e a").filter('[name\x3d"'+
a.md5+'"]').closest(".diff-wrapper").addClass("has-comments")});swarm.comments.moveClosedComments(b.find(".comments-wrapper"));swarm.comments.updateCounts(b);$(".change-tabs .active a").is('[href\x3d"#comments"]')&&!b.find("table.opened-comments \x3e tbody \x3e tr.row-main").length&&b.find(".comment-add textarea").focus();b.find("table.comments-table \x3e tbody \x3e tr.row-main").each(function(a,c){swarm.comments.renderTaskControls(c)});swarm.comments.renderTaskSummary(a);swarm.comments.applyCommentState($("#comments"));
b.trigger($.Event("update"))},updateCounts:function(a){a=$(a);var c=$(a.data("counter-node")),b=a.find(".comments-table.opened-comments tr.row-main").length;a=a.find(".comments-table.closed-comments tr.row-main").length;a=swarm.tp("%s archived",null,a);c.html(b).attr("title",a).attr("data-original-title",a)},renderTaskSummary:function(a){a=$(a);var c=a.find("table.opened-comments"),b=c.find("tr.task-state-open").length,d=c.find("tr.task-state-addressed").length,c=c.find("tr.task-state-verified").length;
a.find(".comments-wrapper").length||(c=d=b="-");$(".task-summary").html($.templates('\x3cdiv\x3e{{te:"Tasks"}}\x3c/div\x3e\x3cdiv class\x3d"task-totals"\x3e\x3cspan class\x3d"tasks-open {{if open \x3e 0}}has-value{{/if}}" title\x3d"{{te:"Open Tasks"}}" aria-label\x3d"{{te:"Open Tasks"}}"\x3e\x3ci class\x3d"swarm-icon icon-task-open"\x3e\x3c/i\x3e{{\x3eopen}}\x3c/span\x3e\x3cspan class\x3d"tasks-addressed {{if addressed \x3e 0}}has-value{{/if}}" title\x3d"{{te:"Addressed Tasks"}}" aria-label\x3d"{{te:"Addressed Tasks"}}"\x3e\x3ci class\x3d"swarm-icon icon-task-addressed"\x3e\x3c/i\x3e{{\x3eaddressed}}\x3c/span\x3e\x3cspan class\x3d"tasks-verified {{if verified \x3e 0}}has-value{{/if}}" title\x3d"{{te:"Verified Tasks"}}" aria-label\x3d"{{te:"Verified Tasks"}}"\x3e\x3ci class\x3d"swarm-icon icon-task-verified"\x3e\x3c/i\x3e{{\x3everified}}\x3c/span\x3e\x3c/div\x3e').render({open:b,
addressed:d,verified:c}))},renderTaskControls:function(a){var c=swarm.comments.getCommentId(a);a=$(a);var b=a.data("task-state");a=a.data("task-transitions");var d=!swarm.user.getAuthenticatedUser();a=$.map(a,function(a,c){return{state:c,css:c.replace(":","-"),label:a}});var e=$.templates('\x3cbutton class\x3d"bare pad0 dropdown-toggle btn-{{:taskState}} {{if disabled}}disabled{{/if}}" title\x3d"{{te:tooltip}}" data-customClass\x3d"task-state-tooltip" data-dropdown-container\x3d"body" data-toggle\x3d"dropdown"\x3e\x3ci class\x3d"swarm-icon icon-task-{{:taskState}}"\x3e\x3c/i\x3e\x3ci class\x3d"caret"\x3e\x3c/i\x3e\x3c/button\x3e\x3cul role\x3d"menu" class\x3d"task-state-menu dropdown-menu pull-right"\x3e{{for taskTransitions}}\x3cli\x3e\x3ca href\x3d"#" data-task-state\x3d"{{:state}}"\x3e\x3ci class\x3d"swarm-icon icon-task-{{:css}}"\x3e\x3c/i\x3e {{\x3elabel}}\x3c/a\x3e\x3c/li\x3e{{/for}}\x3c/ul\x3e').render({taskState:b,
tooltip:function(a){a="comment"===a?"Not a":a;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()+" Task"}(b),taskTransitions:a,disabled:d});$("tr.c"+c+".row-main").each(function(a,c){$(c).addClass("task-state-"+b).find(".task-state").html(e)})},moveClosedComments:function(a,c){a=$(a);var b=a.find(".closed-comments"),d=a.find(".opened-comments"),e=0<a.closest(".comments-section").length;if(d.length){b.length||(b=d.clone().toggleClass("opened-comments closed-comments"),b.find("\x3etbody").empty(),
a.prepend('\x3cdiv class\x3d"closed-comments-wrapper"\x3e\x3cdiv role\x3d"button" class\x3d"closed-comments-header center" aria-expanded\x3d"false" tabIndex\x3d"0"\x3e\x3c/div\x3e\x3cdiv class\x3d"closed-comments-body '+(e?"hidden":"collapse")+'"\x3e\x3c/div\x3e\x3c/div\x3e'),a.find(".closed-comments-body").append(b).on("shown hidden",function(a){a.target===this&&($(this).parent().toggleClass("expanded","shown"===a.type),$(this).prev(".closed-comments-header").attr("aria-expanded","shown"===a.type))}),
a.find(".closed-comments-header").on("click",function(a){a.preventDefault();a=$(this).next(".closed-comments-body");var c=e?a.hasClass("hidden"):!a.hasClass("in");e?a.toggleClass("hidden",!c).trigger(c?"shown":"hidden"):a.collapse(c?"show":"hide")}));var f=d.find("tr.closed");b.find("\x3etbody").append(f);f.find(".btn-close").attr({"data-original-title":swarm.t("Restore"),"aria-label":swarm.t("Restore")});c&&swarm.comments.sortComments(b.find("tr"));f=b.find("tr").not(".closed");d.find("\x3etbody").append(f);
f.find(".btn-close").attr({"data-original-title":swarm.t("Archive"),"aria-label":swarm.t("Archive")});c&&swarm.comments.sortComments(d.find("tr"));var f=swarm.query.all("tr.row-main",b),g=swarm.query.all("tr.row-main",d);a.find(".closed-comments-header").html("\x3cstrong\x3e"+f.length+"\x3c/strong\x3e "+swarm.tpe("archived comment","archived comments",f.length));d.toggleClass("hidden",!g.length);a.find(".closed-comments-wrapper").toggleClass("hidden",!f.length);a.closest(".comments-section").prev().toggleClass("archived-only",
!g.length);a.closest(".comments-section").toggleClass("archived-only",!g.length);f=function(a){$(a).find("tr.row-main").each(function(){var a=$(this),c=a.data("context").content,b=a.closest(".comments-section").prev(".diff-content"),b=b.length&&swarm.comments.getDiffContext(b),d=a.prev().prev().data("context"),d=d&&d.content,a=a.find(".content-context");b&&JSON.stringify(b)===JSON.stringify(c)?a.hide():d&&JSON.stringify(d)===JSON.stringify(c)?a.hide():a.show()})};f(d);f(b)}},sortComments:function(a){[].sort.call(a,
function(a,b){return swarm.comments.getCommentId(a)-swarm.comments.getCommentId(b)||($(a).is(".row-append")?1:-1)}).appendTo(a.parent())},getCommentId:function(a){return(a=$(a).attr("class").match(/c([0-9]+)/))&&parseInt(a[1],10)},add:function(a){a=$(a);swarm.form.post("/comments/add",a,function(c){c.isValid&&(swarm.comments.setFormState(a,null),swarm.comments.update(a.closest(".comments-wrapper").data("comment-container"),c.comments))})},edit:function(a){a=$(a);var c=a.closest("tr.row-main"),b=swarm.comments.getCommentId(c);
swarm.form.post("/comments/edit/"+b,a,function(b){b.isValid&&(swarm.comments.setFormState(a,null),swarm.comments.update(c.closest(".comments-wrapper").data("comment-container"),b.comments))},null,function(a){a=$(a).serializeArray();a.push({name:"renderComments",value:"true"});$.grep(a,function(a){return"attachments[]"===a.name}).length||a.push({name:"attachments",value:""});return a})},initDiff:function(a){"1"===swarm.localStorage.get("diff.comments.hide")&&$(".btn.toggle-comments").removeClass("active");
$(".diff-wrapper").on("load",function(){var c=$(this);c.find(".diff-footer").append($.templates('\x3cdiv class\x3d"file-comments-handle"\x3e\x3ci class\x3d"icon-comment"\x3e\x3c/i\x3e\x3cspan class\x3d"comments-label variable hidden"\x3e\x3c/span\x3e\x3cspan class\x3d"comment-form-link variable"\x3e{{if user}}\x3ca href\x3d"#" class\x3d"add-comment" onclick\x3d"return false;"\x3e{{te:"Add a Comment"}}\x3c/a\x3e{{else}}\x3ca href\x3d"{{url:"/login"}}" class\x3d"login" onclick\x3d"swarm.user.login(); return false;"\x3e{{te:"Log in to comment"}}\x3c/a\x3e{{/if}}\x3c/span\x3e\x3c/div\x3e').render({user:swarm.user.getAuthenticatedUser()}));
c.data("comment-container")||(c.data("comment-container",a),$(a).on("update",function(){swarm.comments.updateDiff(c)}));swarm.comments.updateDiff(c)});$(document).on("swarm-login",function(){$(".diff-footer").find(".file-comments-handle .comment-form-link").html('\x3ca href\x3d"#" class\x3d"add-comment"\x3e'+swarm.te("Add a Comment")+"\x3c/a\x3e")});$(".diff-wrapper").on("click.comments.login",".comment-form-link a.login",function(){var a=$(this).closest(".comments-section");a.length||(a=$(this).closest(".diff-footer").find(".file-comments-handle"));
swarm.comments.setSectionState(a,{pending:{login:!0}})});$(document).on("hidden.comments.login",".login-dialog",function(){swarm.user.getAuthenticatedUser()||$(".diff-wrapper").each(function(){swarm.comments.clearPendingLogin(this)})});$(".diff-wrapper").on("click.comment.line","tr.diff, .file-comments-handle",function(a){var b=window.getSelection(),d=$(b.anchorNode).add(b.focusNode);if(!(0!==a.button||!b.isCollapsed&&d.closest(".diff-body").length))if(b=$(this),!b.hasClass("diff-type-meta")&&!b.hasClass("line-pad")&&
(swarm.user.getAuthenticatedUser()||!b.hasClass("file-comments-handle")||b.hasClass("has-comments"))){a=$().add(b);if(d=b.hasClass("diff")){var e=b.closest(".diff-sideways"),f=$(swarm.diff.getPairedRow(b));a=a.add(f);!b.is(".diff-type-delete")&&e.is(".left-side")&&(b=f)}e=b.next(".comments-section");if(e.is(":visible")&&e.has(".comments-wrapper").length){var g=a.next(".comments-section");g.fadeOut({complete:function(){$(this).trigger("hidden");!g.find(".has-comments").length&&(!g.find(".comment-add textarea").val()&&
!g.find(".drop-controls div").length)&&($(this).prev().removeClass("has-comments"),$(this).remove())}}).trigger("hide")}else b=d?swarm.comments.getLineCommentWrapper(b):swarm.comments.getFileCommentWrapper(b.closest(".diff-wrapper")),a.next(".comments-section").show().trigger("show"),a.filter(".archived-only").next(".comments-section").find(".closed-comments-body").removeClass("hidden").trigger("shown"),b.find(".has-comments").length?swarm.comments.sizeCommentRowForDiff(b.closest(".comments-row")):
swarm.comments.showAddForm(b)}});$(".diff-wrapper").on("focusout.comment",".comments-section",function(){var a=$(this),b=a.hasClass("comments-row");setTimeout(function(){var d=b&&$(swarm.diff.getPairedRow(a)),e=document.activeElement,f=swarm.comments.getSectionState(a)||{},f=f.pending&&f.pending.login,g=a.is(e),h=g||a.find(e).length,j=a.find("textarea").val(),k=a.find(".drop-controls div").length,l=a.find(".comments-table tr").length;if(d&&d.length)var m=swarm.comments.getSectionState(d)||{},f=f||
m.pending&&m.pending.login,g=g||d.is(e),h=h||d.find(e).length,j=j||d.find("textarea").val(),k=k||d.find(".drop-controls div").length,l=l||d.find(".comments-table tr").length;!f&&(!h&&!j&&!l&&!k)&&a.add(d||null).fadeOut({complete:function(){$(this).prev().removeClass("has-comments");$(this).trigger("hidden");$(this).remove()}}).trigger("hide")},500)});$(".diff-wrapper").on("show.comment.row hide.comment.row",".comments-section",function(a){$(a.target).is(".comments-section")&&swarm.comments.setSectionState($(this),
{collapsed:"hide"===a.type})});$(".diff-wrapper").on("show.comment.state.inline",".diff-inline",function(a){$(a.target).is(".diff-inline")&&swarm.comments.applyCommentState($(this).closest(".diff-wrapper"))});$(".diff-wrapper").on("textarea-resize",".comment-form textarea",function(){swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});$(".diff-wrapper").on("form-errors",".comment-add form, form.comment-edit",function(){swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});
$(".diff-wrapper").on("shown.closed.comments, hidden.closed.comments",".comments-wrapper .closed-comments-body",function(a){this===a.target&&swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});$(".diff-wrapper").on("show.comment.sideways",".diff-sideways.left-side",function(a){$(a.target).is(".diff-sideways.left-side")&&swarm.comments.updateSidewaysDiff($(this).closest(".diff-wrapper"))});$(".diff-wrapper").on("show-full show-more-context",function(){swarm.comments.updateDiff(this)});
$(".diff-wrapper").on("diff-resize",function(){swarm.comments.sizeForDiff(this)})},updateDiff:function(a){a=$(a);var c=a.data("comment-container"),b=a.data("file").depotFile,d=a.find(".diff-inline, .diff-footer"),e=function(a){a=a.add(a.next(".row-append")).clone(!0);a.find("img.loaded").removeClass("loaded");a.find(".context").remove();a.find(".timeago").timeago();a.find("form").remove();a.removeClass("edit-mode").next().removeClass("edit-mode");return a};if($("#files.active").length){d.find("tr.has-comments, .file-comments-handle.has-comments").removeClass("has-comments");
d.find(".comments-cell").empty();var f;$(c).find(".comments-table tr.row-main").each(function(){var c=$(this),d=c.data("context"),g=(d.leftLine?".ll"+d.leftLine:"")+(d.rightLine?".lr"+d.rightLine:"");if(d.file!==b)return!0;if(!g){var l=e(c);f=f||swarm.comments.getFileCommentWrapper(a);f.find(".comments-table").addClass("has-comments").find("tbody").append(l);return!0}a.find(".diff-inline").each(function(){var b=$(this).find(g);b.length||(b=d.leftLine?$(this).find(".ll"+d.leftLine):$(this).find(".lr"+
d.rightLine));b=a.hasClass("show-full")?b.not(".additional-context-content"):b.not(".diff-full-context");if(!b.length)return!0;var f;f=swarm.comments.getDiffContext(b);JSON.stringify(f)!==JSON.stringify(d.content)&&(d.content&&3<=d.content.length)&&(b=(f=swarm.comments.findDiffContent(d.content,this))||b);f=e(c);swarm.comments.getLineCommentWrapper(b).find(".comments-table").addClass("has-comments").find("tbody").append(f)})});d.find(".comments-section").not(":has(.has-comments)").remove();var g=
a.find(".diff-footer .comments-section tr.row-main").length;a.find(".diff-footer .file-comments-handle .comments-label").html('\x3ca href\x3d"#" onclick\x3d"return false;"\x3e'+(g||"")+"\x3c/strong\x3e "+swarm.tpe("comment","comments",g)+"\x3c/a\x3e").toggleClass("hidden",0===g);a.find(".diff-footer .file-comments-handle .comment-form-link").toggleClass("hidden",0!==g);if(0!==d.find(".comments-section").length||swarm.comments.hasPending(a))a.find(".comments-wrapper").each(function(){swarm.comments.moveClosedComments(this)}),
"1"===swarm.localStorage.get("diff.comments.hide")?a.find(".comments-section").hide():a.find(".comments-section.archived-only").hide(),"sideways"===swarm.diff.getDiffMode(a)?swarm.diff.showSideways(a.find(".btn-sideways"),!0):(a.find(".diff-sideways").remove(),swarm.comments.applyCommentState(a)),$(c).find(".comments-table tr").length&&a.data("comments-loaded",!0).trigger($.Event("comments-loaded")),swarm.comments.clearPendingLogin(a)}else $('.change-tabs a[href\x3d"#files"]').off("shown.comments.update"),
$('.change-tabs a[href\x3d"#files"]').one("shown.comments.update",function(){swarm.comments.updateDiff(a)})},hasPending:function(a){if(a instanceof window.jQuery||a instanceof window.HTMLElement){a=$(a);if(a.hasClass("diff-wrapper")){var c=!1;$.each(a.data("comment-state")||{},function(a,b){c=swarm.comments.hasPending(b);return!c});return c}return swarm.comments.hasPending(swarm.comments.getSectionState(a))}var b=a.pending&&!!a.pending.body,d=a.pending&&a.pending.uploaders&&!!a.pending.uploaders.length;
return a.pending&&!!a.pending.login||b||d},sizeForDiff:function(a){a=$(a);a.each(function(){var a=$(this),b=a.find(".diff-details");if(a.data("diff-loaded")&&!b.hasClass("in"))b.off("show.size.comments").on("show.size.comments",function(d){b.is(d.target)&&(b.off("show.size.comments"),setTimeout(function(){swarm.comments.sizeForDiff(a)},0))})});a.find(".diff-details.in .diff-body").each(function(){var a=$(this);if(a.filter(".diff-sideways").not(".left-side").length&&"none"!==$(a.data("diff-pair")).css("display"))return!0;
a.find(".comments-row").filter(":visible").each(function(){swarm.comments.sizeCommentRowForDiff(this)})})},sizeCommentRowForDiff:function(a){a=$(a);var c=a.closest(".diff-body"),b=a.find(".comments-wrapper").outerHeight();c.is(".diff-sideways")&&(c=swarm.diff.getPairedRow(a),a=a.add(c),b=Math.max(b,$(c).find(".comments-wrapper").outerHeight()));a.find("\x3etd").height(b)},updateSidewaysDiff:function(a){a=$(a);a.find(".comments-section").length?(a.find(".diff-sideways.left-side  tr.comments-row.diff-type-add").remove(),
a.find(".diff-sideways.left-side  tr.comments-row.diff-type-same").remove(),a.find(".diff-sideways.right-side tr.comments-row.diff-type-delete").remove(),a.find(".diff-sideways tr.comments-row").each(function(){for(var a=$(this).prev();a.hasClass("line-pad");)a=$(a).prev();$(this).insertAfter(a)}),a.find(".diff-sideways.left-side").each(function(){var a,b,d,e,f,g=$(this).find("tr.diff"),h=$($(this).data("diff-pair")).find("tr.diff");for(a=0;a<g.length;a++)b=$(g[a].nextSibling),d=$(h.length<=a?null:
h[a].nextSibling),e=b.hasClass("comments-row"),f=d.hasClass("comments-row"),e&&!f&&(d=b.clone(),d.find(".comments-cell").empty(),d.insertAfter(h.eq(a))),f&&!e&&(b=d.clone(),b.find(".comments-cell").empty(),b.insertAfter(g.eq(a))),e&&(f&&"1"!==swarm.localStorage.get("diff.comments.hide"))&&(b=b.add(d).filter(".archived-only"),1===b.length&&b.show())}),swarm.comments.applyCommentState(a)):swarm.comments.hasPending(a)&&swarm.comments.applyCommentState(a)},_createCommentWrapper:function(a,c){a=$(a);var b=
$('\x3cdiv class\x3d"comments-wrapper border-box variable"\x3e \x3ctable class\x3d"table opened-comments comments-table"\x3e  \x3ctbody\x3e\x3c/tbody\x3e \x3c/table\x3e\x3c/div\x3e'),d=a.find(".comment-add").clone(),e=d.find("form");c=$.extend(c,a.data("context"));e.find("input[name\x3dcontext]").val(JSON.stringify(c));e.find("textarea").val("");e.find(".drop-controls").html("");d.find("img.loaded").removeClass("loaded");b.append(d);swarm.form.clearErrors(e,!0);swarm.form.checkInvalid(e);b.data("commentContainer",
a);return b},getFileCommentWrapper:function(a){a=$(a);var c=a.data("comment-container"),b=a.find(".diff-footer"),d=b.find(".file-comments-handle"),b=b.find(".file-comments-section"),e=b.find(".comments-wrapper");b.length||(b=$('\x3cdiv class\x3d"file-comments-section comments-section comments-cell" tabIndex\x3d"0" /\x3e').insertAfter(d));e.length||(e=swarm.comments._createCommentWrapper(c,{file:a.data("file").depotFile}).appendTo(b),e.find(".btn").addClass("btn-small"));d.addClass("has-comments");
swarm.comments.initDelayTooltip(e.find(".comment-add form"));return e},getLineCommentWrapper:function(a){var c=$(a).closest(".diff-wrapper").data("comment-container"),b=$(a).next("tr.comments-row"),d=b.find(".comments-wrapper");b.length||(b=$(a).attr("class").match(/diff-(type|full)-[a-z]+/gi).join(" "),b=$(a).clone().insertAfter(a).attr("class","comments-section comments-row "+b),b.find(".line-value").attr("class","comments-cell"),b.find(".line-num").attr("data-num",""),b.find("td").empty());d.length||
(d=swarm.diff.getLineNumber(a),d=swarm.comments._createCommentWrapper(c,{file:$(a).closest(".diff-wrapper").data("file").depotFile,leftLine:d.left,rightLine:d.right,content:swarm.comments.getDiffContext(a)}).appendTo(b.find(".comments-cell")),c=d.find(".comment-add"),c.find("table").length&&($("\x3ca /\x3e",{href:"#",text:swarm.t("Add a Comment")}).click(function(){swarm.comments.showAddForm($(this).closest(".comments-wrapper"));return!1}).appendTo($("\x3cdiv /\x3e",{"class":"comment-form-link"}).appendTo(c)),
c.find(".btn").addClass("btn-small"),(c.find("textarea").val()?c.find(".comment-form-link"):c.find("table")).addClass("hidden")),$(a).addClass("has-comments"));(a=swarm.diff.getPairedRow(a))&&!$(a).next(".comments-row").length&&b.clone().insertAfter(a).find(".comments-cell").empty();return d},applyPendingUploaders:function(a,c){c&&(a.find(".can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,onRemove:swarm.comments.uploaderCallback}}),
$.each(c,function(b,c){a.find(".can-attach").data("dropZone").addUploader(c)}))},applyCommentState:function(a){if(a.is(".diff-wrapper"))swarm.comments.applyDiffCommentState(a);else if(swarm.comments.applyEditCommentState(a),a=a.find(".comment-add form"),a.length){var c=swarm.comments.getFormState(a);swarm.comments.applyPendingUploaders(a,c.uploaders);a.find("textarea").val(c.body||"");swarm.form.checkInvalid(a)}},applyDiffCommentState:function(a){var c="1"===swarm.localStorage.get("diff.comments.hide"),
b=$(a).find(".diff-footer"),d=swarm.diff.getActiveDiffBody(a);d.length&&($.each($(a).data("comment-state")||{},function(e,f){f=$.extend({collapsed:c},f);b.find(e).each(function(){var b=swarm.comments.hasPending(f);if(!b&&!$(this).next(".comments-section").find(".has-comments").length)$(this).removeClass("has-comments").next(".comments-section").remove();else{var c=swarm.comments.getFileCommentWrapper(a),d=f.pending&&f.pending.body||"";c.find(".comment-add textarea").val(d).trigger("change");c.closest(".comments-section").toggle(!f.collapsed);
swarm.comments.applyPendingUploaders(c.find(".comment-add form"),f.pending&&f.pending.uploaders||[]);!f.collapsed&&b&&swarm.comments.showAddForm(c)}});d.find(e).each(function(){var a=$(this).closest(".diff-body"),b=$(this).hasClass("diff-type-delete");if(!(a.hasClass("left-side")&&!b||a.hasClass("right-side")&&b)){var a=swarm.diff.getPairedRow(this),c=swarm.comments.getSectionState(a)||f,b=swarm.comments.hasPending(f),d=swarm.comments.hasPending(c),e=b||0!==$(this).next().find(".has-comments").length,
d=d||0!==$(a).next().find(".has-comments").length;if(!e&&!d)$(this).removeClass("has-comments").next(".comments-row").remove(),$(a).removeClass("has-comments").next(".comments-row").remove();else{var e=swarm.comments.getLineCommentWrapper(this),m=f.pending&&f.pending.body||"";e.find(".comment-add textarea").val(m).trigger("change");swarm.comments.applyPendingUploaders(e.find(".comment-add form"),f.pending&&f.pending.uploaders||[]);c=!f.collapsed||d&&!c.collapsed;e.closest(".comments-row").toggle(c);
$(a).next(".comments-row").toggle(c);c&&b&&swarm.comments.showAddForm(e)}}});swarm.comments.applyEditCommentState(d);swarm.comments.applyEditCommentState(b)}),swarm.comments.sizeForDiff(a))},applyEditCommentState:function(a){var c=$("#comments").data("comment-state")||{};$.each(c,function(b){b=a.find(".row-main.c"+b);b.length&&swarm.comments.showEditForm(b)})},clearPendingLogin:function(a){$.each($(a).data("comment-state")||{},function(c,b){b.pending&&b.pending.login&&swarm.comments.setState(a,c,
{pending:{login:null}})})},setState:function(a,c,b){if(c){a=$(a);var d=a.data("comment-state")||{};null===b?delete d[c]:d[c]=$.extend(!0,d[c],b);a.data("comment-state",d)}},setSectionState:function(a,c){$(a).each(function(){var a=$(this);swarm.comments.setState(a.closest(".diff-wrapper"),swarm.comments.getSectionKey(a),c)})},setFormState:function(a,c){a=$(a);var b=a.closest(".comments-section");a.is(".comment-edit")?swarm.comments.setState($("#comments"),swarm.comments.getCommentId(a.closest(".row-main")),
c):b.length?swarm.comments.setSectionState(b,{pending:c}):swarm.comments.setState($("#comments"),"add",c)},getFormState:function(a){a=$(a);var c;c=a.closest(".comments-section");a.is(".comment-edit")?(c=$("#comments").data("comment-state")||{},c=c[swarm.comments.getCommentId(a.closest(".row-main"))]):c.length?(c=swarm.comments.getSectionState(c)||{},c=c.pending):(c=$("#comments").data("comment-state")||{},c=c.add);return c||{}},getSectionState:function(a){if($(a).length){var c={collapsed:"1"===swarm.localStorage.get("diff.comments.hide")},
b=$(a).closest(".diff-wrapper");a=swarm.comments.getSectionKey(a);b=b.data("comment-state")||{};return a&&$.extend(c,b[a])}},getSectionKey:function(a){var c;a=$(a);if(a.hasClass("comments-row"))a=a.prev(),c=a.length?swarm.diff.getLineSelector(a):null;else if(a.hasClass("diff"))c=swarm.diff.getLineSelector(a);else if(a.hasClass("file-comments-section")||a.hasClass("file-comments-handle"))c=".file-comments-handle";return c},getDiffContext:function(a){a=$(a).closest(".diff-wrapper").find(".diff-inline.ws").find(swarm.diff.getLineSelector(a));
for(var c=[];5>c.length;){if(a.is(".diff-content"))c.unshift(a.find(".line-value").text().slice(0,256));else if(!a.is(".comments-row"))break;a=a.prev()}return c},findDiffContent:function(a,c){var b=!1;$(c).find(".diff-content .line-value").each(function(){if(a[a.length-1]===$(this).text().slice(0,256)){var c=$(this).closest("tr"),e=swarm.comments.getDiffContext(c);if(JSON.stringify(e)===JSON.stringify(a))return b=c,!1}});return b},showAddForm:function(a){a=$(a);swarm.comments.hideUnchangedForms(a);
a.find(".comment-add table").length&&(a.find(".comment-add table").toggleClass("hidden",!1),a.find(".comment-add .comment-form-link").toggleClass("hidden",!0),a.find("textarea").textareaResize());swarm.comments.sizeForDiff(a.closest(".diff-wrapper"));var c=a.find(".comment-add textarea");setTimeout(function(){c.focus()},0);swarm.comments.initDelayTooltip(a.find(".comment-add form"))},showEditForm:function(a){var c=a.closest(".comments-wrapper"),b=a.find(".comment-body").outerHeight(),d=swarm.comments.prepareEditForm(a),
e=d.find("textarea"),f=d.find(".can-attach").data("dropZone");swarm.comments.hideUnchangedForms(c);a.addClass("edit-mode").next().addClass("edit-mode");e.val(a.data("body"));a.find("td:last-child()").append(d);e.height(b+(e.outerHeight()-e.height()));b=swarm.comments.getFormState(d);a=b.uploaders||a.find(".attachment").map(function(){return $(this).data("attachment")});e.val(b.body||e.val());f&&$.each(a,function(a,c){f.addUploader(c)});swarm.form.checkInvalid(d);swarm.comments.sizeForDiff(c.closest(".diff-wrapper"));
setTimeout(function(){var a=e.val();e.focus().val("").val(a).scrollTop(e.prop("scrollHeight")-e.height())},0);swarm.comments.initDelayTooltip(d)},hideEditForm:function(a){a.removeClass("edit-mode").next().removeClass("edit-mode");a.find("form").remove();swarm.comments.sizeCommentRowForDiff(a.closest(".comments-row"))},prepareEditForm:function(a){var c=a.closest(".comments-wrapper").find(".comment-add form").clone(),b=c.find(".btn-primary");c.attr("onsubmit","");c.find("textarea").val("");c.find(".upload-controls").remove();
c.addClass("comment-edit comment-form");c.find('textarea[name\x3d"body"]').attr("placeholder",swarm.te("Edit Comment"));c.find("textarea").textareaResize();c.find(".can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,onRemove:swarm.comments.uploaderCallback}});c.find("label.flag-task").remove();b.text(swarm.te("Save")).removeClass("disabled").removeAttr("disabled");c.on("submit",function(a){a.preventDefault();swarm.comments.edit(this)});
$($.templates('\x3cbutton type\x3d"reset" class\x3d"btn btn-default btn-cancel"\x3e{{te:"Cancel"}}\x3c/button\x3e').render()).insertAfter(b).on("click",function(){swarm.comments.setFormState(a.find("form"),null);swarm.comments.hideEditForm(a)});a.closest(".diff-wrapper").length&&c.find(".btn").addClass("btn-small");return c},hideUnchangedForms:function(a){a.closest(".diff-wrapper").find(".comments-wrapper").each(function(){!$(this).find(".comment-add textarea").val()&&!$(this).find(".upload-controls").length&&
($(this).find(".comment-add table").toggleClass("hidden",!0),$(this).find(".comment-add .comment-form-link").toggleClass("hidden",!1));$(this).find(".comment-edit").each(function(){var a=$(this),b=$.deparam(a.serialize()),a=a.closest(".row-main");if(a.data("body")===b.body){var d=a.find(".attachment").map(function(){return String($(this).data("attachment").id)});JSON.stringify(d.toArray())===JSON.stringify(b.attachments||[])&&swarm.comments.hideEditForm(a)}})})},toggleDiffComments:function(a){$(a).toggleClass("active");
var c=$(a).is(".active");swarm.localStorage.set("diff.comments.hide",c?"0":"1");var b=$([null]),d=$([null]);a=swarm.query.all(".diff-wrapper .comments-section").filter(function(){b[0]=this;if(c&&(b.hasClass("archived-only")||!b.find("tr").length))if(d[0]=swarm.diff.getPairedRow(this),!d[0]||d.hasClass("archived-only")||!d.find("tr").length)return!1;return b.toggle(c).trigger(c?"show":"hide")&&!0});swarm.comments.sizeForDiff(a.closest(".diff-wrapper"))}};(function(c){var d=function(a){c.extend(this,d.defaults,a);this.getControls();this.isExistingFile()?this.rebuildControls():this.upload();this.onStart(c.Event("start",{target:this}))};d.defaults={file:null,maxSize:null,uploadUrl:null,controlsContainer:null,extraData:null,onStart:c.noop,onRemove:c.noop};d.prototype={uploaded:null,response:null,controls:null,isExistingFile:function(){return!(this.file instanceof window.File)},isRemoved:function(){return this.controls&&this.controls.find("input").prop("disabled")?
!0:!1},upload:function(){this.uploaded=0;if(this.file.size>this.maxSize)return this.errorBar(this.getControls(),swarm.te("File too large")+" (\x3e"+(1024>this.maxSize?this.maxSize+"B":this.maxSize<Math.pow(1024,2)?Math.round(this.maxSize/1024)+"KB":Math.round(this.maxSize/Math.pow(1024,2))+"MB")+")");var a=new FormData;a.append("file",this.file);a.append("name",this.file.name);c.each(this.extraData||{},function(b,c){a.append(b,c)});var b=new XMLHttpRequest;this.attachProgressHandler(b);this.attachLoadHandler(b);
this.attachErrorHandler(b);b.open("POST",this.uploadUrl);b.send(a)},attachErrorHandler:function(a){a.addEventListener("error",c.proxy(function(a){a=a.currentTarget;a.isValid=!1;this.response=a;this.updateProgress()},this))},attachProgressHandler:function(a){a.upload.addEventListener("progress",c.proxy(function(a){a.lengthComputable&&(this.uploaded=a.loaded);this.updateProgress()},this))},attachLoadHandler:function(a){a.addEventListener("load",c.proxy(function(a){a=this.response=a.currentTarget;var e=
this.getControls();try{a.json=c.parseJSON(a.responseText),a.isValid=200===a.status&&a.json.isValid}catch(d){a.isValid=!1}a.isValid&&(this.uploaded=this.file.size,e.append('\x3cinput type\x3d"hidden" name\x3d"attachments[]" value\x3d\''+a.json.attachment.id+"'\x3e"));this.updateProgress()},this))},updateProgress:function(){var a=this.isExistingFile()?100:100*Math.round(this.uploaded/this.file.size),b=this.getControls();b.find(".bar").css("width",a+"%");if(this.response&&!this.response.isValid)this.errorBar(b,
swarm.te("Upload Failed"));else if(this.response||this.isExistingFile())b.find(".progress").removeClass("active progress-striped").addClass("progress-success"),b.find(".bar").css("width","100%"),b.removeClass("invalid"),swarm.form.checkInvalid(b.closest("form"))},getControls:function(){if(this.controls)return this.controls;this.controls=c(c.templates('\x3cdiv class\x3d"upload-controls pad1 invalid"\x3e\x3cspan class\x3d"close" title\x3d"{{te:"Remove"}}"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"progress active"\x3e\x3cdiv class\x3d"bar underlay"\x3e{{\x3efile.name}}\x3c/div\x3e\x3cdiv class\x3d"bar"\x3e{{\x3efile.name}}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e').render({file:this.file}));
this.controlsContainer.append(this.controls);this.controls.find(".close").on("click",c.proxy(function(){var a=this.controls.find(".close"),b=this.controls.find("input"),e=this.controls.find(".close i");b.prop("disabled",!b.prop("disabled"));b.prop("disabled")?(this.controls.addClass("removed"),a.attr("data-original-title",swarm.te("Restore")),e.removeClass("icon-remove").addClass("icon-share-alt")):(this.controls.removeClass("removed"),a.attr("data-original-title",swarm.te("Remove")),e.removeClass("icon-share-alt").addClass("icon-remove"));
a.tooltip("show");swarm.form.checkInvalid(this.controlsContainer.closest("form"));this.onRemove(c.Event("remove",{target:this}))},this));swarm.form.checkInvalid(this.controlsContainer.closest("form"));return this.controls},rebuildControls:function(a){var b=this.isRemoved();c(this.controls).remove();this.controls=null;this.controlsContainer=a?c(a):this.controlsContainer;a=this.getControls();if(this.isExistingFile()||this.response&&this.response.isValid){var e=this.isExistingFile()?this.file.id:this.response.json.attachment.id,
e=c("\x3cinput\x3e").attr("type","hidden").attr("name","attachments[]").attr("value",e);a.append(e);b&&(e.prop("disabled",!0),a.addClass("removed"),a.find(".close").attr("title",swarm.te("Restore")),a.find(".close i").removeClass("icon-remove").addClass("icon-share-alt"))}this.updateProgress()},errorBar:function(a,b){var c=a.find(".progress"),d=a.find(".bar");c.removeClass("active progress-striped");c.addClass("progress-danger");d.append(" - "+b);d.css("width","100%")}};var f=function(a,b){this.$element=
c(a);this.options=c.extend({},c.fn.dropZone.defaults,b);this.$controlsContainer=this.$element.find(".drop-controls");this.uploaders=[];this.$element.on("dragover dragenter",function(b){b.preventDefault();b.stopPropagation();c(a).addClass("dragover")});this.$element.on("dragleave",function(){c(a).removeClass("dragover")});this.$element.on("drop",c.proxy(this.onDrop,this))};f.prototype={constructor:f,onDrop:function(a){a.preventDefault();a.stopPropagation();this.$element.removeClass("dragover");var b=
a.originalEvent.dataTransfer.files;for(a=0;a<b.length;a++)this.addUploader(b[a])},addUploader:function(a){a instanceof d?(a.controlsContainer=this.$controlsContainer,a.rebuildControls()):a=new d(c.extend({file:a,maxSize:this.$element.closest("form").data("max-size"),controlsContainer:this.$controlsContainer,uploadUrl:this.$element.data("upload-url")},this.options.uploaderOptions));this.uploaders.push(a)},addExistingFile:function(a){this.addUploader(a)}};c.fn.dropZone=function(a){return this.each(function(){var b=
c(this);!b.data("dropZone")&&swarm.has.fullFileApi()&&b.data("dropZone",new f(this,a))})};c.fn.dropZone.Constructor=f;c.fn.dropZone.defaults={uploaderOptions:null}})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.reviews={init:function(){var a=$(".reviews .tab-pane.active"),b=$.deparam(location.search,!0);swarm.reviews.setFilters(b,a);swarm.reviews.load(a,!0);$(".reviews .tab-pane").not(a).each(function(){swarm.reviews.setFilters(b,this);swarm.reviews.load(this,!0)});$(".reviews .btn-filter").on("click.reviews.filter",function(a){a.preventDefault();swarm.reviews.toggleFilter(this,!0)});$(window).scroll(function(){$.isScrolledToBottom()&&swarm.reviews.load($(".reviews .tab-pane.active"))});$(".reviews .toolbar .search input").on(["input",
"keyup","blur"].map(function(a){return a+".reviews.search"}).join(" "),function(a){var b=$(this).closest(".tab-pane");clearTimeout(swarm.reviews.searchTimeout);swarm.reviews.searchTimeout=setTimeout(function(){if($(a.target).val()!==(b.data("last-search")||""))swarm.reviews.applyFilters(b),b.data("last-search",$(a.target).val())},500)})},load:function(a,b,c){a=$(a);if(a.data("loading")){if(!b)return;a.data("loading").abort();a.data("loading",!1)}var d=$(a).find(".reviews-table");b&&(d.data("last-seen",
null),d.data("end-of-data",null),d.find("tbody").empty());if(!d.data("end-of-data")){d.find("tbody").append('\x3ctr class\x3d"loading muted hide"\x3e \x3ctd colspan\x3d"'+d.find("thead th").length+'"\x3e  \x3cspan class\x3d"loading"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e \x3c/td\x3e\x3c/tr\x3e");setTimeout(function(){d.find("tbody tr.loading").removeClass("hide").find(".loading").addClass("animate")},void 0===c?2E3:0);var e=$.ajax({url:location.pathname,data:$.extend(swarm.reviews.getFilters(a),
{format:"json",max:50,after:d.data("last-seen")}),dataType:"json",success:function(b){d.find("tbody tr.loading").remove();(null===b.lastSeen||b.lastSeen===d.data("last-seen"))&&d.data("end-of-data",!0);d.data("last-seen",b.lastSeen);$.each(b.reviews,function(a,b){var c=$.templates('\x3ctr data-id\x3d"{{\x3eid}}" class\x3d"state-{{\x3estate}}"\x3e \x3ctd class\x3d"id"\x3e\x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e{{\x3eid}}\x3c/a\x3e\x3c/td\x3e \x3ctd class\x3d"author center"\x3e{{:authorAvatar}}\x3c/td\x3e \x3ctd class\x3d"description"\x3e{{:description}}\x3c/td\x3e \x3ctd class\x3d"project-branch"\x3e{{:projects}}\x3c/td\x3e \x3ctd class\x3d"created"\x3e\x3cspan class\x3d"timeago" title\x3d"{{\x3ecreateDate}}"\x3e\x3c/span\x3e\x3c/td\x3e \x3ctd class\x3d"state center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e\x3ci class\x3d"swarm-icon icon-review-{{\x3estate}}" title\x3d"{{te:stateLabel}}"\x3e\x3c/i\x3e\x3c/a\x3e \x3c/td\x3e \x3ctd class\x3d"test-status center"\x3e  {{if testStatus \x3d\x3d "pass"}}{{if testDetails.url}}\x3ca href\x3d"{{url:testDetails.url}}" target\x3d"_blank"\x3e{{/if}}  \x3ci class\x3d"icon-check" title\x3d"{{te:"Tests Pass"}}"\x3e\x3c/i\x3e{{if testDetails.url}}\x3c/a\x3e{{/if}}  {{else testStatus \x3d\x3d "fail"}}{{if testDetails.url}}\x3ca href\x3d"{{url:testDetails.url}}" target\x3d"_blank"\x3e{{/if}}  \x3ci class\x3d"icon-warning-sign" title\x3d"{{te:"Tests Fail"}}"\x3e\x3c/i\x3e{{if testDetails.url}}\x3c/a\x3e{{/if}}  {{/if}} \x3c/td\x3e \x3ctd class\x3d"comments center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}#comments" {{if comments[1]}}title\x3d"{{tpe:"%s archived" "" comments[1]}}"{{/if}}\x3e   \x3cspan class\x3d"badge {{if !comments[0]}}muted{{/if}}"\x3e{{\x3ecomments[0]}}\x3c/span\x3e  \x3c/a\x3e \x3c/td\x3e \x3ctd class\x3d"votes center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e   \x3cspan class\x3d"badge {{if !upVotes.length \x26\x26 !downVotes.length}}muted{{/if}}"\x3e    {{\x3eupVotes.length}} / {{\x3edownVotes.length}}   \x3c/span\x3e  \x3c/a\x3e \x3c/td\x3e\x3c/tr\x3e').render(b);
$(c).appendTo(d.find("tbody"))});("opened"===$(a).attr("id")?$(".reviews .opened-counter"):$(".reviews .closed-counter")).text(d.data("end-of-data")?d.find("td.id").length:b.totalCount);d.find(".timeago").timeago();if(!d.find("tbody tr").length&&d.data("end-of-data")){var g=swarm.te($(a).find(".btn-filter.active").not(".default").length?"No "+$(a).attr("id")+" reviews match your filters.":"No "+$(a).attr("id")+" reviews.");$('\x3ctr class\x3d"reviews-info"\x3e \x3ctd colspan\x3d"'+d.find("thead th").length+
'"\x3e  \x3cdiv class\x3d"alert border-box pad3"\x3e'+g+"\x3c/div\x3e \x3c/td\x3e\x3c/tr\x3e").appendTo(d.find("tbody"))}d.find(".description").expander({slicePoint:90});c=(void 0===c?50:c)-b.reviews.length;var h=d.height();h||$.swap(a[0],{display:"block",visibility:"hidden"},function(){h=d.height()});if(c>Math.round(25)||h&&h<$(window).height())return a.data("loading",!1),swarm.reviews.load(a,!1,c);setTimeout(function(){a.data("loading")===e&&a.data("loading",!1)},500)}});a.data("loading",e)}},toggleFilter:function(a,
b){$(a).closest(".dropdown-menu").length?($(a).addClass("active"),$(a).closest(".btn-group").find(".text").html($(a).data("short-label")||$(a).html())):$(a).toggleClass("active");$(a).closest(".btn-group.group-radio").find(".btn-filter").not(a).removeClass("active");b&&swarm.reviews.applyFilters($(a).closest(".tab-pane"))},applyFilters:function(a){var b=swarm.reviews.getFilters(a);b.state&&b.state.length===swarm.reviews.getAllTabStates(a).length&&delete b.state;b.state&&(b.state=b.state.split(":")[0]);
var c=$.isEmptyObject(b)?"":"?"+$.param(b),d="#"+encodeURIComponent(a[0].id);swarm.history.replaceState(null,null,location.pathname+c+d);swarm.reviews.load(a,!0);$(".reviews .tab-pane").not(a).each(function(){swarm.reviews.setFilters(b,this);swarm.reviews.load(this,!0)})},getFilters:function(a){var b={};$(a).find(".btn-filter.active").each(function(){var a=$(this),d=a.closest(".btn-group"),d=a.data("filterKey")||d.data("filterKey"),a=a.data("filterValue");d&&""!==a&&(b.hasOwnProperty(d)?($.isArray(b[d])||
(b[d]=[b[d]]),b[d].push(a)):b[d]=a)});b.state||(b.state=swarm.reviews.getAllTabStates(a));if(a=$(a).find(".toolbar .search input").val())b.keywords=a;return b},getAllTabStates:function(a){var b=[];$(a).find(".toolbar [data-filter-key\x3dstate] button").each(function(){b.push($(this).data("filter-value"))});return b},setFilters:function(a,b){a=$.extend({},a);if($.isArray(a.state)){var c=swarm.reviews.getAllTabStates(b);$.grep(a.state,function(a){return-1!==$.inArray(a,c)}).length===c.length&&delete a.state}$(b).find(".btn-group[data-filter-key]").each(function(){var b=
$(this),c=b.data("filter-key");b.find(".btn-filter.active").removeClass("active");if(a.hasOwnProperty(c))var f=String(a[c]),b=b.find(".btn-filter").filter(function(){var a=String($(this).data("filter-value"));"state"===c&&(a=a.split(":")[0],f=f.split(":")[0]);return a===f});else b=b.find(".btn-filter.default");b.length&&swarm.reviews.toggleFilter(b,!1)});swarm.reviews.toggleFilter($(b).find(".btn-my-reviews a.btn-filter.default"),!1);a.author&&swarm.reviews.toggleFilter($(b).find(".btn-my-reviews a[data-filter-key\x3dauthor]"),
!1);a.participants&&swarm.reviews.toggleFilter($(b).find(".btn-my-reviews a[data-filter-key\x3dparticipants]"),!1);$(b).find(".toolbar .search input").val(a.keywords||"");$(b).data("last-search",a.keywords||"")}};
swarm.review={init:function(){swarm.review.initSlider();swarm.review.buildStateMenu();swarm.review.updateTestStatus();swarm.review.updateDeployStatus();swarm.review.initEdit();swarm.review.initReviewers();swarm.review.initReadUnread();$(document).on("swarm-login",function(){$.ajax("/reviews/"+$(".review-wrapper").data("review").id,{data:{format:"json"},dataType:"json",success:function(a){swarm.review.updateReview($(".review-wrapper"),a)}})});var a=function(a){JSON.stringify(a)!==JSON.stringify($(".review-wrapper").data("review"))&&
($(".review-wrapper").data("review",a),swarm.review.buildStateMenu());if(a.commitStatus.error){var b=$(".review-transition.modal");b.find(".messages").append('\x3cdiv class\x3d"alert"\x3e'+swarm.te(a.commitStatus.error)+"\x3c/div\x3e");b.find("textarea").prop("disabled",!1);swarm.form.enableButton(b.find("[type\x3dsubmit]"));return!1}if($.isEmptyObject(a.commitStatus)&&!a.pending)return window.location.reload(),!1};$(".review-header").on("click",".state-menu a",function(b){b.preventDefault();b=$(this);
var d=b.data("state"),e=b.closest(".review-wrapper"),f=b.closest(".btn-group").find(".btn");f.dropdown("toggle");if("attach-commit"===d)swarm.changes.openChangeSelector(swarm.url("/reviews/add"),e.data(),function(a){var b=$(a).find(".change-input input").val();$(a).find(".changes-list, input").addClass("disabled").prop("disabled",!0);swarm.form.disableButton($(a).find("[type\x3dsubmit]"));$(a).on("hide",function(a){a.preventDefault()});swarm.review.pollForUpdate(function(a){if(a.commits){var c;for(c=
0;c<a.commits.length;c++)if(parseInt(a.commits[c],10)===parseInt(b,10))return window.location.reload(),!1}})});else return swarm.review.openTransitionDialog(d,e.data(),function(b,c){swarm.review.updateReview(e,c);"approved:commit"===d&&c.isValid?($(b).find("textarea").prop("disabled",!0),swarm.form.disableButton($(b).find("[type\x3dsubmit]")),swarm.review.pollForUpdate(a)):(b.modal("hide"),f.tooltip({title:swarm.t("Review Updated"),trigger:"manual"}).tooltip("show"),setTimeout(function(){f.tooltip("destroy")},
3E3),"approved:commit"!==d&&$.trim(b.find("form textarea").val())&&swarm.comments.load("reviews/"+e.data("review").id,"#comments"))}),!1});var b=$(".review-wrapper").data("review");b.commitStatus.start&&!b.commitStatus.error&&swarm.review.pollForUpdate(a);$(".review-header").on("click",".btn-edit",function(a){a.preventDefault();var b=$(this).closest(".review-wrapper");swarm.review.openEditDialog(b.data(),function(a,c){a.modal("hide");swarm.review.updateReview(b,c)})})},initReadUnread:function(){var a=
function(a,c,d){var e=a.find(".btn-file-read");e.toggleClass("active btn-inverse",c);e.find("i").toggleClass("icon-white",c);a.toggleClass("file-read",c);a.toggleClass("file-unread",!c);d?(e.attr("data-original-title",swarm.t(c?"Marked as Read":"Marked as Unread")),e.tooltip("show"),setTimeout(function(){e.attr("data-original-title",swarm.t(c?"Mark as Unread":"Mark as Read"))},1E3)):e.attr("data-original-title",swarm.t(c?"Mark as Unread":"Mark as Read"))};$(document).on("swarm-login",function(b){$(".change-files .diff-wrapper").each(function(){var c=
$(this);c.data("readby").hasOwnProperty(b.user.id)&&a(c,!0,!1)})});$(".change-files").on("click",".btn-file-read",function(){var b=$(this),c=!b.is(".active"),d=b.closest(".review-wrapper").data("review"),e=b.closest(".review-wrapper").data("change"),f=b.closest(".review-wrapper").data("against"),e=(f?f.rev+",":"")+e.rev,g=b.closest(".diff-wrapper"),f=g.data("file"),h=g.find(".diff-details");$.ajax({type:"POST",url:"/reviews/"+d.id+"/v"+e+"/files/"+swarm.encodeURIDepotPath(f.depotFile),data:{read:c?
1:0,user:swarm.user.getAuthenticatedUser().id},error:function(){a(g,!c,!0)}});a(g,c,!0);h.is(".in")&&c&&(h.one("hidden",function(){b.data("tooltip").tip().parent().length&&b.tooltip("show")}),h.collapse("hide"))})},initSlider:function(){var a=[],b=$(".review-wrapper"),c=b.data("review"),d=b.data("change"),b=b.data("against"),e=parseInt(d.id,10),f=parseInt(d.rev,10),g=b?parseInt(b.id,10):null,h=b?parseInt(b.rev,10):null;$.each(c.versions,function(b){this.rev=b+1;this.change=parseInt(this.change,10);
this.selected=this.change===e&&this.rev===f||this.change===g&&this.rev===h;a.push(this)});$(".review-slider").versionSlider({data:a,markerMode:b?2:1});$(".slider-mode-toggle").toggleClass("active",!!b);$(document).off("slider-moved",".review-slider").on("slider-moved",".review-slider",function(a,b){setTimeout(function(){var a=document.location.pathname.replace(/(\/v[0-9,]+)?\/?$/,"/v"+((b.previousRevision?b.previousRevision.rev+",":"")+b.currentRevision.rev));a!==document.location.pathname&&(b.disable(),
document.location=a+document.location.hash)},0)});$(document).off("click.slider.mode.toggle").on("click.slider.mode.toggle",".slider-mode-toggle",function(){var a=$(".review-slider").data("versionSlider");a.setMarkerMode(1===a.markerMode?2:1);a.$element.trigger("slider-moved",a)})},initEdit:function(){$(".review-header .change-description .btn-edit").length||$('\x3ca href\x3d"#" class\x3d"privileged btn-edit" title\x3d"'+swarm.te("Edit Description")+'"\x3e\x3ci class\x3d"swarm-icon icon-review-needsRevision"\x3e\x3c/i\x3e\x3c/a\x3e').insertAfter(".review-header .change-description .first-line")},
initReviewers:function(){$.templates({userMenu:'\x3cul role\x3d"menu" class\x3d"dropdown-menu" aria-label\x3d"{{te:"User Reviewer Menu"}}"\x3e{{if vote.value \x3c 1 || vote.isStale}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"up"\x3e\x3ci class\x3d"icon-chevron-up"\x3e\x3c/i\x3e {{te:"Vote Up"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{if vote.value !\x3d\x3d 0}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"clear"\x3e\x3ci class\x3d"icon-minus"\x3e\x3c/i\x3e {{te:"Clear Vote"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{if vote.value \x3e -1 || vote.isStale}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"down"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e {{te:"Vote Down"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3cli role\x3d"presentation" class\x3d"divider"\x3e\x3c/li\x3e{{if addReviewer}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"join"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e {{te:"Join Review"}}\x3c/a\x3e\x3c/li\x3e{{else}}{{if isRequired}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"optional"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e {{te:"Make my Vote Optional"}}\x3c/a\x3e\x3c/li\x3e{{else}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"required"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e {{te:"Make my Vote Required"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"leave"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e {{te:"Leave Review"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3c/ul\x3e',
reviewerAvatar:'\x3cdiv class\x3d"reviewer-avatar pull-left {{if current}}current{{/if}} {{if addReviewer}}add-reviewer{{/if}}"\x3e{{if current}}\x3cdiv class\x3d"btn pad1 dropdown-toggle" tabIndex\x3d"0" data-toggle\x3d"dropdown" role\x3d"button" aria-haspopup\x3d"true"\x3e{{/if}}{{:avatar}}{{if vote.value \x3e 0}}\x3ci class\x3d"swarm-icon {{if vote.isStale}}icon-vote-up-stale{{else}}icon-vote-up{{/if}}"\x3e\x3c/i\x3e{{else vote.value \x3c 0}}\x3ci class\x3d"swarm-icon {{if vote.isStale}}icon-vote-down-stale{{else}}icon-vote-down{{/if}}"\x3e\x3c/i\x3e{{/if}}{{if isRequired}}\x3ci class\x3d"swarm-icon icon-required-reviewer"\x3e\x3c/i\x3e{{/if}}{{if current}}\x3ci class\x3d"caret"\x3e\x3c/i\x3e\x3c/div\x3e{{if true tmpl\x3d"userMenu" /}}{{/if}}\x3c/div\x3e',
voteSummary:'\x3cdiv class\x3d"vote-summary text-left pull-left muted"\x3e\x3cdiv\x3e{{te:"Reviewers"}}{{if canEdit}}\x3cbutton type\x3d"button" class\x3d"bare privileged edit-reviewers pad0 padw1"aria-label\x3d"{{te:"Edit Reviewers"}}" title\x3d"{{te:"Edit Reviewers"}}"\x3e\x3ci class\x3d"swarm-icon icon-edit-pencil"\x3e\x3c/i\x3e\x3c/button\x3e{{/if}}\x3c/div\x3e\x3cspan class\x3d"vote-up {{if upCount}}has-value{{/if}}" title\x3d"{{te:"Up Votes"}}"\x3e\x3ci class\x3d"icon-chevron-up"\x3e\x3c/i\x3e{{\x3eupCount}}\x3c/span\x3e\x3cspan class\x3d"vote-down {{if downCount}}has-value{{/if}}" title\x3d"{{te:"Down Votes"}}"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e{{\x3edownCount}}\x3c/span\x3e\x3c/div\x3e',
editReviewersDialog:'\x3cdiv class\x3d"modal hide fade edit-reviewers" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"reviewers-edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"reviewers-edit-title"\x3e{{te:"Reviewers"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"controls reviewers"\x3e\x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"input-xlarge reviewer-multipicker" data-items\x3d"100"placeholder\x3d"{{te:"Reviewer Name"}}"\x3e\x3c/div\x3e\x3cdiv class\x3d"reviewers-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Save"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Close"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e',
requiredReviewerButton:'\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info item-require {{if isRequired}}active{{/if}}" data-toggle\x3d"button" title\x3d"{{if isRequired}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}"  aria-label\x3d"{{if isRequired}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}"\x3e\x3ci class\x3d"{{if isRequired}}icon-star{{else}}icon-star-empty{{/if}} icon-white"\x3e\x3c/i\x3e\x3cinput type\x3d"hidden" name\x3d"requiredReviewers[]" value\x3d"{{\x3evalue}}" {{if !isRequired}}disabled{{/if}}\x3e\x3c/button\x3e'});
swarm.review.buildReviewers();swarm.review.initUserMenu();$(document).on("swarm-login",function(){swarm.review.buildReviewers()});$(document).on("click.edit.reviewers",".review-header .reviewers .edit-reviewers",function(){var a=$(".review-wrapper");swarm.review.openEditReviewersDialog(a.data("review"),function(b,c){b.modal("hide");swarm.review.updateReview(a,c)})})},buildReviewers:function(){var a=$(".review-wrapper"),b=a.data("review"),c=a.data("can-edit-reviewers"),d=a.data("avatars")||{},a=$.grep(b.participants,
function(a){return a!==b.author}),e=swarm.user.getAuthenticatedUser(),f=e&&e.id,g=b.participantsData||{},h={value:0,version:void 0,isStale:void 0},k=0,l=0;$.each(g,function(a,b){b.vote&&!b.vote.isStale&&(k+=0<b.vote.value?1:0,l+=0>b.vote.value?1:0)});var j="";if(a.length||c)j+=$.templates.voteSummary.render({upCount:k,downCount:l,reviewers:a,isAuthor:f===b.author,canEdit:c});$.each(a,function(a,b){b!==f&&(j+=$.templates.reviewerAvatar.render({vote:g[b].vote||h,avatar:d[b]||"",isRequired:!!g[b].required}))});
-1!==$.inArray(f,a)?j+=$.templates.reviewerAvatar.render({vote:g[f].vote||h,avatar:d[f]||"",current:!0,isRequired:!!g[f].required}):f&&f!==b.author&&(c=$(e.avatar),a=c.find(".avatar"),c.removeClass("fluid"),a.attr("width",40).attr("height",40).attr("src",a.attr("src").replace(/s=[0-9]+/,"s\x3d40")).attr("class",a.attr("class").replace(/as-[0-9]+/,"as-40")),j+=$.templates.reviewerAvatar.render({vote:h,avatar:c[0].outerHTML,current:!0,addReviewer:!0}));c=$(".review-header .reviewers");c.find("[title]").tooltip("destroy");
c.html(j);c.find(".reviewer-avatar .btn .avatar").unwrap().wrapAll('\x3cdiv class\x3d"avatar-wrapper"\x3e');c.find(".avatar-wrapper").attr("title","").data("customclass","user-vote").tooltip({container:"body",trigger:"manual",isDelegated:!0,html:!0,title:function(){var a=$(this).find("img").attr("alt"),b=$(this).find("img").data("user"),b=g[b]&&g[b].vote?g[b].vote:{};return $.templates('{{\x3ename}}{{if vote.value}}\x3cbr\x3e\x3cspan class\x3d"muted"\x3e{{if vote.value \x3e 0}}{{te:"voted up"}}{{else}}{{te:"voted down"}}{{/if}}{{if !vote.isStale}} {{te:"latest"}}{{else}} #{{\x3evote.version}}{{/if}}\x3c/span\x3e{{/if}}').render({name:a,
vote:b})}})},initUserMenu:function(){$(document).off("click.review.user.menu");$(document).on("click.review.user.menu",".review-header .reviewers .dropdown-menu a",function(a){a.preventDefault();var b=$(this).data("action");a=function(a,d){var e=$(".review-header .reviewers .current");e.removeClass("open");if(("join"===b||"leave"===b)&&"success"===d){var f=e.find(".avatar-wrapper"),e=swarm.t("join"===b?"Joined":"Left"),g=f.attr("data-original-title");f.attr("data-original-title",e).tooltip("show");
setTimeout(function(){f.attr("data-original-title",g).tooltip("hide")},3E3)}};"join"===b?swarm.review.join(a):"leave"===b?swarm.review.leave(a):"required"===b||"optional"===b?swarm.review.setRequiredReviewer("required"===b,a):swarm.review.vote(b,a)})},leave:function(a){var b=$(".review-wrapper"),c=b.data("review"),d=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+c.id+"/reviewers/"+encodeURIComponent(d.id)+"?_method\x3dDELETE",{type:"POST",dataType:"json",success:function(a){swarm.review.updateReview(b,
a)},complete:a})},join:function(a){var b=$(".review-wrapper"),c=b.data("review"),d=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+c.id,{type:"POST",dataType:"json",data:{join:d.id},success:function(a){swarm.review.updateReview(b,a)},complete:a})},vote:function(a,b){var c=$(".review-wrapper"),d=c.data("review"),e=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+d.id+"/vote/"+a,{type:"POST",dataType:"json",data:{user:e.id,version:d.versions.length},success:function(a){swarm.review.updateReview(c,
a)},complete:b})},setRequiredReviewer:function(a,b){var c=$(".review-wrapper"),d=c.data("review"),e=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+d.id+"/reviewers/"+encodeURIComponent(e.id)+"?_method\x3dPATCH",{type:"POST",dataType:"json",data:{required:a},success:function(a){swarm.review.updateReview(c,a)},complete:b})},openEditReviewersDialog:function(a,b){var c=$.grep(a.participants,function(b){return b!==a.author}),d=a.participantsData||{},e=$($.templates.editReviewersDialog.render()).appendTo("body");
swarm.modal.show(e);e.find(".reviewer-multipicker").userMultiPicker({itemsContainer:e.find(".reviewers-list"),selected:c,inputName:"reviewers",excludeUsers:[a.author],createItem:function(a){var b=$($.templates(this.itemTemplate).render({value:a,inputName:this.options.inputName}));b.find(".btn-group").prepend($.templates.requiredReviewerButton.render({isRequired:!(!d[a]||!d[a].required),value:a}));return b}});e.on("click.required",".item-require",function(){var a=$(this);setTimeout(function(){var b=
a.hasClass("active");a.find("i").toggleClass("icon-star",b).toggleClass("icon-star-empty",!b);a.find("input").prop("disabled",!b);a.attr("data-original-title",b?swarm.t("Vote Required"):swarm.t("Vote Optional"));a.tooltip("show");setTimeout(function(){a.attr("data-original-title",b?swarm.t("Make Vote Optional"):swarm.t("Make Vote Required"))},1E3)},0)});e.find("form").submit(function(c){c.preventDefault();swarm.form.post("/reviews/"+a.id+"/reviewers",e.find("form"),function(a){b&&a.isValid&&b(e,a)},
e.find(".messages")[0])});e.on("shown",function(a){a.target===this&&$(this).find(".reviewers input.multipicker-input").focus()});e.on("hidden",function(a){a.target===this&&$(this).remove()})},openEditDialog:function(a,b){var c=$($.templates('\x3cdiv class\x3d"modal hide fade review-edit" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e{{te:"Edit Description"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea name\x3d"description" class\x3d"border-box monospace"placeholder\x3d"{{te:"Provide a description"}}" rows\x3d"15" cols\x3d"80" required\x3e{{\x3ereview.description}}\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Update"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render({review:a.review})).appendTo("body");
swarm.modal.show(c);c.find("form").submit(function(d){d.preventDefault();swarm.form.post("/reviews/"+a.review.id,c.find("form"),function(a){a.isValid&&b(c,a)},c.find(".messages")[0])});c.on("shown",function(){$(this).find("textarea").focus()});c.on("hidden",function(a){a.target===this&&$(this).remove()})},openTransitionDialog:function(a,b,c){var d=$("#comments table.opened-comments tr.task-state-open").length,e=$($.templates('\x3cdiv class\x3d"modal hide fade review-transition" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"transition-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cinput type\x3d"hidden" name\x3d"state" value\x3d"{{\x3estate}}"\x3e{{if review.commitStatus.error}}\x3cinput type\x3d"hidden" name\x3d"commitStatus" value\x3d""\x3e{{/if}}\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"transition-title"\x3e{{if state \x3d\x3d "approved:commit"}}{{te:"Commit"}}{{else}}{{te:"Update"}}{{/if}} {{te:"Review"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e{{if (state \x3d\x3d\x3d "approved:commit" || state \x3d\x3d\x3d "approved") \x26\x26 openCount}}\x3cdiv class\x3d"alert open-count"\x3e\x3cstrong\x3e{{te:"Warning!"}}\x3c/strong\x3e {{tpe:"There is an open task on this review" "There are %s open tasks on this review" openCount}}\x3c/div\x3e{{/if}}\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3ctextarea name\x3d"description" class\x3d"border-box{{if state \x3d\x3d "approved:commit"}} monospace{{/if}}"{{if state \x3d\x3d "approved:commit"}} required rows\x3d"15" cols\x3d"80"\x3e{{\x3ereview.description}}{{else}} placeholder\x3d"{{te:"Optionally, provide a comment"}}" rows\x3d"10" cols\x3d"80"\x3e{{/if}}\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:transitions[state]}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render({state:a,
review:b.review,transitions:b.transitions,openCount:d})).appendTo("body");if("approved:commit"===a&&b.jobs.length){var f=$('\x3cdiv class\x3d"control-group jobs-list"\x3e\x3cinput type\x3d"hidden" name\x3d"jobs" value\x3d""\x3e\x3ctable class\x3d"table"\x3e\x3c/table\x3e\x3cinput type\x3d"hidden" name\x3d"fixStatus"\x3e\x3c/div\x3e');$.each(b.jobs,function(){f.find("table").append($.templates('\x3ctr data-job\x3d"{{\x3ejob}}"\x3e\x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"jobs[]" value\x3d"{{\x3ejob}}" checked\x3d"checked"\x3e\x3c/td\x3e\x3ctd class\x3d"job-id"\x3e\x3ca href\x3d"{{:link}}" target\x3d"_blank"\x3e{{\x3ejob}}\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"job-status"\x3e{{te:status}}\x3c/td\x3e\x3ctd class\x3d"job-description force-wrap" width\x3d"90%"\x3e{{:description}}\x3c/td\x3e\x3c/tr\x3e').render(this))});
f.find(".job-description").expander({slicePoint:70});e.find("form .modal-body").append(f);if(b.jobStatus){a=b.jobStatus["default"];var d=a.split(",fix/").pop(),g=d!==a?d:"closed",h='\x3cli data-status\x3d"same"\x3e\x3ca href\x3d"#"\x3e'+swarm.te("Same")+'\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e';$.each(b.jobStatus.options,function(){var a=this.valueOf(),b=a===g?"selected":"";h+=$.templates('\x3cli data-status\x3d"{{\x3estatus}}" class\x3d"{{:selected}}"\x3e\x3ca href\x3d"#"\x3e{{te:label}}\x3c/a\x3e\x3c/li\x3e').render({status:a,
label:swarm.jobs.getFriendlyLabel(a),selected:b})});e.find(".modal-footer").append($.templates('\x3cdiv class\x3d"pull-left"\x3e\x3cspan class\x3d"status-label"\x3e{{te:"Job Status on Commit"}}\x3c/span\x3e\x3cdiv class\x3d"btn-group status-dropdown"\x3e\x3cbutton type\x3d"button" class\x3d"btn dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true"\x3e\x3cspan class\x3d"text"\x3e\x3c/span\x3e \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e\x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"{{te:"Job Status on Commit"}}"\x3e{{:options}}\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e').render({options:h}));
var k=function(){var a=e.find(".status-dropdown .dropdown-menu"),b=a.find(".selected").length?a.find(".selected"):a.find("li:first"),a=b.data("status"),b=b.find("a").html();e.find(".status-dropdown .text").text(b);f.find('[name\x3d"fixStatus"]').val(a)};k();e.on("click.job.status",".modal-footer .dropdown-menu a",function(a){a.preventDefault();$(this).closest(".dropdown-menu").find("li").removeClass("selected");$(this).closest("li").addClass("selected");k()})}}swarm.modal.show(e);e.find("form").submit(function(a){a.preventDefault();
swarm.form.post("/reviews/"+b.review.id+"/transition",e.find("form"),function(a){a.isValid&&c(e,a)},e.find(".messages")[0])});e.on("shown",function(){$(this).find("textarea").focus()});e.on("hidden",function(a){a.target===this&&$(this).remove()})},_polling:null,pollForUpdate:function(a){window.clearTimeout(swarm.review._polling);swarm.review._polling=setTimeout(function(){var b=$(".review-wrapper").data("review");$.ajax("/reviews/"+b.id,{dataType:"json",data:{format:"json"},success:function(b){a&&
!1!==a(b.review)&&swarm.review.pollForUpdate(a)}})},1E3)},updateReview:function(a,b){a.data("review",b.review);a.data("avatars",b.avatars);a.data("transitions",b.transitions);a.data("can-edit-reviewers",b.canEditReviewers);swarm.review.initSlider();a.find(".change-description").html(b.description);swarm.review.initEdit();swarm.review.buildStateMenu();swarm.review.updateTestStatus();swarm.review.updateDeployStatus();swarm.review.buildReviewers()},updateTestStatus:function(){var a=$(".review-wrapper"),
b=a.find(".review-header"),c=a.data("review"),d=(a="pass"===c.testStatus)?"check":"warning-sign",e=a?"success":"danger",f=c.testDetails,g=f.url?encodeURI(f.url):"",f=f.endTimes&&f.endTimes.length?Math.max.apply(null,f.endTimes):null;c.testStatus&&(b.find(".test-status").remove(),c=$(g?"\x3ca\x3e":"\x3cspan\x3e"),c.addClass("test-status pull-left btn btn-small btn-"+e).attr("href",g).attr("target","_blank").attr("disabled",!g).append($("\x3ci\x3e").addClass("icon-"+d+" icon-white")),d=$("\x3cspan\x3e"),
d.text(swarm.t("Tests "+(a?"Pass":"Fail"))),f&&d.append("\x3cbr\x3e").append('\x3cspan class\x3d"timeago muted" title\x3d"'+(new Date(1E3*f)).toISOString()+'"\x3e\x3c/span\x3e').find(".timeago").timeago(),c.tooltip({title:d}),b.find(".review-status").prepend(c))},updateDeployStatus:function(){var a=$(".review-wrapper"),b=a.find(".review-header"),a=a.data("review"),c="success"===a.deployStatus,d=c?swarm.te("Try it out!"):swarm.te("Deploy Failed"),e=c?"":"warning",f=a.deployDetails.url?encodeURI(a.deployDetails.url):
"",g=f?"a":"span";if(a.deployStatus&&(!c||f))b.find(".deploy-status").remove(),b.find(".review-status").prepend("\x3c"+g+' class\x3d"deploy-status pull-left btn btn-small btn-'+e+'" title\x3d"'+d+'" '+(f?'href\x3d"'+f+'" target\x3d"_blank"':'disabled\x3d"disabled"')+'\x3e\x3ci class\x3d"icon-plane '+(c?"":"icon-white")+'"\x3e\x3c/i\x3e\x3c/'+g+"\x3e")},buildStateMenu:function(){var a=$(".review-wrapper"),b=a.find(".review-header"),c=a.data("review"),a=a.data("transitions");b.find(".state-menu").remove();
var d="";$.each(a,function(a,b){d+=$.templates('\x3cli\x3e\x3ca href\x3d"#" data-state\x3d"{{\x3estate}}"\x3e \x3ci class\x3d"swarm-icon icon-review-{{class:state}}"\x3e\x3c/i\x3e {{te:label}}\x3c/a\x3e\x3c/li\x3e').render({state:a,label:b})});d+=d?'\x3cli class\x3d"divider"\x3e\x3c/li\x3e':"";d+=$.templates('\x3cli\x3e\x3ca href\x3d"#" data-state\x3d"attach-commit"\x3e \x3ci class\x3d"swarm-icon icon-committed"\x3e\x3c/i\x3e {{if pending}}{{te:"Already Committed"}}{{else}}{{te:"Add a Commit"}}{{/if}}...\x3c/a\x3e\x3c/li\x3e').render({pending:c.pending});
b.find(".review-status").append($.templates('\x3cdiv class\x3d"state-menu btn-group pull-right"\x3e \x3cbutton type\x3d"button"  class\x3d"btn btn-small btn-primary btn-branch dropdown-toggle          {{if review.commitStatus.error}}btn-danger{{/if}}"  {{if !authenticated || transitions \x3d\x3d\x3d false}}disabled{{else}}aria-haspopup\x3d"true"{{/if}}  {{if review.commitStatus.error}}    title\x3d"{{te:"Error committing"}} {{te:review.commitStatus.error}}"  {{/if}}  data-toggle\x3d"dropdown"\x3e{{if review.commitStatus.error}}  \x3ci class\x3d"icon-white icon-warning-sign"\x3e\x3c/i\x3e    {{te:"Error"}}{{else review.commitStatus.start}}  \x3ci class\x3d"swarm-icon icon-white icon-committed"\x3e\x3c/i\x3e    {{if review.commitStatus.status}}{{te:review.commitStatus.status}}{{else}}{{te:"Committing"}}{{/if}}...{{else !review.pending \x26\x26 review.state\x3d\x3d"approved"}}  \x3ci class\x3d"swarm-icon icon-white icon-committed"\x3e\x3c/i\x3e    {{te:review.stateLabel}}{{else}}  \x3ci class\x3d"swarm-icon icon-white icon-review-{{\x3ereview.state}}"\x3e\x3c/i\x3e    {{te:review.stateLabel}}{{/if}} \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e \x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"{{te:"Transition Review"}}"\x3e{{:items}}\x3c/ul\x3e\x3c/div\x3e').render({review:c,
items:d,transitions:a,authenticated:$("body").is(".authenticated")}))},add:function(a,b){a=$(a);b=b||a.closest(".change-wrapper").data("change").id;swarm.form.disableButton(a);$.post("/reviews/add",{change:b},function(b){b.id&&(swarm.form.enableButton(a),a.removeAttr("onclick").attr("href",swarm.url("/reviews/"+b.id)).toggleClass("btn-primary btn-success").find(".text").text(swarm.t("View Review")),a.closest("tr").find("td.review-status").append($("\x3ci\x3e").addClass("swarm-icon icon-review-needsReview").attr("title",
swarm.te("Needs Review"))),a.tooltip({title:swarm.t("Review Requested"),trigger:"manual"}).tooltip("show"),setTimeout(function(){a.tooltip("destroy")},3E3))});return!1}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.jobs={_loading:!1,init:function(a){var b=$(".jobs-toolbar input[name\x3dquery]");$("table.jobs").data("query",b.val());swarm.jobs.load();var e=function(){$("table.jobs").data("query")!==b.val()&&(swarm.jobs._loading&&(swarm.jobs._loading.abort(),swarm.jobs._loading=!1),$("table.jobs").data("query",b.val()),swarm.jobs.load(!0))},f=function(){e();var g="?q\x3d"+encodeURIComponent(b.val());a&&g!==location.search&&swarm.history.pushState(null,null,g)};$(".jobs-toolbar .btn-search").on("click",f);
b.on("keypress",function(g){var a=g.keyCode||g.which;"keypress"===g.type&&13!==a||f()});if(a){$("table.jobs").on("loaded",function(){$(".jobs-toolbar .btn-select-columns").prop("disabled",!1)});$("table.jobs.sortable thead tr").sortable({containerSelector:"tr",itemSelector:"th",placeholder:'\x3cth class\x3d"placeholder"\x3e\x3c/th\x3e',vertical:!1,onDrop:function(a,j,b){b(a);j=a.closest("table");a=a.parent().find("th").map(function(){return $(this).data("field")}).get();swarm.localStorage.set("jobs.fields",
a);swarm.jobs.refresh(j);j.find("tbody").removeClass("sorting")},onDragStart:function(a,j,b){a.appendTo(a.parent());b(a);a.closest("table").find("tbody").addClass("sorting")},onDrag:function(a,b){a.css({left:b.left+"px",top:a.closest("tr").top+"px"})}});var c=$(".jobs-toolbar .btn-select-columns"),d=function(a){c.toggleClass("active",a?!1:null);c.data("popover")&&c.data("popover").destroy();c.is(".active")&&swarm.jobs.openSelectColumns(c)};c.on("click",function(){d()});$(document).on("click",function(){d(!0)});
$(document).on("click.job-fields",".jobs-toolbar .btn-select-columns, .popover-job-fields",function(a){a.stopPropagation()});$(window).scroll(function(){$.isScrolledToBottom()&&swarm.jobs.load()});swarm.history.onPopState(function(){var a=$.deparam(location.search.replace(/^\?/,""),!1,!0);b.val(a.q||"");e()})}},load:function(a){if(!swarm.jobs._loading){var b=$("table.jobs"),e=b.find("thead"),f=b.find("tbody"),c=b.data("query");a&&(b.data("page",0),f.empty());f.append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"5"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+
swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e");a=b.data("page")||0;b.data("page",++a);var d=b.find("tr").not(".loading").last().attr("id"),g=b.data("project"),g=swarm.url((g?"/projects/"+g:"")+"/jobs");swarm.jobs._loading=$.ajax({url:g,data:{q:c,after:d,max:50*a,format:"json"},dataType:"json",success:function(a){var g=a.spec;f.find(".loading").remove();e.data("spec",g);swarm.jobs.refresh(b,a.jobs);a.errors.length&&f.find(".no-jobs .alert").text(a.errors.join(", "));b.trigger("loaded");
setTimeout(function(){swarm.jobs._loading=!1},500)}})}},getFields:function(a){var b=swarm.localStorage.get("jobs.fields");return b&&b.length?$.grep(b.split(","),function(b){return void 0!==a[b]}):[a.__id,a.__status,a.__createdBy||a.__modifiedBy,a.__description,a.__modifiedDate||a.__createdDate]},openSelectColumns:function(a){a=$(a);var b=$("table.jobs"),e=b.find("thead").data("spec"),f=swarm.jobs.getFields(e),c="";$.each(f,function(a,b){c+=$.templates('\x3cli\x3e\x3clabel class\x3d"checkbox"\x3e\x3cinput type\x3d"checkbox" data-value\x3d"{{\x3efield}}" checked\x3d"checked"\x3e{{\x3elabel}}\x3c/label\x3e\x3c/li\x3e').render({field:b,
label:swarm.jobs.getFriendlyLabel(b)})});$.each(e,function(a){if(0===a.indexOf("__")||-1!==f.indexOf(a))return!0;c+=$.templates('\x3cli\x3e\x3clabel class\x3d"checkbox"\x3e\x3cinput type\x3d"checkbox" data-value\x3d"{{\x3efield}}"\x3e{{\x3elabel}}\x3c/label\x3e\x3c/li\x3e').render({field:a,label:swarm.jobs.getFriendlyLabel(a)})});a.popover({trigger:"manual",html:!0,content:'\x3cul class\x3d"unstyled pad1 padw0 fields-list"\x3e'+c+"\x3c/ul\x3e",placement:"bottom",container:"body",customClass:"popover-job-fields"}).popover("show");
var d=$(a.data("popover").tip()),g=function(){var a=[];d.find(".fields-list").find(":checked").each(function(){a.push($(this).data("value"))});swarm.localStorage.set("jobs.fields",a);swarm.jobs.refresh(b)};d.find(".fields-list").sortable({nested:!1,onDrop:function(a,b,c){c(a);b=a.clone();a.replaceWith(b);b.find(":checkbox").is(":checked")&&g()},onDragStart:function(a,b,g){g(a);b.group.placeholder.width(a.width()).height(a.height())},onDrag:function(a,b){var g=a.closest(".fields-list"),c=parseInt(0.5*
a.height(),10),d=2*c,g=g.height()+c,c={left:"15px",top:Math.min(g,Math.max(d,b.top))-c+"px"};a.css(c)}});d.on("click",":checkbox",g)},refresh:function(a,b){var e=$(a).find("thead"),f=$(a).find("tbody"),c=e.data("spec"),d=swarm.jobs.getFields(c);if(b)1===a.data("page")&&f.data("jobs",b);else if(b=f.data("jobs"))f.empty();else{swarm.jobs.load(!0);return}e.find("tr").empty();$.each(d,function(){var a=c[this],b=swarm.jobs.getFriendlyLabel(this);e.find("tr").append($.templates('\x3cth class\x3d"field-{{\x3einfo.code}} type-{{\x3einfo.dataType}}" data-field\x3d"{{\x3efield}}"\x3e\x3cspan class\x3d"field-label"\x3e{{\x3elabel}}\x3c/span\x3e\x3c/th\x3e').render({field:this,
info:a,label:b}))});b&&$.each(b,function(){var a=this,b="";$.each(d,function(){var d=c[this],e=a[this];b+=$.templates('\x3ctd class\x3d"field-{{\x3einfo.code}} type-{{\x3einfo.dataType}}"\x3e{{:value}}\x3c/td\x3e').render({value:e,info:d})});f.append($.templates('\x3ctr id\x3d"{{\x3ejob.__id}}"\x3e{{:columns}}\x3c/tr\x3e').render({job:this,columns:b}))});f.find("tr").length||f.append($.templates('\x3ctr class\x3d"no-jobs"\x3e\x3ctd colspan\x3d"{{\x3efields.length}}"\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e{{if query}}{{te:"No matching jobs."}}{{else}}{{te:"No jobs."}}{{/if}}\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e').render({fields:d,
query:$(a).data("query")}));f.find(".timeago").timeago();f.find(".type-text, .type-bulk").expander({slicePoint:100});f.find(".type-word, .type-select, .type-line").expander({slicePoint:20})},getFriendlyLabel:function(a){a=a.replace(/[_\-]/g," ");a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z][a-z])/g," $1");a=a.replace(/^\s+|\s+$/,"");a=a.replace(/\s{2,}/g," ");return a=a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},renderFixes:function(a){a=$(a);var b=a.find(".change-info"),
e=a.data("review")||a.data("change"),f=a.data("jobs");b.find(".change-fixes").remove();b.parent().css("overflow","hidden").delay(10).queue(function(){b.parent().css("overflow","").dequeue()});var c=$("\x3ctable\x3e\x3c/table\x3e");$.each(f,function(){c.append($.templates('\x3ctr data-job\x3d"{{\x3ejob}}"\x3e\x3ctd class\x3d"job-unlink privileged"\x3e\x3ca href\x3d"" title\x3d"{{te:"Unlink Job"}}"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"job-id"\x3e\x3ca href\x3d"{{:link}}"\x3e{{\x3ejob}}\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"description force-wrap"\x3e{{:description}}\x3c/td\x3e\x3c/tr\x3e').render(this))});
c.append($.templates('\x3ctr class\x3d"privileged"\x3e\x3ctd\x3e\x3ca href\x3d"#" class\x3d"job-add"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e\x3ctd colspan\x3d"2"\x3e\x3ca href\x3d"#" class\x3d"job-add"\x3e{{te:"Add Job"}}\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e').render(this));var d=$('\x3cdiv class\x3d"change-fixes popover-footer"\x3e\x3c/div\x3e');d.append(c).appendTo(b);c.find("td.job-id").length||d.addClass("no-jobs");d.find(".description").expander({slicePoint:80});d.on("click.job.add",
"a.job-add",function(b){b.preventDefault();swarm.jobs.openSelectDialog(function(b,g){swarm.form.disableButton(g.find(".modal-footer .btn-select"));g.find(".modal-footer .btn-cancel").prop("disabled",!0);$.ajax("/changes/"+e.id+"/fixes/add",{type:"POST",data:{jobs:b},dataType:"json",success:function(b){a.data("jobs",b.jobs);swarm.jobs.renderFixes(a);g.modal("hide")}})},a.data())});d.on("click.job.unlink",".job-unlink a",function(b){b.preventDefault();$(".job-unlink a").each(function(){$(this).data("popover")&&
$(this).data("popover").destroy()});$(this).tooltip("hide");b=$(this);var c=b.closest("tr").data("job"),f=$(a).is(".review-wrapper")?"review":"change",h=swarm.tooltip.showConfirm(b,{placement:"top",content:swarm.te("Unlink job from "+f+"?"),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-unlink"\x3e'+swarm.te("Unlink")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});h.tip().on("click",".btn-cancel",function(){h.destroy()});
h.tip().on("click",".btn-unlink",function(){d.find(".job-unlink").each(function(){$(this).html($(this).find("a").html()).css("opacity",0.5)});swarm.form.disableButton(h.tip().find(".btn-unlink"));h.tip().find(".btn").prop("disabled",!0);$.ajax("/changes/"+e.id+"/fixes/delete",{type:"POST",data:{jobs:c},dataType:"json",success:function(b){h.destroy();$(a).data("jobs",b.jobs);swarm.jobs.renderFixes(a)},error:function(){h.destroy()}})})})},openSelectDialog:function(a,b){$(".modal.job-select").remove();
var e=$('\x3cdiv class\x3d"modal hide fade job-select" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e'+swarm.te("Select Job")+'\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"jobs-browser"\x3e\x3cdiv class\x3d"loading animate muted pad3"\x3e'+swarm.te("Loading...")+
'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-select" disabled\x3e'+swarm.te("Select")+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body");swarm.modal.show(e);var f=function(){e.find(".btn.btn-select").prop("disabled",!e.find(".jobs-browser tr.selected").length)};$.ajax(b.jobsUrl||"/jobs",{dataType:"html",
data:{format:"partial"},success:function(b){var d=e.find(".jobs-browser");d.html(b);d.find(".jobs-toolbar").insertBefore(d);e.find(".jobs-toolbar input[name\x3dquery]").removeClass("input-xxlarge").addClass("input-block-level");d.on("click.job.select","tr",function(a){!$(a.target).is("a")&&!$(this).closest("thead").length&&(a=$(this),d.find("tr.selected").not(a).removeClass("selected"),a.toggleClass("selected"),f())});d.dblclick(function(b){b=$(b.target).closest("tr");b.length&&!b.closest("thead").length&&
"function"===typeof a&&a([b.attr("id")],e)});d.on("loaded","table.jobs",function(){f();$(this).find("td a").replaceWith(function(){return $(this).html()});$(this).find("tbody .type-text").expander("destroy").expander({slicePoint:70})})}});e.find(".jobs-browser").scroll(function(){$.isScrolledToBottom($(this),$(this).find("table.jobs"))&&swarm.jobs.load()});e.find(".btn.btn-select").on("click",function(b){b.preventDefault();b=e.find(".jobs-browser tr.selected").map(function(){return $(this).attr("id")}).get();
"function"===typeof a&&a(b,e)})}};(function(c,d){var m=swarm,n=!(!window.CanvasRenderingContext2D||!window.Float32Array),j;try{var l=document.createElement("canvas");j=!!window.WebGLRenderingContext&&(l.getContext("webgl")||l.getContext("experimental-webgl"))}catch(p){j=!1}m.threejs={dependencies:["/vendor/threejs/three.min.js","/vendor/threejs/EditorControls.js"],supported:n,webgl:j,start:function(){c(".view.threejs").each(function(){var a=swarm.threejs.loaders[c(this).data("ext")];a.dependencies&&(swarm.threejs.dependencies.push.apply(swarm.threejs.dependencies,
a.dependencies),a.dependencies=[])}).each(function(){if(swarm.threejs.supported){if(swarm.threejs.loading||swarm.threejs.dependencies.length)return swarm.threejs.showProgress(this),swarm.threejs.loading||swarm.threejs.load();c.data(this,"started")||(c(this).find("canvas").length&&c(this).empty(),swarm.threejs.init(this))}else c(this).text(swarm.t("Model Viewer isn't supported in your browser."))})},load:function(){swarm.threejs.loading=!0;if(swarm.threejs.dependencies.length){swarm.threejs._firstScript=
swarm.threejs._firstScript||document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.src=swarm.threejs.dependencies.shift();c(a).one("load",function(){swarm.threejs.load()});swarm.threejs._firstScript.parentNode.insertBefore(a,swarm.threejs._firstScript)}else swarm.threejs._firstScript=null,swarm.threejs.loading=!1,d=window.THREE,swarm.threejs.start()},showProgress:function(a,b){a=c(a);b=b||0;var d=a.data("percent-loaded")||-1;parseInt(d,10)!==parseInt(b,
10)&&(a.data("percent-loaded",b),!a.find(".progress-container .bar").css("width",b+"%").length&&100!==parseInt(b,10)&&a.append('\x3cdiv class\x3d"progress-container"\x3e\x3cdiv class\x3d"progress"\x3e\x3cdiv class\x3d"bar" style\x3d"width: '+b+'%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'))},showError:function(a,b){c(a).find(".viewer-error").remove();c('\x3cdiv class\x3d"viewer-error" /\x3e').appendTo(a).text(b)},init:function(a){a=c(a);a.data("started",!0);var b=swarm.threejs.loaders[a.data("ext")],
d={container:a[0],camera:null,light:null,scene:null,renderer:null,controls:null,model:null,options:{wireframeControl:!1}};b.load(a,function(b,e){d.model=b;c.extend(d.options,e);swarm.threejs.buildScene(d);a.find(".progress-container").remove();swarm.threejs.animate(d)})},buildScene:function(a){var b=c(a.container),k=b.width(),g=b.height();a.scene=new d.Scene;a.camera=new d.PerspectiveCamera(45,k/g,0.1,2E3);a.camera.position.set(0,7,14);var e,h=new d.Geometry,f=new d.LineBasicMaterial({color:5592405});
for(e=-14;14>=e;e+=1)h.vertices.push(new d.Vector3(-14,-0.04,e)),h.vertices.push(new d.Vector3(14,-0.04,e)),h.vertices.push(new d.Vector3(e,-0.04,-14)),h.vertices.push(new d.Vector3(e,-0.04,14));e=new d.Line(h,f,d.LinePieces);a.scene.add(e);a.scene.add(a.model);e=new d.Box3;e.setFromObject(a.model);a.camera.lookAt(e.center());a.controls=new d.EditorControls(a.camera,a.container);a.controls.center.copy(e.center());a.controls.enabled=!1;a.scene.add(new d.AmbientLight(10461087));a.light=new d.PointLight(15658734,
1);a.light.position=a.camera.position;a.light.scale=a.camera.scale;a.scene.add(a.light);a.renderer=swarm.threejs.webgl?new d.WebGLRenderer:new d.CanvasRenderer;a.renderer.setSize(k,g);a.renderer.setClearColor(7829367,1);b.append(a.renderer.domElement);swarm.threejs.webgl||b.append('\x3cdiv class\x3d"viewer-notice"\x3e'+swarm.te("WebGL was not available, so rendering may be slow.")+"\x3c/div\x3e");b.append(swarm.threejs.getControls(a));c(window).on("resize",function(){var e=b.width(),d=b.height();
a.camera.aspect=e/d;a.camera.updateProjectionMatrix();a.light.scale=a.camera.scale;a.renderer.setSize(e,d)})},animate:function(a){window.requestAnimationFrame(c.proxy(swarm.threejs.animate,swarm.threejs,a));if(!a.controls.enabled&&swarm.threejs.webgl){var b=5E-4*Date.now();a.camera.position.set(-14*Math.cos(b),7,-14*Math.sin(b));a.light.position=a.camera.position;b=new d.Box3;b.setFromObject(a.model);a.camera.lookAt(b.center())}a.renderer.render(a.scene,a.camera)},getControls:function(a){var b=c.templates('\x3cdiv class\x3d"viewer-control {{:cls}} pad1" title\x3d"{{:title}}"\x3e\x3ci class\x3d"icon icon-white {{:icon}}" /\x3e\x3c/div\x3e'),
k=c('\x3cdiv class\x3d"viewer-controls" /\x3e'),g=swarm.t("Reset Camera"),e=swarm.t("Control Camera");c(b.render({cls:"track",icon:"icon-camera",title:a.controls.enabled?g:e})).on("click",function(){a.controls.enabled=!a.controls.enabled;if(a.controls.enabled){var b=new d.Box3;b.setFromObject(a.model);a.controls.center.copy(b.center())}c(this).toggleClass("active",a.controls.enabled).tooltip("destroy").attr("title",a.controls.enabled?g:e).trigger("mouseenter")}).appendTo(k);if(a.options.wireframeControl){var h=
swarm.t("Show Material"),f=swarm.t("Show Wireframe");c(b.render({cls:"wireframe",icon:"icon-th",title:f})).on("click",function(){var b=c(this).hasClass("active");c(this).toggleClass("active",!b).tooltip("destroy").attr("title",b?f:h).trigger("mouseenter");a.model.traverse(function(a){a instanceof d.Mesh&&(a.material.wireframe=!b)});a.model.updateMatrix()}).appendTo(k)}return k},loaders:{_handleProgress:function(a,b){var d=100*parseInt(b.loaded,10),c=parseInt(b.total,10);swarm.threejs.showProgress(a,
Math.round(d/(c||100)))},_LoadMultiMesh:function(a,b,c,g){var e=0.9*a.height(),h=0.9*a.width();a=new d.Box3;a.setFromObject(b);var f=b.worldToLocal(a.max),j=b.worldToLocal(a.min),e=Math.min(e/(f.y-j.y)/100,h/(f.x-j.x)/100);b.scale.set(e,e,e);b.updateMatrix();a.setFromObject(b);b.position=a.center().negate();g||(b.position.y+=a.center().y-a.min.y);b.updateMatrix();c(b)},dae:{dependencies:["/vendor/threejs/ColladaLoader.js"],load:function(a,b){var c=new d.ColladaLoader;c.options.convertUpAxis=!0;try{c.load(a.data("url"),
function(e){swarm.threejs.loaders._LoadMultiMesh(a,e.scene,b)},function(b){swarm.threejs.loaders._handleProgress(a,b)})}catch(g){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return c}},stl:{dependencies:["/vendor/threejs/STLLoader.js"],load:function(a,b){var c=new d.STLLoader;c.addEventListener("progress",function(b){swarm.threejs.loaders._handleProgress(a,b)});c.addEventListener("error",function(){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))});
try{c.load(a.data("url"),function(e){e.computeBoundingBox();var c=0.9*a.height(),f=0.9*a.width(),c=Math.min(c/(e.boundingBox.max.y-e.boundingBox.min.y)/100,f/(e.boundingBox.max.x-e.boundingBox.min.x)/100),f=new d.Object3D;f.add(new d.Mesh(e,new d.MeshPhongMaterial({wireframe:!1,color:3223857})));f.position=new d.Vector3(0,0,0);f.scale=new d.Vector3(c,c,c);f.updateMatrix();b(f,{wireframeControl:!0})})}catch(g){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return c}},
obj:{dependencies:["/vendor/threejs/MTLLoader.js","/vendor/threejs/OBJMTLLoader.js"],load:function(a,b){var c=new d.OBJMTLLoader;try{c.load(a.data("url"),function(c){swarm.threejs.loaders._LoadMultiMesh(a,c,b)},function(b){swarm.threejs.loaders._handleProgress(a,b)},function(){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))})}catch(g){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return c}}}}})(window.jQuery,window.THREE);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.translator={locales:{},jed:null,fallbackJed:null,init:function(a,e){a=swarm.translator.locales[a]||{};e=swarm.translator.locales[e]||{};a.timeago&&($.timeago.settings.strings=a.timeago);var b={missing_key_callback:function(f){throw Error("Missing message key: "+f);}};a.messages&&(b.domain="default",b.locale_data=a.messages);swarm.translator.jed=new Jed(b);b={};e.messages&&(b.domain="default",b.locale_data=e.messages);swarm.translator.fallbackJed=new Jed(b);var g=$.views.converters.html;swarm.t=
function(f,c,h,d){c=$.map($.isArray(c)?c:[],g);return swarm.translator.translate(f,c,h,d)};swarm.tp=function(f,c,h,d,a,b){d=$.map($.isArray(d)?d:[],g);return swarm.translator.translatePlural(f,c,h,d,a,b)};swarm.te=function(f,c,h,d){return g(swarm.translator.translate(f,c,h,d))};swarm.tpe=function(f,c,h,d,a,b){return g(swarm.translator.translatePlural(f,c,h,d,a,b))};$.views.converters({t:function(f,c,a,d){return swarm.t(f,c,a,d)},te:function(a,c,b,d){return swarm.te(a,c,b,d)},tp:function(a,c,b,d,e,
g){return swarm.tp(a,c,b,d,e,g)},tpe:function(a,b,e,d,g,j){return swarm.tpe(a,b,e,d,g,j)}})},translate:function(a,e,b,g){try{a=swarm.translator.jed.dpgettext(g,b,a)}catch(f){try{a=swarm.translator.fallbackJed.dpgettext(g,b,a)}catch(c){}}return $.isArray(e)&&e.length?Jed.sprintf(a,e):a},translatePlural:function(a,e,b,g,f,c){var h;try{h=swarm.translator.jed.dnpgettext(c,f,a,e,b)}catch(d){try{h=swarm.translator.fallbackJed.dnpgettext(c,f,a,e,b)}catch(k){}}return Jed.sprintf(h,$.isArray(g)&&g.length?
g:[b])}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$(function(){var f=$(".navbar-site .search input"),d=null,l={},n=null,j=[],m={},e=null;f.typeahead({source:function(a,c){var e=function(b,d,e){b&&b.promise&&(e=b,b=[]);if("abort"!==d){e&&(m[a]=m[a]||{},m[a][e.types.join(",")]=!0,j.splice(j.indexOf(e),1));l[a]=l[a]||{};$.each(b||[],function(){this.label=this.label||this.id;l[a][this.type+"-"+this.id]=this});var g=$.map(l[f.val()]||{},function(a){return[a]});g.sort(function(a,b){var c=b.score-a.score;a=a.label.toLowerCase();b=b.label.toLowerCase();
return c||(a===b?0:a>b?1:-1)});var h,k={};$.each(g,function(){h=this.type;this.label=this.label||this.id;k[h]=k[h]||[];k[h].push(this)});var n=20/g.length,g=[];$.each(k,function(){h=this;$.each(h,function(a){a<Math.ceil(h.length*n)&&g.push(this)})});c(g)}},k=$.param({q:a,max:20,path:($(".breadcrumb").data("path")||"").replace(/^\/files\/?/,"/"),project:$(".project-navbar").data("project")});$.each(j.slice(),function(){this.abort()});clearTimeout(n);n=setTimeout(function(){var b,c=swarm.url("/search?"+
k+"\x26types\x3d");$.each(["projects","users","files-names","files-contents"],function(d,g){m[a]&&m[a][g]||"files-contents"===g&&!f.data("has-p4-search")||(b=$.get(c+g).always(e),b.types=[g],j.push(b))});e();setTimeout(function(){var b=$.map(l[a],function(a){return a}).length;f.val()&&(f.val()===a&&!b&&j.length)&&d.message(swarm.t("No results (yet...)"))},2E3)},250)},matcher:function(){return!0},sorter:function(a){return a},highlighter:function(a){return $.views.converters.html(a.label)},items:20});
var d=f.data("typeahead"),p=d.render;d.render=function(a){var c=this.$menu.children(".active");p.call(this,a);c.length||this.$menu.children(".active").removeClass("active");var d={user:swarm.t("Users"),project:swarm.t("Projects"),file:swarm.t("Files")},e;this.$menu.children().each(function(b){var c=$(this);b=a[b];c.data("item",b);c.find("a").html($.templates('{{\x3elabel}} {{if detail}}\x3cspan class\x3d"muted"\x3e{{\x3edetail}}\x3c/span\x3e{{/if}}').render(b));b.type!==e&&(e=b.type,c.prepend($.templates('\x3cspan class\x3d"group-heading"\x3e{{te:label}}\x3c/span\x3e').render({label:d[e]})))});
return this};d.select=function(){var a,c=this.$menu.find(".active").data("item");if(c){f.val(c.label);switch(c.type){case "user":a="/users/"+swarm.encodeURIPath(c.id);break;case "project":a="/projects/"+swarm.encodeURIPath(c.id);break;case "file":a="/files/"+c.id.replace(/^\/*/,"")}window.location.href=swarm.url(a);return this.hide()}};var q=d.show,r=d.hide;d.show=function(){q.call(this);f.addClass("active")};d.hide=function(){r.call(this);f.removeClass("active")};var s=d.process;d.process=function(a){if(f.is(":focus, .active")){e=
this.$menu.find(".active:not(:first-child)").data("item")||e;!a.length&&!j.length&&f.val().length?this.message(swarm.t("No results")):a.length&&s.call(this,a);a=this.$menu.find("li");var c=a.filter(function(){return e&&$(this).data("item").id===e.id});c.length&&(a.removeClass("active"),c.addClass("active"));return this}};d.message=function(a,c){this.$menu.html($.templates('\x3cli class\x3d"message muted {{\x3eclasses}}"\x3e{{\x3emessage}}\x3c/li\x3e').render({message:a,classes:c}));this.show()}});/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$(function(){$("body").on("click.swarm.dropdown touchstart.swarm.dropdown",".dropdown-subform",function(a){a.stopPropagation()});$(document).on("swarm-login",function(a){$("body").removeClass("anonymous").addClass("authenticated");a.user.isAdmin&&$("body").removeClass("non-admin").addClass("admin");a.user.addProjectAllowed&&$("body").removeClass("cannot-add-project").addClass("can-add-project");$(".navbar-fixed-top .user").replaceWith($(a.toolbar).find(".user"));$("body").data("user",a.user);$("body").data("csrf",
a.csrf)});$(document).on("keydown","textarea",function(a){27===a.which&&$(this).blur()});$(document).on("input.swarm.form change.swarm.form keyup.swarm.form blur.swarm.form","form",function(){swarm.form.checkInvalid(this)});$.extend($.expander.defaults,{slicePoint:150,expandPrefix:"",expandText:"...",userCollapseText:"\x26laquo;",widow:0,preserveWords:!1,expandSpeed:0,collapseSpeed:0,afterExpand:function(){$(this).find(".details").css({display:"inline"});$(this).addClass("expanded")},onCollapse:function(){$(this).removeClass("expanded")}});
$.views.converters({url:function(a){return encodeURI(swarm.url(a))},urlc:function(a){return encodeURIComponent(a)},empty:function(a){return $.isEmptyObject(a)},"class":function(a){return a=a.replace(/[^_\-a-zA-Z0-9]/,"-")},join:function(a){return $.map(a,function(a){return $.views.converters.html(a)}).join(", ")}});swarm.history.init()});swarm.has.partialHistorySupport()&&swarm.history.patchPartialSuppport();
$(document).on("img-error","img.avatar",function(){var a=$(this);a.hasClass("default")||(a.addClass("default"),a.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"))});$(document).on("img-load","img.avatar",function(){$(this).addClass("loaded")});$.ajaxSettings.cache=!1;
$.ajaxSettings.xhrFields={onerror:function(a){a=a.target;var b=swarm.ignoredAjaxError;b&&(!a.status&&!swarm.has.xhrUserAbortAsError())&&(b.request.isNetworkError=!0,$(document).trigger("ajaxError",[b.request,b.settings,b.message]))},ontimeout:function(a){this.onerror(a)}};
$(document).on("ajaxError",function(a,b,d,c){swarm.ignoredAjaxError=null;d.errorHandled||!b.status&&!b.isNetworkError?swarm.ignoredAjaxError={request:b,settings:d,message:c}:401===b.status?swarm.user.login(swarm.t("Your session has expired.")):($(".global-notification .alert").filter(".s"+b.status).alert("close"),a=b.status,b.isNetworkError&&(c="There was an issue with the Network",a="Error"),b=$.templates('\x3cdiv class\x3d"alert border-box alert-error s{{:status}}"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"alert"\x3e\x26times;\x3c/button\x3e\x3ch4\x3e{{te:status}}\x3c/h4\x3e{{te:message}}\x3cdiv\x3e').render({message:c,
status:a}),$("\x3cdiv /\x3e",{"class":"global-notification border-box"}).append(b).prependTo("body").on("closed",function(){$(this).remove()}))});$.ajaxPrefilter("*",function(a){var b=a.data||"";if(!("GET"===a.type||!a.processData||"string"!==typeof b||a.contentType!==$.ajaxSettings.contentType||!$("body").data("csrf"))){var d=/(&?)_csrf=[^&]*/,c=$("body").data("csrf");a.data=d.test(b)?b.replace(d,"$1_csrf\x3d"+encodeURIComponent(c)):b+(b.length?"\x26":"")+"_csrf\x3d"+encodeURIComponent(c)}});
$.ajaxPrefilter(function(a){a.url=swarm.url(a.url)});